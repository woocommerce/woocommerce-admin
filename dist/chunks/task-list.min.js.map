{"version":3,"sources":["webpack://wc.[modulename]/./client/dashboard/components/cart-modal.js","webpack://wc.[modulename]/./client/dashboard/components/connect/index.js","webpack://wc.[modulename]/./client/dashboard/components/settings/general/store-address.js","webpack://wc.[modulename]/./client/lib/collections/index.js","webpack://wc.[modulename]/./client/lib/in-app-purchase.js","webpack://wc.[modulename]/./client/task-list/index.js","webpack://wc.[modulename]/./client/task-list/list.js","webpack://wc.[modulename]/./client/task-list/tasks.js","webpack://wc.[modulename]/./client/task-list/tasks/appearance.js","webpack://wc.[modulename]/./client/task-list/tasks/payments/index.js","webpack://wc.[modulename]/./client/task-list/tasks/products/index.js","webpack://wc.[modulename]/./client/task-list/tasks/products/product-template-modal.js","webpack://wc.[modulename]/./client/task-list/tasks/products/product-template-modal.scss?a3ec","webpack://wc.[modulename]/./client/task-list/tasks/products/products.js","webpack://wc.[modulename]/./client/task-list/tasks/shipping/index.js","webpack://wc.[modulename]/./client/task-list/tasks/shipping/rates.js","webpack://wc.[modulename]/./client/task-list/tasks/steps/location.js","webpack://wc.[modulename]/./client/task-list/tasks/tax.js"],"names":["CartModal","props","state","purchaseNowButtonBusy","purchaseLaterButtonBusy","productIds","onClickPurchaseNow","setState","length","recordEvent","product_ids","purchase_install","url","getInAppPurchaseUrl","join","window","location","onClickPurchaseLater","onClose","getSetting","productTypes","themes","listItems","forEach","productId","productInfo","find","productType","product","push","title","label","content","description","themeInfo","theme","id","sprintf","__","decodeEntities","price","sanitizeHTML","excerpt","renderProducts","Component","compose","withSelect","select","PLUGINS_STORE_NAME","getInstalledPlugins","ONBOARDING_STORE_NAME","getProfileItems","profileItems","installedPlugins","getProductIdsForCart","Connect","isConnecting","connectJetpack","bind","setIsPending","prevProps","createNotice","error","isRequesting","onError","jetpackConnectUrl","onConnect","hasErrors","onSkip","skipText","onAbort","abortText","reload","propTypes","PropTypes","func","isRequired","string","bool","redirectUrl","defaultProps","getJetpackConnectUrl","isPluginsRequesting","getPluginsError","queryArgs","redirect_url","href","withDispatch","dispatch","countries","validateStoreAddress","values","errors","addressLine1","trim","countryState","city","postCode","getCountryStateOptions","countryStateOptions","reduce","acc","country","states","key","code","name","countryStates","map","useGetCountryStateAutofill","options","setValue","useState","autofillCountry","setAutofillCountry","autofillState","setAutofillState","useEffect","filteredOptions","countrySearch","RegExp","escapeRegExp","filter","option","test","stateSearch","replace","countryKeyOptions","stateKeyOptions","event","target","value","StoreAddress","getInputProps","useMemo","countryStateAutofill","className","groupListOfObjectsBy","array","defaultKey","Array","isArray","result","currentValue","setAllPropsToValue","obj","Object","entries","pathname","search","connectNonce","addQueryArgs","TaskDashboard","taskName","userPreferences","trackedStartedTasks","task_list_tracked_started_tasks","newCount","updateUserPreferences","trackedCompletedTasks","includes","trackStartedCount","getTaskStartedCount","task_name","isTaskCompleted","updateTrackStartedCount","isCartModalOpen","document","body","classList","add","activePlugins","countryCode","installAndActivatePlugins","isJetpackConnected","onboardingStatus","query","getAllTasks","toggleCartModal","onTaskSelect","dismissedTasks","isExtendedTaskListComplete","isExtendedTaskListHidden","isSetupTaskListHidden","isTaskListComplete","allTasks","extensionTasks","extension","setupTasks","setup","task","getTasksStatus","SETTINGS_STORE_NAME","getSettings","OPTIONS_STORE_NAME","getOption","getActivePlugins","general","generalSettings","getCountryCode","woocommerce_default_country","TaskList","recordTaskView","recordTaskListView","possiblyCompleteTaskList","possiblyTrackCompletedTasks","prevQuery","prevTask","documentElement","scrollTop","isComplete","updateOptions","taskListVariableName","taskListToComplete","woocommerce_default_homepage_layout","getIncompleteTasks","getVisibleTasks","completed","tasks","visible","untrackedTasks","completedTasks","every","indexOf","trackedTasks","partialCompletedTasks","allTrackedTask","completedTaskKeys","totalTrackedCompletedTasks","trackedIncompleteTasks","mergedLists","Set","getCompletedTaskKeys","getTrackedCompletedTasks","getTrackedIncompletedTasks","shouldUpdateCompletedTasks","woocommerce_task_list_tracked_completed_tasks","getTasksForUpdate","onDismiss","actions","onClick","undoDismissTask","woocommerce_task_list_dismissed_tasks","updatedDismissedTasks","recordTaskViewEvent","getCurrentTask","number_tasks","store_connected","wccom_connected","action","isCoreTaskList","taskListName","updateOptionsParams","woocommerce_task_list_prompt_shown","completed_task_count","incomplete_task_count","currentTask","s","hideTaskCard","listTitle","theTask","listTasks","classNames","before","check","additionalInfo","time","isDismissable","after","stopPropagation","dismissTask","e","nodeName","updateQueryString","cloneElement","container","renderMenu","wcs_installed","wcs_active","jetpack_installed","jetpack_active","jetpack_connected","hasPaymentGateway","hasPhysicalProducts","hasProducts","isAppearanceComplete","isTaxComplete","shippingZonesCount","wcPayIsConnected","groupedProducts","getCategorizedOnboardingProducts","products","remainingProducts","uniqueItemsList","woocommercePaymentsInstalled","profilerCompleted","product_types","purchaseAndInstallText","itemName","purchaseAndInstallFormat","getHistory","getNewPath","type","Promise","resolve","reject","installActivateAndConnectWcpay","wcAdminFeatures","wcpay","applyFilters","Appearance","tasksStatus","hasHomepage","stepVisibility","homepage","import","isDirty","isPending","logo","stepIndex","isUpdatingLogo","isUpdatingNotice","storeNoticeText","demoStoreNotice","completeStep","createHomepage","importProducts","updateLogo","updateNotice","themeMods","custom_logo","wp","media","attachment","fetch","then","logoUrl","get","nextStep","getSteps","clearTaskStatusCache","apiFetch","path","WC_ADMIN_NAMESPACE","method","failed","catch","message","create_homepage","response","status","edit_post_link","queueRecordEvent","stylesheet","updatedThemeMods","update","success","added_text","Boolean","woocommerce_task_list_appearance_complete","woocommerce_demo_store","woocommerce_demo_store_notice","steps","image","step","currentStep","invalidateResolutionForStoreSelector","setMethodEnabledOption","optionName","methodOptions","enabled","Payments","arguments","methods","enabledMethods","isEnabled","busyMethod","recommendedMethod","getRecommendedMethod","markConfigured","m","methodName","queryParams","payment_method","currentMethod","getCurrentMethod","plugins","pluginsToInstall","pluginNamesString","pluginSlug","pluginNames","createNoticesFromResponse","selected","isConfigured","handleClick","toggleMethod","installStep","getInstallStep","hasCbdIndustry","loading","classes","classnames","isRecommended","showRecommendedRibbon","showRecommendedPill","getSetupButtons","invalidatePluginStoreSelector","invalidateResolution","getPaypalOnboardingStatus","hasFinishedResolution","optionNames","paypalOnboardingStatus","getPaymentMethods","loadingPaypalStatus","ONBOARDING_PRODUCT_TEMPLATES_FILTER","PRODUCT_TEMPLATES","subtitle","ProductTemplateModal","selectedTemplate","setSelectedTemplate","isRedirecting","setIsRedirecting","useDispatch","ITEMS_STORE_NAME","createProductFromTemplate","createTemplate","product_type","template_name","_fields","data","link","getAdminLink","onSelectTemplateClick","val","templates","item","index","subTasks","templatePartSidebar","chevronRight","plusCircle","archive","download","Products","selectTemplate","setSelectTemplate","onTaskClick","Shipping","initialState","shippingZones","reset","countryName","zones","hasCountryZone","all","zone","toggleable","locations","countryLocation","reverse","prevState","settings","storeAddress","woocommerce_store_address","defaultCountry","storePostCode","woocommerce_store_postcode","fetchShippingZones","isCompleteAddress","currentStepIndex","findIndex","difference","pluginsToActivate","getPluginsToActivate","requiresJetpackConnection","woocommerce_ship_to_countries","interpolateComponents","mixedString","components","install","plugins_to_activate","isUpdateSettingsRequesting","c","updateAndPersistSettingsForGroup","ShippingRates","updateShippingZones","method_id","instance_id","restOfTheWorld","shippingCost","parseFloat","shippingMethods","getShippingMethods","methodType","shippingMethod","disableShippingMethods","methodsToDisable","cost","shipping_cost","rest_world","onComplete","context","getCurrencyConfig","symbolPosition","symbol","rate","formatDecimalString","currencyString","getFormattedRate","rates","keys","field","endsWith","buttonText","getInitialValues","validate","handleSubmit","setTouched","globe","renderInputPrefix","renderInputSuffix","contextType","CurrencyContext","StoreLocation","onSubmit","isSettingsError","woocommerce_store_address_2","addressLine2","woocommerce_store_city","storeAddress2","storeCity","storePostcode","isSettingsRequesting","Tax","hasCompleteAddress","cachedPluginsToActivate","isTaxJarSupported","automatedTaxSupportedCountries","taxJarActivated","woocommerce_calc_taxes","redirectToTaxSettings","isEnabling","taxSettings","tax","wc_connect_taxes_enabled","connect","no_tax","woocommerce_no_sales_tax","tosAccepted","step2Label","agreementText","install_extensions","woocommerce_setup_jetpack_opted_in","manuallyConfigureTaxRates","doNotChargeSalesTax","strong","setup_automatically","updateAutomatedTax","isResolving","shouldShowSuccessScreen","renderSuccessScreen","connectOptions","tos_accepted"],"mappings":"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","file":"chunks/task-list.min.js","sourcesContent":["/**\n * External dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport { Component } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport { Button, Modal } from '@wordpress/components';\nimport { find } from 'lodash';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { withSelect } from '@wordpress/data';\nimport { getSetting } from '@woocommerce/wc-admin-settings';\nimport { List } from '@woocommerce/components';\nimport { ONBOARDING_STORE_NAME, PLUGINS_STORE_NAME } from '@woocommerce/data';\nimport { recordEvent } from '@woocommerce/tracks';\n\n/**\n * Internal dependencies\n */\nimport { getProductIdsForCart } from '../utils';\nimport sanitizeHTML from '../../lib/sanitize-html';\nimport { getInAppPurchaseUrl } from '../../lib/in-app-purchase';\n\nclass CartModal extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.state = {\n\t\t\tpurchaseNowButtonBusy: false,\n\t\t\tpurchaseLaterButtonBusy: false,\n\t\t};\n\t}\n\n\tonClickPurchaseNow() {\n\t\tconst { productIds, onClickPurchaseNow } = this.props;\n\t\tthis.setState( { purchaseNowButtonBusy: true } );\n\t\tif ( ! productIds.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\trecordEvent( 'tasklist_modal_proceed_checkout', {\n\t\t\tproduct_ids: productIds,\n\t\t\tpurchase_install: true,\n\t\t} );\n\n\t\tconst url = getInAppPurchaseUrl( 'https://woocommerce.com/cart', {\n\t\t\t'wccom-replace-with': productIds.join( ',' ),\n\t\t} );\n\n\t\tif ( onClickPurchaseNow ) {\n\t\t\tonClickPurchaseNow( url );\n\t\t\treturn;\n\t\t}\n\n\t\twindow.location = url;\n\t}\n\n\tonClickPurchaseLater() {\n\t\tconst { productIds } = this.props;\n\n\t\trecordEvent( 'tasklist_modal_proceed_checkout', {\n\t\t\tproduct_ids: productIds,\n\t\t\tpurchase_install: false,\n\t\t} );\n\n\t\tthis.setState( { purchaseLaterButtonBusy: true } );\n\t\tthis.props.onClickPurchaseLater();\n\t}\n\n\tonClose() {\n\t\tconst { onClose, productIds } = this.props;\n\n\t\trecordEvent( 'tasklist_modal_proceed_checkout', {\n\t\t\tproduct_ids: productIds,\n\t\t\tpurchase_install: false,\n\t\t} );\n\n\t\tonClose();\n\t}\n\n\trenderProducts() {\n\t\tconst { productIds } = this.props;\n\t\tconst { productTypes = {}, themes = [] } = getSetting(\n\t\t\t'onboarding',\n\t\t\t{}\n\t\t);\n\t\tconst listItems = [];\n\n\t\tproductIds.forEach( ( productId ) => {\n\t\t\tconst productInfo = find( productTypes, ( productType ) => {\n\t\t\t\treturn productType.product === productId;\n\t\t\t} );\n\n\t\t\tif ( productInfo ) {\n\t\t\t\tlistItems.push( {\n\t\t\t\t\ttitle: productInfo.label,\n\t\t\t\t\tcontent: productInfo.description,\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tconst themeInfo = find( themes, ( theme ) => {\n\t\t\t\treturn theme.id === productId;\n\t\t\t} );\n\n\t\t\tif ( themeInfo ) {\n\t\t\t\tlistItems.push( {\n\t\t\t\t\ttitle: sprintf(\n\t\t\t\t\t\t__( '%s  %s per year', 'woocommerce-admin' ),\n\t\t\t\t\t\tthemeInfo.title,\n\t\t\t\t\t\tdecodeEntities( themeInfo.price )\n\t\t\t\t\t),\n\t\t\t\t\tcontent: (\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tdangerouslySetInnerHTML={ sanitizeHTML(\n\t\t\t\t\t\t\t\tthemeInfo.excerpt\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t),\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\n\t\treturn <List items={ listItems } />;\n\t}\n\n\trender() {\n\t\tconst { purchaseNowButtonBusy, purchaseLaterButtonBusy } = this.state;\n\t\treturn (\n\t\t\t<Modal\n\t\t\t\ttitle={ __(\n\t\t\t\t\t'Would you like to add the following paid features to your store now?',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t) }\n\t\t\t\tonRequestClose={ () => this.onClose() }\n\t\t\t\tclassName=\"woocommerce-cart-modal\"\n\t\t\t>\n\t\t\t\t{ this.renderProducts() }\n\n\t\t\t\t<p className=\"woocommerce-cart-modal__help-text\">\n\t\t\t\t\t{ __(\n\t\t\t\t\t\t\"You won't have access to this functionality until the extensions have been purchased and installed.\",\n\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t) }\n\t\t\t\t</p>\n\n\t\t\t\t<div className=\"woocommerce-cart-modal__actions\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\tisLink\n\t\t\t\t\t\tisBusy={ purchaseLaterButtonBusy }\n\t\t\t\t\t\tonClick={ () => this.onClickPurchaseLater() }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( \"I'll do it later\", 'woocommerce-admin' ) }\n\t\t\t\t\t</Button>\n\n\t\t\t\t\t<Button\n\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\tisBusy={ purchaseNowButtonBusy }\n\t\t\t\t\t\tonClick={ () => this.onClickPurchaseNow() }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Buy now', 'woocommerce-admin' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</Modal>\n\t\t);\n\t}\n}\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst { getInstalledPlugins } = select( PLUGINS_STORE_NAME );\n\t\tconst { getProfileItems } = select( ONBOARDING_STORE_NAME );\n\t\tconst profileItems = getProfileItems();\n\t\tconst installedPlugins = getInstalledPlugins();\n\t\tconst productIds = getProductIdsForCart(\n\t\t\tprofileItems,\n\t\t\tfalse,\n\t\t\tinstalledPlugins\n\t\t);\n\n\t\treturn { profileItems, productIds };\n\t} )\n)( CartModal );\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Button } from '@wordpress/components';\nimport { Component, Fragment } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport PropTypes from 'prop-types';\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { PLUGINS_STORE_NAME } from '@woocommerce/data';\n\nexport class Connect extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.state = {\n\t\t\tisConnecting: false,\n\t\t};\n\n\t\tthis.connectJetpack = this.connectJetpack.bind( this );\n\t\tprops.setIsPending( true );\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tconst {\n\t\t\tcreateNotice,\n\t\t\terror,\n\t\t\tisRequesting,\n\t\t\tonError,\n\t\t\tsetIsPending,\n\t\t} = this.props;\n\n\t\tif ( prevProps.isRequesting && ! isRequesting ) {\n\t\t\tsetIsPending( false );\n\t\t}\n\n\t\tif ( error && error !== prevProps.error ) {\n\t\t\tif ( onError ) {\n\t\t\t\tonError();\n\t\t\t}\n\t\t\tcreateNotice( 'error', error );\n\t\t}\n\t}\n\n\tasync connectJetpack() {\n\t\tconst { jetpackConnectUrl, onConnect } = this.props;\n\n\t\tthis.setState(\n\t\t\t{\n\t\t\t\tisConnecting: true,\n\t\t\t},\n\t\t\t() => {\n\t\t\t\tif ( onConnect ) {\n\t\t\t\t\tonConnect();\n\t\t\t\t}\n\t\t\t\twindow.location = jetpackConnectUrl;\n\t\t\t}\n\t\t);\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\thasErrors,\n\t\t\tisRequesting,\n\t\t\tonSkip,\n\t\t\tskipText,\n\t\t\tonAbort,\n\t\t\tabortText,\n\t\t} = this.props;\n\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t{ hasErrors ? (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\tonClick={ () => window.location.reload() }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Retry', 'woocommerce-admin' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t) : (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tdisabled={ isRequesting }\n\t\t\t\t\t\tisBusy={ this.state.isConnecting }\n\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\tonClick={ this.connectJetpack }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Connect', 'woocommerce-admin' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t) }\n\t\t\t\t{ onSkip && (\n\t\t\t\t\t<Button onClick={ onSkip }>\n\t\t\t\t\t\t{ skipText || __( 'No thanks', 'woocommerce-admin' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t) }\n\t\t\t\t{ onAbort && (\n\t\t\t\t\t<Button onClick={ onAbort }>\n\t\t\t\t\t\t{ abortText || __( 'Abort', 'woocommerce-admin' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t) }\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n\nConnect.propTypes = {\n\t/**\n\t * Method to create a displayed notice.\n\t */\n\tcreateNotice: PropTypes.func.isRequired,\n\t/**\n\t * Human readable error message.\n\t */\n\terror: PropTypes.string,\n\t/**\n\t * Bool to determine if the \"Retry\" button should be displayed.\n\t */\n\thasErrors: PropTypes.bool,\n\t/**\n\t * Bool to check if the connection URL is still being requested.\n\t */\n\tisRequesting: PropTypes.bool,\n\t/**\n\t * Generated Jetpack connection URL.\n\t */\n\tjetpackConnectUrl: PropTypes.string,\n\t/**\n\t * Called before the redirect to Jetpack.\n\t */\n\tonConnect: PropTypes.func,\n\t/**\n\t * Called when the plugin has an error retrieving the jetpackConnectUrl.\n\t */\n\tonError: PropTypes.func,\n\t/**\n\t * Called when the plugin connection is skipped.\n\t */\n\tonSkip: PropTypes.func,\n\t/**\n\t * Redirect URL to encode as a URL param for the connection path.\n\t */\n\tredirectUrl: PropTypes.string,\n\t/**\n\t * Text used for the skip connection button.\n\t */\n\tskipText: PropTypes.string,\n\t/**\n\t * Control the `isPending` logic of the parent containing the Stepper.\n\t */\n\tsetIsPending: PropTypes.func,\n\t/**\n\t * Called when the plugin connection is aborted.\n\t */\n\tonAbort: PropTypes.func,\n\t/**\n\t * Text used for the abort connection button.\n\t */\n\tabortText: PropTypes.string,\n};\n\nConnect.defaultProps = {\n\tsetIsPending: () => {},\n};\n\nexport default compose(\n\twithSelect( ( select, props ) => {\n\t\tconst {\n\t\t\tgetJetpackConnectUrl,\n\t\t\tisPluginsRequesting,\n\t\t\tgetPluginsError,\n\t\t} = select( PLUGINS_STORE_NAME );\n\n\t\tconst queryArgs = {\n\t\t\tredirect_url: props.redirectUrl || window.location.href,\n\t\t};\n\t\tconst isRequesting = isPluginsRequesting( 'getJetpackConnectUrl' );\n\t\tconst error = getPluginsError( 'getJetpackConnectUrl' ) || '';\n\t\tconst jetpackConnectUrl = getJetpackConnectUrl( queryArgs );\n\n\t\treturn {\n\t\t\terror,\n\t\t\tisRequesting,\n\t\t\tjetpackConnectUrl,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { createNotice } = dispatch( 'core/notices' );\n\n\t\treturn {\n\t\t\tcreateNotice,\n\t\t};\n\t} )\n)( Connect );\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { escapeRegExp } from 'lodash';\nimport { Fragment, useEffect, useMemo, useState } from '@wordpress/element';\nimport { getSetting } from '@woocommerce/wc-admin-settings';\nimport { SelectControl, TextControl } from '@woocommerce/components';\n\nconst { countries } = getSetting( 'dataEndpoints', { countries: {} } );\n/**\n * Form validation.\n *\n * @param {Object} values Keyed values of all fields in the form.\n * @return {Object} Key value of fields and error messages, { myField: 'This field is required' }\n */\nexport function validateStoreAddress( values ) {\n\tconst errors = {};\n\n\tif ( ! values.addressLine1.trim().length ) {\n\t\terrors.addressLine1 = __(\n\t\t\t'Please add an address',\n\t\t\t'woocommerce-admin'\n\t\t);\n\t}\n\tif ( ! values.countryState.trim().length ) {\n\t\terrors.countryState = __(\n\t\t\t'Please select a country / region',\n\t\t\t'woocommerce-admin'\n\t\t);\n\t}\n\tif ( ! values.city.trim().length ) {\n\t\terrors.city = __( 'Please add a city', 'woocommerce-admin' );\n\t}\n\tif ( ! values.postCode.trim().length ) {\n\t\terrors.postCode = __( 'Please add a post code', 'woocommerce-admin' );\n\t}\n\n\treturn errors;\n}\n\n/**\n * Get all country and state combinations used for select dropdowns.\n *\n * @return {Object} Select options, { value: 'US:GA', label: 'United States - Georgia' }\n */\nexport function getCountryStateOptions() {\n\tconst countryStateOptions = countries.reduce( ( acc, country ) => {\n\t\tif ( ! country.states.length ) {\n\t\t\tacc.push( {\n\t\t\t\tkey: country.code,\n\t\t\t\tlabel: decodeEntities( country.name ),\n\t\t\t} );\n\n\t\t\treturn acc;\n\t\t}\n\n\t\tconst countryStates = country.states.map( ( state ) => {\n\t\t\treturn {\n\t\t\t\tkey: country.code + ':' + state.code,\n\t\t\t\tlabel:\n\t\t\t\t\tdecodeEntities( country.name ) +\n\t\t\t\t\t'  ' +\n\t\t\t\t\tdecodeEntities( state.name ),\n\t\t\t};\n\t\t} );\n\n\t\tacc.push( ...countryStates );\n\n\t\treturn acc;\n\t}, [] );\n\n\treturn countryStateOptions;\n}\n\n/**\n * Get the autofill countryState fields and set value from filtered options.\n *\n * @param {Array} options Array of filterable options.\n * @param {string} countryState The value of the countryState field.\n * @param {Function} setValue Set value of the countryState input.\n * @return {Object} React component.\n */\nexport function useGetCountryStateAutofill( options, countryState, setValue ) {\n\tconst [ autofillCountry, setAutofillCountry ] = useState( '' );\n\tconst [ autofillState, setAutofillState ] = useState( '' );\n\n\tuseEffect( () => {\n\t\tlet filteredOptions = [];\n\t\tconst countrySearch = new RegExp(\n\t\t\tescapeRegExp( autofillCountry ),\n\t\t\t'i'\n\t\t);\n\t\tif ( autofillState.length || autofillCountry.length ) {\n\t\t\tfilteredOptions = options.filter( ( option ) =>\n\t\t\t\tcountrySearch.test( option.label )\n\t\t\t);\n\t\t}\n\t\tif ( autofillCountry.length && autofillState.length ) {\n\t\t\tconst stateSearch = new RegExp(\n\t\t\t\tescapeRegExp( autofillState.replace( /\\s/g, '' ) ),\n\t\t\t\t'i'\n\t\t\t);\n\t\t\tfilteredOptions = filteredOptions.filter( ( option ) =>\n\t\t\t\tstateSearch.test(\n\t\t\t\t\toption.label.replace( '-', '' ).replace( /\\s/g, '' )\n\t\t\t\t)\n\t\t\t);\n\n\t\t\tif ( filteredOptions.length > 1 ) {\n\t\t\t\tlet countryKeyOptions = [];\n\t\t\t\tcountryKeyOptions = filteredOptions.filter( ( option ) =>\n\t\t\t\t\tcountrySearch.test( option.key )\n\t\t\t\t);\n\n\t\t\t\tif ( countryKeyOptions.length > 0 ) {\n\t\t\t\t\tfilteredOptions = countryKeyOptions;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( filteredOptions.length > 1 ) {\n\t\t\t\tlet stateKeyOptions = [];\n\t\t\t\tstateKeyOptions = filteredOptions.filter( ( option ) =>\n\t\t\t\t\tstateSearch.test( option.key )\n\t\t\t\t);\n\n\t\t\t\tif ( stateKeyOptions.length === 1 ) {\n\t\t\t\t\tfilteredOptions = stateKeyOptions;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (\n\t\t\tfilteredOptions.length === 1 &&\n\t\t\tcountryState !== filteredOptions[ 0 ].key\n\t\t) {\n\t\t\tsetValue( 'countryState', filteredOptions[ 0 ].key );\n\t\t}\n\t}, [ autofillCountry, autofillState, countryState, options, setValue ] );\n\n\treturn (\n\t\t<Fragment>\n\t\t\t<input\n\t\t\t\tonChange={ ( event ) =>\n\t\t\t\t\tsetAutofillCountry( event.target.value )\n\t\t\t\t}\n\t\t\t\tvalue={ autofillCountry }\n\t\t\t\tname=\"country\"\n\t\t\t\ttype=\"text\"\n\t\t\t\tclassName=\"woocommerce-select-control__autofill-input\"\n\t\t\t\ttabIndex=\"-1\"\n\t\t\t\tautoComplete=\"country\"\n\t\t\t/>\n\n\t\t\t<input\n\t\t\t\tonChange={ ( event ) => setAutofillState( event.target.value ) }\n\t\t\t\tvalue={ autofillState }\n\t\t\t\tname=\"state\"\n\t\t\t\ttype=\"text\"\n\t\t\t\tclassName=\"woocommerce-select-control__autofill-input\"\n\t\t\t\ttabIndex=\"-1\"\n\t\t\t\tautoComplete=\"address-level1\"\n\t\t\t/>\n\t\t</Fragment>\n\t);\n}\n\n/**\n * Store address fields.\n *\n * @param {Object} props Props for input components.\n * @return {Object} -\n */\nexport function StoreAddress( props ) {\n\tconst { getInputProps, setValue } = props;\n\tconst countryStateOptions = useMemo( () => getCountryStateOptions(), [] );\n\tconst countryStateAutofill = useGetCountryStateAutofill(\n\t\tcountryStateOptions,\n\t\tgetInputProps( 'countryState' ).value,\n\t\tsetValue\n\t);\n\n\treturn (\n\t\t<div className=\"woocommerce-store-address-fields\">\n\t\t\t<TextControl\n\t\t\t\tlabel={ __( 'Address line 1', 'woocommerce-admin' ) }\n\t\t\t\trequired\n\t\t\t\tautoComplete=\"address-line1\"\n\t\t\t\t{ ...getInputProps( 'addressLine1' ) }\n\t\t\t/>\n\n\t\t\t<TextControl\n\t\t\t\tlabel={ __( 'Address line 2 (optional)', 'woocommerce-admin' ) }\n\t\t\t\trequired\n\t\t\t\tautoComplete=\"address-line2\"\n\t\t\t\t{ ...getInputProps( 'addressLine2' ) }\n\t\t\t/>\n\n\t\t\t<SelectControl\n\t\t\t\tlabel={ __( 'Country / Region', 'woocommerce-admin' ) }\n\t\t\t\trequired\n\t\t\t\toptions={ countryStateOptions }\n\t\t\t\texcludeSelectedOptions={ false }\n\t\t\t\tshowAllOnFocus\n\t\t\t\tisSearchable\n\t\t\t\t{ ...getInputProps( 'countryState' ) }\n\t\t\t\tcontrolClassName={ getInputProps( 'countryState' ).className }\n\t\t\t>\n\t\t\t\t{ countryStateAutofill }\n\t\t\t</SelectControl>\n\n\t\t\t<TextControl\n\t\t\t\tlabel={ __( 'City', 'woocommerce-admin' ) }\n\t\t\t\trequired\n\t\t\t\t{ ...getInputProps( 'city' ) }\n\t\t\t\tautoComplete=\"address-level2\"\n\t\t\t/>\n\n\t\t\t<TextControl\n\t\t\t\tlabel={ __( 'Post code', 'woocommerce-admin' ) }\n\t\t\t\trequired\n\t\t\t\tautoComplete=\"postal-code\"\n\t\t\t\t{ ...getInputProps( 'postCode' ) }\n\t\t\t/>\n\t\t</div>\n\t);\n}\n","/**\n * Returns an object with items grouped by the sent key.\n *\n * @param {Array} array array of objects.\n * @param {string} key the object prop that will be used to group elements.\n * @param {string} defaultKey if the key is not found in the object, it will use this value.\n * @return {Object} Object that contains the grouped elements.\n */\nexport const groupListOfObjectsBy = (\n\tarray,\n\tkey,\n\tdefaultKey = 'undefined'\n) => {\n\tif ( array && Array.isArray( array ) && array.length ) {\n\t\tif ( ! key ) {\n\t\t\treturn array;\n\t\t}\n\t\treturn array.reduce( ( result, currentValue ) => {\n\t\t\tif ( ! currentValue[ key ] ) {\n\t\t\t\tcurrentValue[ key ] = defaultKey;\n\t\t\t}\n\t\t\t( result[ currentValue[ key ] ] =\n\t\t\t\tresult[ currentValue[ key ] ] || [] ).push( currentValue );\n\t\t\treturn result;\n\t\t}, {} );\n\t}\n\treturn {};\n};\n\n/**\n * Returns a (shallow) copy of an object with all its props set to the specified value\n *\n * @param {*} obj the Object to copy.\n * @param {*} value the value to set all props on the object to.\n */\nexport const setAllPropsToValue = ( obj, value ) => {\n\treturn Object.entries( obj ).reduce( ( acc, [ key ] ) => {\n\t\treturn {\n\t\t\t...acc,\n\t\t\t[ key ]: value,\n\t\t};\n\t}, {} );\n};\n","/**\n * External dependencies\n */\nimport { addQueryArgs } from '@wordpress/url';\nimport { getSetting } from '@woocommerce/wc-admin-settings';\n\n/**\n * Returns an in-app-purchase URL.\n *\n * @param {string} url\n * @param {Object} queryArgs\n * @return {string} url with in-app-purchase query parameters\n */\nexport const getInAppPurchaseUrl = ( url, queryArgs = {} ) => {\n\tconst { pathname, search } = window.location;\n\tconst connectNonce = getSetting( 'connectNonce', '' );\n\tqueryArgs = {\n\t\t'wccom-site': getSetting( 'siteUrl' ),\n\t\t// If the site is installed in a directory the directory must be included in the back param path.\n\t\t'wccom-back': pathname + search,\n\t\t'wccom-woo-version': getSetting( 'wcVersion' ),\n\t\t'wccom-connect-nonce': connectNonce,\n\t\t...queryArgs,\n\t};\n\n\treturn addQueryArgs( url, queryArgs );\n};\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport {\n\tONBOARDING_STORE_NAME,\n\tOPTIONS_STORE_NAME,\n\tPLUGINS_STORE_NAME,\n\tSETTINGS_STORE_NAME,\n} from '@woocommerce/data';\nimport { recordEvent } from '@woocommerce/tracks';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport CartModal from '../dashboard/components/cart-modal';\nimport { getAllTasks } from './tasks';\nimport { getCountryCode } from '../dashboard/utils';\nimport TaskList from './list';\n\nexport class TaskDashboard extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.state = {\n\t\t\tisCartModalOpen: false,\n\t\t};\n\t}\n\tcomponentDidMount() {\n\t\tdocument.body.classList.add( 'woocommerce-onboarding' );\n\t\tdocument.body.classList.add( 'woocommerce-task-dashboard__body' );\n\t}\n\n\tgetTaskStartedCount = ( taskName ) => {\n\t\tconst { userPreferences } = this.props;\n\t\tconst trackedStartedTasks =\n\t\t\tuserPreferences.task_list_tracked_started_tasks;\n\t\tif ( ! trackedStartedTasks || ! trackedStartedTasks[ taskName ] ) {\n\t\t\treturn 0;\n\t\t}\n\t\treturn trackedStartedTasks[ taskName ];\n\t};\n\n\tupdateTrackStartedCount = ( taskName, newCount ) => {\n\t\tconst { userPreferences } = this.props;\n\t\tconst trackedStartedTasks =\n\t\t\tuserPreferences.task_list_tracked_started_tasks || {};\n\t\tuserPreferences.updateUserPreferences( {\n\t\t\ttask_list_tracked_started_tasks: {\n\t\t\t\t...( trackedStartedTasks || {} ),\n\t\t\t\t[ taskName ]: newCount,\n\t\t\t},\n\t\t} );\n\t};\n\n\tisTaskCompleted = ( taskName ) => {\n\t\tconst { trackedCompletedTasks } = this.props;\n\t\tif ( ! trackedCompletedTasks ) {\n\t\t\treturn false;\n\t\t}\n\t\treturn trackedCompletedTasks.includes( taskName );\n\t};\n\n\tonTaskSelect = ( taskName ) => {\n\t\tconst trackStartedCount = this.getTaskStartedCount( taskName );\n\t\trecordEvent( 'tasklist_click', {\n\t\t\ttask_name: taskName,\n\t\t} );\n\t\tif ( ! this.isTaskCompleted( taskName ) ) {\n\t\t\tthis.updateTrackStartedCount( taskName, trackStartedCount + 1 );\n\t\t}\n\t};\n\n\tgetAllTasks() {\n\t\tconst {\n\t\t\tactivePlugins,\n\t\t\tcountryCode,\n\t\t\tcreateNotice,\n\t\t\tinstallAndActivatePlugins,\n\t\t\tinstalledPlugins,\n\t\t\tisJetpackConnected,\n\t\t\tonboardingStatus,\n\t\t\tprofileItems,\n\t\t\tquery,\n\t\t} = this.props;\n\n\t\treturn getAllTasks( {\n\t\t\tactivePlugins,\n\t\t\tcountryCode,\n\t\t\tcreateNotice,\n\t\t\tinstallAndActivatePlugins,\n\t\t\tinstalledPlugins,\n\t\t\tisJetpackConnected,\n\t\t\tonboardingStatus,\n\t\t\tprofileItems,\n\t\t\tquery,\n\t\t\ttoggleCartModal: this.toggleCartModal.bind( this ),\n\t\t\tonTaskSelect: this.onTaskSelect,\n\t\t} );\n\t}\n\n\ttoggleCartModal() {\n\t\tconst { isCartModalOpen } = this.state;\n\n\t\tif ( ! isCartModalOpen ) {\n\t\t\trecordEvent( 'tasklist_purchase_extensions' );\n\t\t}\n\n\t\tthis.setState( { isCartModalOpen: ! isCartModalOpen } );\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tdismissedTasks,\n\t\t\tisExtendedTaskListComplete,\n\t\t\tisExtendedTaskListHidden,\n\t\t\tisSetupTaskListHidden,\n\t\t\tisTaskListComplete,\n\t\t\tquery,\n\t\t\ttrackedCompletedTasks,\n\t\t} = this.props;\n\t\tconst { isCartModalOpen } = this.state;\n\t\tconst allTasks = this.getAllTasks();\n\t\tconst { extension: extensionTasks, setup: setupTasks } = allTasks;\n\t\tconst { task } = query;\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t{ setupTasks && ( ! isSetupTaskListHidden || task ) && (\n\t\t\t\t\t<TaskList\n\t\t\t\t\t\tdismissedTasks={ dismissedTasks || [] }\n\t\t\t\t\t\tisComplete={ isTaskListComplete }\n\t\t\t\t\t\tquery={ query }\n\t\t\t\t\t\ttasks={ setupTasks }\n\t\t\t\t\t\ttitle={ __(\n\t\t\t\t\t\t\t'Get ready to start selling',\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t) }\n\t\t\t\t\t\ttrackedCompletedTasks={ trackedCompletedTasks || [] }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ extensionTasks && ! isExtendedTaskListHidden && (\n\t\t\t\t\t<TaskList\n\t\t\t\t\t\tdismissedTasks={ dismissedTasks || [] }\n\t\t\t\t\t\tisComplete={ isExtendedTaskListComplete }\n\t\t\t\t\t\tname={ 'extended_task_list' }\n\t\t\t\t\t\tquery={ query }\n\t\t\t\t\t\ttasks={ extensionTasks }\n\t\t\t\t\t\ttitle={ __( 'Extensions setup', 'woocommerce-admin' ) }\n\t\t\t\t\t\ttrackedCompletedTasks={ trackedCompletedTasks || [] }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t\t{ isCartModalOpen && (\n\t\t\t\t\t<CartModal\n\t\t\t\t\t\tonClose={ () => this.toggleCartModal() }\n\t\t\t\t\t\tonClickPurchaseLater={ () => this.toggleCartModal() }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst { getProfileItems, getTasksStatus } = select(\n\t\t\tONBOARDING_STORE_NAME\n\t\t);\n\t\tconst { getSettings } = select( SETTINGS_STORE_NAME );\n\t\tconst { getOption } = select( OPTIONS_STORE_NAME );\n\t\tconst {\n\t\t\tgetActivePlugins,\n\t\t\tgetInstalledPlugins,\n\t\t\tisJetpackConnected,\n\t\t} = select( PLUGINS_STORE_NAME );\n\t\tconst profileItems = getProfileItems();\n\n\t\tconst trackedCompletedTasks =\n\t\t\tgetOption( 'woocommerce_task_list_tracked_completed_tasks' ) || [];\n\n\t\tconst { general: generalSettings = {} } = getSettings( 'general' );\n\t\tconst countryCode = getCountryCode(\n\t\t\tgeneralSettings.woocommerce_default_country\n\t\t);\n\n\t\tconst activePlugins = getActivePlugins();\n\t\tconst installedPlugins = getInstalledPlugins();\n\t\tconst onboardingStatus = getTasksStatus();\n\n\t\treturn {\n\t\t\tactivePlugins,\n\t\t\tcountryCode,\n\t\t\tdismissedTasks: getOption(\n\t\t\t\t'woocommerce_task_list_dismissed_tasks'\n\t\t\t),\n\t\t\tisExtendedTaskListComplete:\n\t\t\t\tgetOption( 'woocommerce_extended_task_list_complete' ) ===\n\t\t\t\t'yes',\n\t\t\tisExtendedTaskListHidden:\n\t\t\t\tgetOption( 'woocommerce_extended_task_list_hidden' ) === 'yes',\n\t\t\tisJetpackConnected: isJetpackConnected(),\n\t\t\tisSetupTaskListHidden:\n\t\t\t\tgetOption( 'woocommerce_task_list_hidden' ) === 'yes',\n\t\t\tisTaskListComplete:\n\t\t\t\tgetOption( 'woocommerce_task_list_complete' ) === 'yes',\n\t\t\tinstalledPlugins,\n\t\t\tonboardingStatus,\n\t\t\tprofileItems,\n\t\t\ttrackedCompletedTasks,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { createNotice } = dispatch( 'core/notices' );\n\t\tconst { installAndActivatePlugins } = dispatch( PLUGINS_STORE_NAME );\n\n\t\treturn {\n\t\t\tcreateNotice,\n\t\t\tinstallAndActivatePlugins,\n\t\t};\n\t} )\n)( TaskDashboard );\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component, cloneElement } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport classNames from 'classnames';\nimport { Button, Card, CardBody, CardHeader } from '@wordpress/components';\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { Icon, check } from '@wordpress/icons';\nimport { List, EllipsisMenu, Badge } from '@woocommerce/components';\nimport { updateQueryString } from '@woocommerce/navigation';\nimport {\n\tPLUGINS_STORE_NAME,\n\tOPTIONS_STORE_NAME,\n\tONBOARDING_STORE_NAME,\n\tSETTINGS_STORE_NAME,\n} from '@woocommerce/data';\nimport { recordEvent } from '@woocommerce/tracks';\nimport { Text } from '@woocommerce/experimental';\n\n/**\n * Internal dependencies\n */\nimport { recordTaskViewEvent } from './tasks';\nimport { getCountryCode } from '../dashboard/utils';\nimport sanitizeHTML from '../lib/sanitize-html';\n\nexport class TaskList extends Component {\n\tcomponentDidMount() {\n\t\tthis.recordTaskView();\n\t\tthis.recordTaskListView();\n\t\tthis.possiblyCompleteTaskList();\n\t\tthis.possiblyTrackCompletedTasks();\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tconst { query } = this.props;\n\t\tconst { query: prevQuery } = prevProps;\n\t\tconst { task: prevTask } = prevQuery;\n\t\tconst { task } = query;\n\n\t\tif ( prevTask !== task ) {\n\t\t\twindow.document.documentElement.scrollTop = 0;\n\t\t\tthis.recordTaskView();\n\t\t}\n\n\t\tthis.possiblyCompleteTaskList();\n\t\tthis.possiblyTrackCompletedTasks();\n\t}\n\n\tpossiblyCompleteTaskList() {\n\t\tconst { isComplete, name = 'task_list', updateOptions } = this.props;\n\t\tconst taskListVariableName = `woocommerce_${ name }_complete`;\n\t\tconst taskListToComplete = isComplete\n\t\t\t? { [ taskListVariableName ]: 'no' }\n\t\t\t: { [ taskListVariableName ]: 'yes' };\n\t\tif ( name === 'task_list' ) {\n\t\t\ttaskListToComplete.woocommerce_default_homepage_layout =\n\t\t\t\t'two_columns';\n\t\t}\n\n\t\tif (\n\t\t\t( ! this.getIncompleteTasks().length && ! isComplete ) ||\n\t\t\t( this.getIncompleteTasks().length && isComplete )\n\t\t) {\n\t\t\tupdateOptions( {\n\t\t\t\t...taskListToComplete,\n\t\t\t} );\n\t\t}\n\t}\n\n\tgetCompletedTaskKeys() {\n\t\treturn this.getVisibleTasks()\n\t\t\t.filter( ( task ) => task.completed )\n\t\t\t.map( ( task ) => task.key );\n\t}\n\n\tgetIncompleteTasks() {\n\t\tconst { dismissedTasks, tasks } = this.props;\n\t\treturn tasks.filter(\n\t\t\t( task ) =>\n\t\t\t\ttask.visible &&\n\t\t\t\t! task.completed &&\n\t\t\t\t! dismissedTasks.includes( task.key )\n\t\t);\n\t}\n\n\tshouldUpdateCompletedTasks( tasks, untrackedTasks, completedTasks ) {\n\t\tif ( untrackedTasks.length > 0 ) {\n\t\t\treturn true;\n\t\t}\n\t\tif ( completedTasks.length === 0 ) {\n\t\t\treturn false;\n\t\t}\n\t\treturn ! completedTasks.every(\n\t\t\t( taskName ) => tasks.indexOf( taskName ) >= 0\n\t\t);\n\t}\n\n\tgetTrackedCompletedTasks( completedTasks, trackedTasks ) {\n\t\tif ( ! trackedTasks ) {\n\t\t\treturn [];\n\t\t}\n\t\treturn completedTasks.filter( ( taskName ) =>\n\t\t\ttrackedTasks.includes( taskName )\n\t\t);\n\t}\n\n\tgetTrackedIncompletedTasks( partialCompletedTasks, allTrackedTask ) {\n\t\treturn this.getVisibleTasks()\n\t\t\t.filter(\n\t\t\t\t( task ) =>\n\t\t\t\t\tallTrackedTask.includes( task.key ) &&\n\t\t\t\t\t! partialCompletedTasks.includes( task.key )\n\t\t\t)\n\t\t\t.map( ( task ) => task.key );\n\t}\n\n\tgetTasksForUpdate(\n\t\tcompletedTaskKeys,\n\t\ttotalTrackedCompletedTasks,\n\t\ttrackedIncompleteTasks\n\t) {\n\t\tconst mergedLists = [\n\t\t\t...new Set( [\n\t\t\t\t...completedTaskKeys,\n\t\t\t\t...totalTrackedCompletedTasks,\n\t\t\t] ),\n\t\t];\n\t\treturn mergedLists.filter(\n\t\t\t( taskName ) => ! trackedIncompleteTasks.includes( taskName )\n\t\t);\n\t}\n\n\tpossiblyTrackCompletedTasks() {\n\t\tconst {\n\t\t\ttrackedCompletedTasks: totalTrackedCompletedTasks,\n\t\t\tupdateOptions,\n\t\t} = this.props;\n\t\tconst completedTaskKeys = this.getCompletedTaskKeys();\n\t\tconst trackedCompletedTasks = this.getTrackedCompletedTasks(\n\t\t\tcompletedTaskKeys,\n\t\t\ttotalTrackedCompletedTasks\n\t\t);\n\n\t\tconst trackedIncompleteTasks = this.getTrackedIncompletedTasks(\n\t\t\ttrackedCompletedTasks,\n\t\t\ttotalTrackedCompletedTasks\n\t\t);\n\n\t\tif (\n\t\t\tthis.shouldUpdateCompletedTasks(\n\t\t\t\ttrackedCompletedTasks,\n\t\t\t\ttrackedIncompleteTasks,\n\t\t\t\tcompletedTaskKeys\n\t\t\t)\n\t\t) {\n\t\t\tupdateOptions( {\n\t\t\t\twoocommerce_task_list_tracked_completed_tasks: this.getTasksForUpdate(\n\t\t\t\t\tcompletedTaskKeys,\n\t\t\t\t\ttotalTrackedCompletedTasks,\n\t\t\t\t\ttrackedIncompleteTasks\n\t\t\t\t),\n\t\t\t} );\n\t\t}\n\t}\n\n\tdismissTask( { key, onDismiss } ) {\n\t\tconst { createNotice, dismissedTasks, updateOptions } = this.props;\n\n\t\tcreateNotice( 'success', __( 'Task dismissed' ), {\n\t\t\tactions: [\n\t\t\t\t{\n\t\t\t\t\tlabel: __( 'Undo', 'woocommerce-admin' ),\n\t\t\t\t\tonClick: () => this.undoDismissTask( key ),\n\t\t\t\t},\n\t\t\t],\n\t\t} );\n\n\t\trecordEvent( 'tasklist_dismiss_task', { task_name: key } );\n\n\t\tupdateOptions( {\n\t\t\twoocommerce_task_list_dismissed_tasks: [ ...dismissedTasks, key ],\n\t\t} );\n\t\tif ( onDismiss ) {\n\t\t\tonDismiss();\n\t\t}\n\t}\n\n\tundoDismissTask( key ) {\n\t\tconst { dismissedTasks, updateOptions } = this.props;\n\n\t\tconst updatedDismissedTasks = dismissedTasks.filter(\n\t\t\t( task ) => task !== key\n\t\t);\n\n\t\tupdateOptions( {\n\t\t\twoocommerce_task_list_dismissed_tasks: updatedDismissedTasks,\n\t\t} );\n\t}\n\n\tgetVisibleTasks() {\n\t\tconst { dismissedTasks, tasks } = this.props;\n\t\treturn tasks.filter(\n\t\t\t( task ) => task.visible && ! dismissedTasks.includes( task.key )\n\t\t);\n\t}\n\n\trecordTaskView() {\n\t\tconst {\n\t\t\tisJetpackConnected,\n\t\t\tactivePlugins,\n\t\t\tinstalledPlugins,\n\t\t\tquery,\n\t\t} = this.props;\n\t\tconst { task: taskName } = query;\n\n\t\tif ( ! taskName ) {\n\t\t\treturn;\n\t\t}\n\n\t\trecordTaskViewEvent(\n\t\t\ttaskName,\n\t\t\tisJetpackConnected,\n\t\t\tactivePlugins,\n\t\t\tinstalledPlugins\n\t\t);\n\t}\n\n\trecordTaskListView() {\n\t\tif ( this.getCurrentTask() ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { profileItems } = this.props;\n\t\tconst tasks = this.getVisibleTasks();\n\n\t\trecordEvent( 'tasklist_view', {\n\t\t\tnumber_tasks: tasks.length,\n\t\t\tstore_connected: profileItems.wccom_connected,\n\t\t} );\n\t}\n\n\thideTaskCard( action ) {\n\t\tconst { name = 'task_list', updateOptions } = this.props;\n\t\tconst isCoreTaskList = name === 'task_list';\n\t\tconst taskListName = isCoreTaskList ? 'tasklist' : 'extended_tasklist';\n\t\tconst updateOptionsParams = {\n\t\t\t[ `woocommerce_${ name }_hidden` ]: 'yes',\n\t\t};\n\t\tif ( isCoreTaskList ) {\n\t\t\tupdateOptionsParams.woocommerce_task_list_prompt_shown = true;\n\t\t\tupdateOptionsParams.woocommerce_default_homepage_layout =\n\t\t\t\t'two_columns';\n\t\t}\n\n\t\trecordEvent( `${ taskListName }_completed`, {\n\t\t\taction,\n\t\t\tcompleted_task_count: this.getCompletedTaskKeys().length,\n\t\t\tincomplete_task_count: this.getIncompleteTasks().length,\n\t\t} );\n\t\tupdateOptions( {\n\t\t\t...updateOptionsParams,\n\t\t} );\n\t}\n\n\tgetCurrentTask() {\n\t\tconst { query, tasks } = this.props;\n\t\tconst { task } = query;\n\t\tconst currentTask = tasks.find( ( s ) => s.key === task );\n\n\t\tif ( ! currentTask ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn currentTask;\n\t}\n\n\trenderMenu() {\n\t\treturn (\n\t\t\t<div className=\"woocommerce-card__menu woocommerce-card__header-item\">\n\t\t\t\t<EllipsisMenu\n\t\t\t\t\tlabel={ __( 'Task List Options', 'woocommerce-admin' ) }\n\t\t\t\t\trenderContent={ () => (\n\t\t\t\t\t\t<div className=\"woocommerce-task-card__section-controls\">\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\t\t\tthis.hideTaskCard( 'remove_card' )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ __( 'Hide this', 'woocommerce-admin' ) }\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) }\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst { name, query, title: listTitle } = this.props;\n\t\tconst { task: theTask } = query;\n\t\tconst currentTask = this.getCurrentTask();\n\n\t\tif ( theTask && ! currentTask ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst listTasks = this.getVisibleTasks().map( ( task ) => {\n\t\t\ttask.className = classNames(\n\t\t\t\ttask.completed ? 'is-complete' : null,\n\t\t\t\ttask.className\n\t\t\t);\n\t\t\ttask.before = (\n\t\t\t\t<div className=\"woocommerce-task__icon\">\n\t\t\t\t\t{ task.completed && <Icon icon={ check } /> }\n\t\t\t\t</div>\n\t\t\t);\n\n\t\t\ttask.title = (\n\t\t\t\t<Text\n\t\t\t\t\tas=\"div\"\n\t\t\t\t\tvariant={ task.completed ? 'body.small' : 'button' }\n\t\t\t\t>\n\t\t\t\t\t{ task.title }\n\t\t\t\t\t{ task.additionalInfo && (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"woocommerce-task__additional-info\"\n\t\t\t\t\t\t\tdangerouslySetInnerHTML={ sanitizeHTML(\n\t\t\t\t\t\t\t\ttask.additionalInfo\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t></div>\n\t\t\t\t\t) }\n\t\t\t\t\t{ task.time && ! task.completed && (\n\t\t\t\t\t\t<div className=\"woocommerce-task__estimated-time\">\n\t\t\t\t\t\t\t{ task.time }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) }\n\t\t\t\t</Text>\n\t\t\t);\n\n\t\t\tif ( ! task.completed && task.isDismissable ) {\n\t\t\t\ttask.after = (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tdata-testid={ `${ task.key }-dismiss-button` }\n\t\t\t\t\t\tisTertiary\n\t\t\t\t\t\tonClick={ ( event ) => {\n\t\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t\t\tthis.dismissTask( task );\n\t\t\t\t\t\t} }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Dismiss', 'woocommerce-admin' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif ( ! task.onClick ) {\n\t\t\t\ttask.onClick = ( e ) => {\n\t\t\t\t\tif ( e.target.nodeName === 'A' ) {\n\t\t\t\t\t\t// This is a nested link, so don't activate this task.\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tupdateQueryString( { task: task.key } );\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn task;\n\t\t} );\n\n\t\tif ( ! listTasks.length ) {\n\t\t\treturn (\n\t\t\t\t<div className=\"woocommerce-task-dashboard__container\"></div>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div className=\"woocommerce-task-dashboard__container\">\n\t\t\t\t\t{ currentTask ? (\n\t\t\t\t\t\tcloneElement( currentTask.container, {\n\t\t\t\t\t\t\tquery,\n\t\t\t\t\t\t} )\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<Card\n\t\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\t\tclassName=\"woocommerce-task-card woocommerce-homescreen-card\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<CardHeader size=\"medium\">\n\t\t\t\t\t\t\t\t\t<div className=\"wooocommerce-task-card__header\">\n\t\t\t\t\t\t\t\t\t\t<Text variant=\"title.small\">\n\t\t\t\t\t\t\t\t\t\t\t{ listTitle }\n\t\t\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\t\t\t\t\tcount={\n\t\t\t\t\t\t\t\t\t\t\t\tthis.getIncompleteTasks().length\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{ this.renderMenu( ! name ) }\n\t\t\t\t\t\t\t\t</CardHeader>\n\t\t\t\t\t\t\t\t<CardBody>\n\t\t\t\t\t\t\t\t\t<List items={ listTasks } />\n\t\t\t\t\t\t\t\t</CardBody>\n\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t</>\n\t\t\t\t\t) }\n\t\t\t\t</div>\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst { getProfileItems, getTasksStatus } = select(\n\t\t\tONBOARDING_STORE_NAME\n\t\t);\n\t\tconst { getSettings } = select( SETTINGS_STORE_NAME );\n\t\tconst {\n\t\t\tgetActivePlugins,\n\t\t\tgetInstalledPlugins,\n\t\t\tisJetpackConnected,\n\t\t} = select( PLUGINS_STORE_NAME );\n\t\tconst profileItems = getProfileItems();\n\t\tconst { general: generalSettings = {} } = getSettings( 'general' );\n\t\tconst countryCode = getCountryCode(\n\t\t\tgeneralSettings.woocommerce_default_country\n\t\t);\n\n\t\tconst activePlugins = getActivePlugins();\n\t\tconst installedPlugins = getInstalledPlugins();\n\t\tconst onboardingStatus = getTasksStatus();\n\n\t\treturn {\n\t\t\tactivePlugins,\n\t\t\tcountryCode,\n\t\t\tisJetpackConnected: isJetpackConnected(),\n\t\t\tinstalledPlugins,\n\t\t\tonboardingStatus,\n\t\t\tprofileItems,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { createNotice } = dispatch( 'core/notices' );\n\t\tconst { updateOptions } = dispatch( OPTIONS_STORE_NAME );\n\t\tconst { installAndActivatePlugins } = dispatch( PLUGINS_STORE_NAME );\n\n\t\treturn {\n\t\t\tcreateNotice,\n\t\t\tinstallAndActivatePlugins,\n\t\t\tupdateOptions,\n\t\t};\n\t} )\n)( TaskList );\n","/**\n * External dependencies\n */\n\nimport { __, sprintf } from '@wordpress/i18n';\nimport { applyFilters } from '@wordpress/hooks';\nimport {\n\tgetHistory,\n\tgetNewPath,\n\tupdateQueryString,\n} from '@woocommerce/navigation';\nimport { Fragment } from '@wordpress/element';\nimport { recordEvent } from '@woocommerce/tracks';\n\n/**\n * Internal dependencies\n */\nimport Appearance from './tasks/appearance';\nimport { getCategorizedOnboardingProducts } from '../dashboard/utils';\nimport { Products } from './tasks/products';\nimport Shipping from './tasks/shipping';\nimport Tax from './tasks/tax';\nimport Payments from './tasks/payments';\nimport { installActivateAndConnectWcpay } from './tasks/payments/methods';\nimport { groupListOfObjectsBy } from '../lib/collections';\n\nexport function recordTaskViewEvent(\n\ttaskName,\n\tisJetpackConnected,\n\tactivePlugins,\n\tinstalledPlugins\n) {\n\trecordEvent( 'task_view', {\n\t\ttask_name: taskName,\n\t\twcs_installed: installedPlugins.includes( 'woocommerce-services' ),\n\t\twcs_active: activePlugins.includes( 'woocommerce-services' ),\n\t\tjetpack_installed: installedPlugins.includes( 'jetpack' ),\n\t\tjetpack_active: activePlugins.includes( 'jetpack' ),\n\t\tjetpack_connected: isJetpackConnected,\n\t} );\n}\n\nexport function getAllTasks( {\n\tactivePlugins,\n\tcountryCode,\n\tcreateNotice,\n\tinstallAndActivatePlugins,\n\tinstalledPlugins,\n\tisJetpackConnected,\n\tonboardingStatus,\n\tprofileItems,\n\tquery,\n\ttoggleCartModal,\n\tonTaskSelect,\n} ) {\n\tconst {\n\t\thasPaymentGateway,\n\t\thasPhysicalProducts,\n\t\thasProducts,\n\t\tisAppearanceComplete,\n\t\tisTaxComplete,\n\t\tshippingZonesCount,\n\t\twcPayIsConnected,\n\t} = {\n\t\thasPaymentGateway: false,\n\t\thasPhysicalProducts: false,\n\t\thasProducts: false,\n\t\tisAppearanceComplete: false,\n\t\tisTaxComplete: false,\n\t\tshippingZonesCount: 0,\n\t\twcPayIsConnected: false,\n\t\t...onboardingStatus,\n\t};\n\n\tconst groupedProducts = getCategorizedOnboardingProducts(\n\t\tprofileItems,\n\t\tinstalledPlugins\n\t);\n\tconst { products, remainingProducts, uniqueItemsList } = groupedProducts;\n\n\tconst woocommercePaymentsInstalled =\n\t\tinstalledPlugins.indexOf( 'woocommerce-payments' ) !== -1;\n\tconst {\n\t\tcompleted: profilerCompleted,\n\t\tproduct_types: productTypes,\n\t} = profileItems;\n\n\tlet purchaseAndInstallText = __(\n\t\t'Add paid extensions to your store',\n\t\t'woocommerce-admin'\n\t);\n\n\tif ( uniqueItemsList.length === 1 ) {\n\t\tconst { name: itemName } = uniqueItemsList[ 0 ];\n\t\tconst purchaseAndInstallFormat = __(\n\t\t\t'Add %s to your store',\n\t\t\t'woocommerce-admin'\n\t\t);\n\t\tpurchaseAndInstallText = sprintf( purchaseAndInstallFormat, itemName );\n\t}\n\n\tconst tasks = [\n\t\t{\n\t\t\tkey: 'store_details',\n\t\t\ttitle: __( 'Store details', 'woocommerce-admin' ),\n\t\t\tcontainer: null,\n\t\t\tonClick: () => {\n\t\t\t\tonTaskSelect( 'store_details' );\n\t\t\t\tgetHistory().push( getNewPath( {}, '/setup-wizard', {} ) );\n\t\t\t},\n\t\t\tcompleted: profilerCompleted,\n\t\t\tvisible: true,\n\t\t\ttime: __( '4 minutes', 'woocommerce-admin' ),\n\t\t\ttype: 'setup',\n\t\t},\n\t\t{\n\t\t\tkey: 'purchase',\n\t\t\ttitle: purchaseAndInstallText,\n\t\t\tcontainer: null,\n\t\t\tonClick: () => {\n\t\t\t\tonTaskSelect( 'purchase' );\n\t\t\t\treturn remainingProducts.length ? toggleCartModal() : null;\n\t\t\t},\n\t\t\tvisible: products.length,\n\t\t\tcompleted: products.length && ! remainingProducts.length,\n\t\t\ttime: __( '2 minutes', 'woocommerce-admin' ),\n\t\t\tisDismissable: true,\n\t\t\ttype: 'setup',\n\t\t},\n\t\t{\n\t\t\tkey: 'products',\n\t\t\ttitle: __( 'Add products', 'woocommerce-admin' ),\n\t\t\tcontainer: <Products />,\n\t\t\tonClick: () => {\n\t\t\t\tonTaskSelect( 'products' );\n\t\t\t\tupdateQueryString( { task: 'products' } );\n\t\t\t},\n\t\t\tcompleted: hasProducts,\n\t\t\tvisible: true,\n\t\t\ttime: __( '1 minute per product', 'woocommerce-admin' ),\n\t\t\ttype: 'setup',\n\t\t},\n\t\t{\n\t\t\tkey: 'woocommerce-payments',\n\t\t\ttitle: __( 'Set up WooCommerce Payments', 'woocommerce-admin' ),\n\t\t\tcontainer: <Fragment />,\n\t\t\tcompleted: wcPayIsConnected,\n\t\t\tonClick: async ( e ) => {\n\t\t\t\tif ( e.target.nodeName === 'A' ) {\n\t\t\t\t\t// This is a nested link, so don't activate the task.\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tawait new Promise( ( resolve, reject ) => {\n\t\t\t\t\t// This task doesn't have a view, so the recordEvent call\n\t\t\t\t\t// in TaskDashboard.recordTaskView() is never called. So\n\t\t\t\t\t// record it here.\n\t\t\t\t\trecordTaskViewEvent(\n\t\t\t\t\t\t'wcpay',\n\t\t\t\t\t\tisJetpackConnected,\n\t\t\t\t\t\tactivePlugins,\n\t\t\t\t\t\tinstalledPlugins\n\t\t\t\t\t);\n\t\t\t\t\tonTaskSelect( 'woocommerce-payments' );\n\t\t\t\t\treturn installActivateAndConnectWcpay(\n\t\t\t\t\t\tresolve,\n\t\t\t\t\t\treject,\n\t\t\t\t\t\tcreateNotice,\n\t\t\t\t\t\tinstallAndActivatePlugins\n\t\t\t\t\t);\n\t\t\t\t} );\n\t\t\t},\n\t\t\tvisible:\n\t\t\t\twindow.wcAdminFeatures.wcpay &&\n\t\t\t\twoocommercePaymentsInstalled &&\n\t\t\t\tcountryCode === 'US',\n\t\t\tadditionalInfo: __(\n\t\t\t\t'By setting up, you are agreeing to the <a href=\"https://wordpress.com/tos/\" target=\"_blank\">Terms of Service</a>',\n\t\t\t\t'woocommerce-admin'\n\t\t\t),\n\t\t\ttime: __( '2 minutes', 'woocommerce-admin' ),\n\t\t\ttype: 'setup',\n\t\t},\n\t\t{\n\t\t\tkey: 'payments',\n\t\t\ttitle: __( 'Choose payment methods', 'woocommerce-admin' ),\n\t\t\tcontainer: <Payments />,\n\t\t\tcompleted: hasPaymentGateway,\n\t\t\tonClick: () => {\n\t\t\t\tonTaskSelect( 'payments' );\n\t\t\t\tupdateQueryString( { task: 'payments' } );\n\t\t\t},\n\t\t\tvisible: ! woocommercePaymentsInstalled || countryCode !== 'US',\n\t\t\ttime: __( '2 minutes', 'woocommerce-admin' ),\n\t\t\ttype: 'setup',\n\t\t},\n\t\t{\n\t\t\tkey: 'tax',\n\t\t\ttitle: __( 'Add tax rates', 'woocommerce-admin' ),\n\t\t\tcontainer: <Tax />,\n\t\t\tonClick: () => {\n\t\t\t\tonTaskSelect( 'tax' );\n\t\t\t\tupdateQueryString( { task: 'tax' } );\n\t\t\t},\n\t\t\tcompleted: isTaxComplete,\n\t\t\tvisible: true,\n\t\t\ttime: __( '1 minute', 'woocommerce-admin' ),\n\t\t\ttype: 'setup',\n\t\t},\n\t\t{\n\t\t\tkey: 'shipping',\n\t\t\ttitle: __( 'Set up shipping costs', 'woocommerce-admin' ),\n\t\t\tcontainer: <Shipping />,\n\t\t\tonClick: () => {\n\t\t\t\tonTaskSelect( 'shipping' );\n\t\t\t\tupdateQueryString( { task: 'shipping' } );\n\t\t\t},\n\t\t\tcompleted: shippingZonesCount > 0,\n\t\t\tvisible:\n\t\t\t\t( productTypes && productTypes.includes( 'physical' ) ) ||\n\t\t\t\thasPhysicalProducts,\n\t\t\ttime: __( '1 minute', 'woocommerce-admin' ),\n\t\t\ttype: 'setup',\n\t\t},\n\t\t{\n\t\t\tkey: 'appearance',\n\t\t\ttitle: __( 'Personalize your store', 'woocommerce-admin' ),\n\t\t\tcontainer: <Appearance />,\n\t\t\tonClick: () => {\n\t\t\t\tonTaskSelect( 'appearance' );\n\t\t\t\tupdateQueryString( { task: 'appearance' } );\n\t\t\t},\n\t\t\tcompleted: isAppearanceComplete,\n\t\t\tvisible: true,\n\t\t\ttime: __( '2 minutes', 'woocommerce-admin' ),\n\t\t\ttype: 'setup',\n\t\t},\n\t];\n\treturn groupListOfObjectsBy(\n\t\tapplyFilters( 'woocommerce_admin_onboarding_task_list', tasks, query ),\n\t\t'type',\n\t\t'extension'\n\t);\n}\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport apiFetch from '@wordpress/api-fetch';\nimport { Button, Card, CardBody } from '@wordpress/components';\nimport { Component, Fragment } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport { filter } from 'lodash';\nimport { withDispatch, withSelect } from '@wordpress/data';\n\nimport { Stepper, TextControl, ImageUpload } from '@woocommerce/components';\nimport { getHistory, getNewPath } from '@woocommerce/navigation';\nimport {\n\tOPTIONS_STORE_NAME,\n\tONBOARDING_STORE_NAME,\n\tWC_ADMIN_NAMESPACE,\n} from '@woocommerce/data';\nimport { queueRecordEvent, recordEvent } from '@woocommerce/tracks';\n\n/**\n * Internal dependencies\n */\nclass Appearance extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tconst { hasHomepage, hasProducts } = props.tasksStatus;\n\n\t\tthis.stepVisibility = {\n\t\t\thomepage: ! hasHomepage,\n\t\t\timport: ! hasProducts,\n\t\t};\n\n\t\tthis.state = {\n\t\t\tisDirty: false,\n\t\t\tisPending: false,\n\t\t\tlogo: null,\n\t\t\tstepIndex: 0,\n\t\t\tisUpdatingLogo: false,\n\t\t\tisUpdatingNotice: false,\n\t\t\tstoreNoticeText: props.demoStoreNotice || '',\n\t\t};\n\n\t\tthis.completeStep = this.completeStep.bind( this );\n\t\tthis.createHomepage = this.createHomepage.bind( this );\n\t\tthis.importProducts = this.importProducts.bind( this );\n\t\tthis.updateLogo = this.updateLogo.bind( this );\n\t\tthis.updateNotice = this.updateNotice.bind( this );\n\t}\n\n\tcomponentDidMount() {\n\t\tconst { themeMods } = this.props.tasksStatus;\n\n\t\tif ( themeMods && themeMods.custom_logo ) {\n\t\t\t/* eslint-disable react/no-did-mount-set-state */\n\t\t\tthis.setState( { logo: { id: themeMods.custom_logo } } );\n\t\t\t/* eslint-enable react/no-did-mount-set-state */\n\t\t}\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tconst { isPending, logo } = this.state;\n\t\tconst { demoStoreNotice } = this.props;\n\n\t\tif ( logo && ! logo.url && ! isPending ) {\n\t\t\t/* eslint-disable react/no-did-update-set-state */\n\t\t\tthis.setState( { isPending: true } );\n\t\t\twp.media\n\t\t\t\t.attachment( logo.id )\n\t\t\t\t.fetch()\n\t\t\t\t.then( () => {\n\t\t\t\t\tconst logoUrl = wp.media.attachment( logo.id ).get( 'url' );\n\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\tisPending: false,\n\t\t\t\t\t\tlogo: { id: logo.id, url: logoUrl },\n\t\t\t\t\t} );\n\t\t\t\t} );\n\t\t\t/* eslint-enable react/no-did-update-set-state */\n\t\t}\n\n\t\tif (\n\t\t\tdemoStoreNotice &&\n\t\t\tprevProps.demoStoreNotice !== demoStoreNotice\n\t\t) {\n\t\t\t/* eslint-disable react/no-did-update-set-state */\n\t\t\tthis.setState( {\n\t\t\t\tstoreNoticeText: demoStoreNotice,\n\t\t\t} );\n\t\t\t/* eslint-enable react/no-did-update-set-state */\n\t\t}\n\t}\n\n\tcompleteStep() {\n\t\tconst { stepIndex } = this.state;\n\t\tconst nextStep = this.getSteps()[ stepIndex + 1 ];\n\n\t\tif ( nextStep ) {\n\t\t\tthis.setState( { stepIndex: stepIndex + 1 } );\n\t\t} else {\n\t\t\tgetHistory().push( getNewPath( {}, '/', {} ) );\n\t\t}\n\t}\n\n\timportProducts() {\n\t\tconst { clearTaskStatusCache, createNotice } = this.props;\n\t\tthis.setState( { isPending: true } );\n\n\t\trecordEvent( 'tasklist_appearance_import_demo', {} );\n\n\t\tapiFetch( {\n\t\t\tpath: `${ WC_ADMIN_NAMESPACE }/onboarding/tasks/import_sample_products`,\n\t\t\tmethod: 'POST',\n\t\t} )\n\t\t\t.then( ( result ) => {\n\t\t\t\tif ( result.failed && result.failed.length ) {\n\t\t\t\t\tcreateNotice(\n\t\t\t\t\t\t'error',\n\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t'There was an error importing some of the sample products',\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tcreateNotice(\n\t\t\t\t\t\t'success',\n\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t'All sample products have been imported',\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t\tclearTaskStatusCache();\n\t\t\t\t}\n\n\t\t\t\tthis.setState( { isPending: false } );\n\t\t\t\tthis.completeStep();\n\t\t\t} )\n\t\t\t.catch( ( error ) => {\n\t\t\t\tcreateNotice( 'error', error.message );\n\t\t\t\tthis.setState( { isPending: false } );\n\t\t\t} );\n\t}\n\n\tcreateHomepage() {\n\t\tconst { clearTaskStatusCache, createNotice } = this.props;\n\t\tthis.setState( { isPending: true } );\n\n\t\trecordEvent( 'tasklist_appearance_create_homepage', {\n\t\t\tcreate_homepage: true,\n\t\t} );\n\n\t\tapiFetch( {\n\t\t\tpath: '/wc-admin/onboarding/tasks/create_homepage',\n\t\t\tmethod: 'POST',\n\t\t} )\n\t\t\t.then( ( response ) => {\n\t\t\t\tclearTaskStatusCache();\n\t\t\t\tcreateNotice( response.status, response.message, {\n\t\t\t\t\tactions: response.edit_post_link\n\t\t\t\t\t\t? [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tlabel: __(\n\t\t\t\t\t\t\t\t\t\t'Customize',\n\t\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\t\t\tqueueRecordEvent(\n\t\t\t\t\t\t\t\t\t\t\t'tasklist_appearance_customize_homepage',\n\t\t\t\t\t\t\t\t\t\t\t{}\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\twindow.location = `${ response.edit_post_link }&wc_onboarding_active_task=homepage`;\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t  ]\n\t\t\t\t\t\t: null,\n\t\t\t\t} );\n\n\t\t\t\tthis.setState( { isPending: false } );\n\t\t\t\tthis.completeStep();\n\t\t\t} )\n\t\t\t.catch( ( error ) => {\n\t\t\t\tcreateNotice( 'error', error.message );\n\t\t\t\tthis.setState( { isPending: false } );\n\t\t\t} );\n\t}\n\n\tasync updateLogo() {\n\t\tconst {\n\t\t\tclearTaskStatusCache,\n\t\t\tcreateNotice,\n\t\t\tstylesheet,\n\t\t\tthemeMods,\n\t\t\tupdateOptions,\n\t\t} = this.props;\n\t\tconst { logo } = this.state;\n\t\tconst updatedThemeMods = {\n\t\t\t...themeMods,\n\t\t\tcustom_logo: logo ? logo.id : null,\n\t\t};\n\n\t\trecordEvent( 'tasklist_appearance_upload_logo' );\n\n\t\tthis.setState( { isUpdatingLogo: true } );\n\t\tconst update = await updateOptions( {\n\t\t\t[ `theme_mods_${ stylesheet }` ]: updatedThemeMods,\n\t\t} );\n\n\t\tclearTaskStatusCache();\n\n\t\tif ( update.success ) {\n\t\t\tthis.setState( { isUpdatingLogo: false } );\n\t\t\tcreateNotice(\n\t\t\t\t'success',\n\t\t\t\t__( 'Store logo updated sucessfully', 'woocommerce-admin' )\n\t\t\t);\n\t\t\tthis.completeStep();\n\t\t} else {\n\t\t\tcreateNotice( 'error', update.message );\n\t\t}\n\t}\n\n\tasync updateNotice() {\n\t\tconst {\n\t\t\tclearTaskStatusCache,\n\t\t\tcreateNotice,\n\t\t\tupdateOptions,\n\t\t} = this.props;\n\t\tconst { storeNoticeText } = this.state;\n\n\t\trecordEvent( 'tasklist_appearance_set_store_notice', {\n\t\t\tadded_text: Boolean( storeNoticeText.length ),\n\t\t} );\n\n\t\tthis.setState( { isUpdatingNotice: true } );\n\t\tconst update = await updateOptions( {\n\t\t\twoocommerce_task_list_appearance_complete: true,\n\t\t\twoocommerce_demo_store: storeNoticeText.length ? 'yes' : 'no',\n\t\t\twoocommerce_demo_store_notice: storeNoticeText,\n\t\t} );\n\n\t\tclearTaskStatusCache();\n\n\t\tif ( update.success ) {\n\t\t\tthis.setState( { isUpdatingNotice: false } );\n\t\t\tcreateNotice(\n\t\t\t\t'success',\n\t\t\t\t__(\n\t\t\t\t\t\" Your store is looking great! Don't forget to continue personalizing it\",\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t)\n\t\t\t);\n\t\t\tthis.completeStep();\n\t\t} else {\n\t\t\tcreateNotice( 'error', update.message );\n\t\t}\n\t}\n\n\tgetSteps() {\n\t\tconst {\n\t\t\tisDirty,\n\t\t\tisPending,\n\t\t\tlogo,\n\t\t\tstoreNoticeText,\n\t\t\tisUpdatingLogo,\n\t\t} = this.state;\n\n\t\tconst steps = [\n\t\t\t{\n\t\t\t\tkey: 'import',\n\t\t\t\tlabel: __( 'Import sample products', 'woocommerce-admin' ),\n\t\t\t\tdescription: __(\n\t\t\t\t\t'Well add some products that will make it easier to see what your store looks like',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tcontent: (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={ this.importProducts }\n\t\t\t\t\t\t\tisBusy={ isPending }\n\t\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Import products', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button onClick={ () => this.completeStep() }>\n\t\t\t\t\t\t\t{ __( 'Skip', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Fragment>\n\t\t\t\t),\n\t\t\t\tvisible: this.stepVisibility.import,\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'homepage',\n\t\t\t\tlabel: __( 'Create a custom homepage', 'woocommerce-admin' ),\n\t\t\t\tdescription: __(\n\t\t\t\t\t'Create a new homepage and customize it to suit your needs',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tcontent: (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\t\tisBusy={ isPending }\n\t\t\t\t\t\t\tonClick={ this.createHomepage }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Create homepage', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tisTertiary\n\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t\t\t\t'tasklist_appearance_create_homepage',\n\t\t\t\t\t\t\t\t\t{ create_homepage: false }\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tthis.completeStep();\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Skip', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Fragment>\n\t\t\t\t),\n\t\t\t\tvisible: this.stepVisibility.homepage,\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'logo',\n\t\t\t\tlabel: __( 'Upload a logo', 'woocommerce-admin' ),\n\t\t\t\tdescription: __(\n\t\t\t\t\t'Ensure your store is on-brand by adding your logo',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tcontent: isPending ? null : (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<ImageUpload\n\t\t\t\t\t\t\timage={ logo }\n\t\t\t\t\t\t\tonChange={ ( image ) =>\n\t\t\t\t\t\t\t\tthis.setState( { isDirty: true, logo: image } )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tdisabled={ ! logo && ! isDirty }\n\t\t\t\t\t\t\tonClick={ this.updateLogo }\n\t\t\t\t\t\t\tisBusy={ isUpdatingLogo }\n\t\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Proceed', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tisTertiary\n\t\t\t\t\t\t\tonClick={ () => this.completeStep() }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Skip', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Fragment>\n\t\t\t\t),\n\t\t\t\tvisible: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'notice',\n\t\t\t\tlabel: __( 'Set a store notice', 'woocommerce-admin' ),\n\t\t\t\tdescription: __(\n\t\t\t\t\t'Optionally display a prominent notice across all pages of your store',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tcontent: (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\tlabel={ __(\n\t\t\t\t\t\t\t\t'Store notice text',\n\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\tplaceholder={ __(\n\t\t\t\t\t\t\t\t'Store notice text',\n\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\tvalue={ storeNoticeText }\n\t\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\t\tthis.setState( { storeNoticeText: value } )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Button onClick={ this.updateNotice } isPrimary>\n\t\t\t\t\t\t\t{ __( 'Complete task', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Fragment>\n\t\t\t\t),\n\t\t\t\tvisible: true,\n\t\t\t},\n\t\t];\n\n\t\treturn filter( steps, ( step ) => step.visible );\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tisPending,\n\t\t\tstepIndex,\n\t\t\tisUpdatingLogo,\n\t\t\tisUpdatingNotice,\n\t\t} = this.state;\n\t\tconst currentStep = this.getSteps()[ stepIndex ].key;\n\n\t\treturn (\n\t\t\t<div className=\"woocommerce-task-appearance\">\n\t\t\t\t<Card className=\"woocommerce-task-card\">\n\t\t\t\t\t<CardBody>\n\t\t\t\t\t\t<Stepper\n\t\t\t\t\t\t\tisPending={\n\t\t\t\t\t\t\t\tisUpdatingNotice || isUpdatingLogo || isPending\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tisVertical\n\t\t\t\t\t\t\tcurrentStep={ currentStep }\n\t\t\t\t\t\t\tsteps={ this.getSteps() }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</CardBody>\n\t\t\t\t</Card>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst { getOption } = select( OPTIONS_STORE_NAME );\n\t\tconst { getTasksStatus } = select( ONBOARDING_STORE_NAME );\n\t\tconst tasksStatus = getTasksStatus();\n\n\t\treturn {\n\t\t\tdemoStoreNotice: getOption( 'woocommerce_demo_store_notice' ),\n\t\t\tstylesheet: getOption( 'stylesheet' ),\n\t\t\ttasksStatus,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { createNotice } = dispatch( 'core/notices' );\n\t\tconst { updateOptions } = dispatch( OPTIONS_STORE_NAME );\n\t\tconst { invalidateResolutionForStoreSelector } = dispatch(\n\t\t\tONBOARDING_STORE_NAME\n\t\t);\n\n\t\treturn {\n\t\t\tclearTaskStatusCache: () =>\n\t\t\t\tinvalidateResolutionForStoreSelector( 'getTasksStatus' ),\n\t\t\tcreateNotice,\n\t\t\tupdateOptions,\n\t\t};\n\t} )\n)( Appearance );\n","/**\n * External dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport classnames from 'classnames';\nimport { cloneElement, Component } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport {\n\tButton,\n\tCard,\n\tCardBody,\n\tCardMedia,\n\tCardFooter,\n\tFormToggle,\n\tSpinner,\n} from '@wordpress/components';\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { H, Plugins } from '@woocommerce/components';\nimport {\n\tgetHistory,\n\tgetNewPath,\n\tupdateQueryString,\n} from '@woocommerce/navigation';\nimport {\n\tONBOARDING_STORE_NAME,\n\tOPTIONS_STORE_NAME,\n\tPLUGINS_STORE_NAME,\n\tpluginNames,\n\tSETTINGS_STORE_NAME,\n} from '@woocommerce/data';\nimport { recordEvent } from '@woocommerce/tracks';\n\n/**\n * Internal dependencies\n */\nimport { createNoticesFromResponse } from '../../../lib/notices';\nimport { getCountryCode } from '../../../dashboard/utils';\nimport { getPaymentMethods } from './methods';\n\nexport const setMethodEnabledOption = async (\n\toptionName,\n\tvalue,\n\t{ clearTaskStatusCache, updateOptions, options }\n) => {\n\tconst methodOptions = options[ optionName ];\n\n\t// Don't update the option if it already has the same value.\n\tif ( methodOptions.enabled !== value ) {\n\t\tawait updateOptions( {\n\t\t\t[ optionName ]: {\n\t\t\t\t...methodOptions,\n\t\t\t\tenabled: value,\n\t\t\t},\n\t\t} );\n\n\t\tclearTaskStatusCache();\n\t}\n};\n\nclass Payments extends Component {\n\tconstructor( props ) {\n\t\tsuper( ...arguments );\n\t\tconst { methods } = props;\n\n\t\tconst enabledMethods = {};\n\t\tmethods.forEach(\n\t\t\t( method ) => ( enabledMethods[ method.key ] = method.isEnabled )\n\t\t);\n\t\tthis.state = {\n\t\t\tbusyMethod: null,\n\t\t\tenabledMethods,\n\t\t\trecommendedMethod: this.getRecommendedMethod(),\n\t\t};\n\n\t\tthis.markConfigured = this.markConfigured.bind( this );\n\t}\n\n\tcomponentDidUpdate() {\n\t\tconst { recommendedMethod } = this.state;\n\n\t\tconst method = this.getRecommendedMethod();\n\t\tif ( recommendedMethod !== method ) {\n\t\t\tthis.setState( {\n\t\t\t\trecommendedMethod: method,\n\t\t\t} );\n\t\t}\n\t}\n\n\tgetRecommendedMethod() {\n\t\tconst { methods } = this.props;\n\t\treturn methods.find( ( m ) => m.key === 'wcpay' && m.visible )\n\t\t\t? 'wcpay'\n\t\t\t: 'stripe';\n\t}\n\n\tasync markConfigured( methodName, queryParams = {} ) {\n\t\tconst { enabledMethods } = this.state;\n\t\tconst { methods } = this.props;\n\n\t\tconst method = methods.find( ( option ) => option.key === methodName );\n\n\t\tif ( ! method ) {\n\t\t\tthrow `Method ${ methodName } not found in available methods list`;\n\t\t}\n\n\t\tthis.setState( {\n\t\t\tenabledMethods: {\n\t\t\t\t...enabledMethods,\n\t\t\t\t[ methodName ]: true,\n\t\t\t},\n\t\t} );\n\n\t\tawait setMethodEnabledOption( method.optionName, 'yes', this.props );\n\n\t\trecordEvent( 'tasklist_payment_connect_method', {\n\t\t\tpayment_method: methodName,\n\t\t} );\n\n\t\tgetHistory().push(\n\t\t\tgetNewPath( { ...queryParams, task: 'payments' }, '/', {} )\n\t\t);\n\t}\n\n\tgetCurrentMethod() {\n\t\tconst { methods, query } = this.props;\n\n\t\tif ( ! query.method ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst currentMethod = methods.find(\n\t\t\t( method ) => method.key === query.method\n\t\t);\n\n\t\tif ( ! currentMethod ) {\n\t\t\tthrow `Current method ${ query.method } not found in available methods list`;\n\t\t}\n\n\t\treturn currentMethod;\n\t}\n\n\tgetInstallStep() {\n\t\tconst currentMethod = this.getCurrentMethod();\n\n\t\tif ( ! currentMethod.plugins || ! currentMethod.plugins.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { activePlugins } = this.props;\n\t\tconst pluginsToInstall = currentMethod.plugins.filter(\n\t\t\t( method ) => ! activePlugins.includes( method )\n\t\t);\n\t\tconst pluginNamesString = currentMethod.plugins\n\t\t\t.map( ( pluginSlug ) => pluginNames[ pluginSlug ] )\n\t\t\t.join( ' ' + __( 'and', 'woocommerce-admin' ) + ' ' );\n\n\t\treturn {\n\t\t\tkey: 'install',\n\t\t\tlabel: sprintf(\n\t\t\t\t__( 'Install %s', 'woocommerce-admin' ),\n\t\t\t\tpluginNamesString\n\t\t\t),\n\t\t\tcontent: (\n\t\t\t\t<Plugins\n\t\t\t\t\tonComplete={ ( plugins, response ) => {\n\t\t\t\t\t\tcreateNoticesFromResponse( response );\n\t\t\t\t\t\trecordEvent( 'tasklist_payment_install_method', {\n\t\t\t\t\t\t\tplugins: currentMethod.plugins,\n\t\t\t\t\t\t} );\n\t\t\t\t\t} }\n\t\t\t\t\tonError={ ( errors, response ) =>\n\t\t\t\t\t\tcreateNoticesFromResponse( response )\n\t\t\t\t\t}\n\t\t\t\t\tautoInstall\n\t\t\t\t\tpluginSlugs={ currentMethod.plugins }\n\t\t\t\t/>\n\t\t\t),\n\t\t\tisComplete: ! pluginsToInstall.length,\n\t\t};\n\t}\n\n\tasync toggleMethod( key ) {\n\t\tconst { methods } = this.props;\n\t\tconst { enabledMethods } = this.state;\n\t\tconst method = methods.find( ( option ) => option.key === key );\n\n\t\tif ( ! method ) {\n\t\t\tthrow `Method ${ key } not found in available methods list`;\n\t\t}\n\n\t\tenabledMethods[ key ] = ! enabledMethods[ key ];\n\t\tthis.setState( { enabledMethods } );\n\n\t\trecordEvent( 'tasklist_payment_toggle', {\n\t\t\tenabled: ! method.isEnabled,\n\t\t\tpayment_method: key,\n\t\t} );\n\n\t\tawait setMethodEnabledOption(\n\t\t\tmethod.optionName,\n\t\t\tmethod.isEnabled ? 'no' : 'yes',\n\t\t\tthis.props\n\t\t);\n\t}\n\n\tasync handleClick( method ) {\n\t\tconst { methods } = this.props;\n\t\tconst { key, onClick } = method;\n\n\t\trecordEvent( 'tasklist_payment_setup', {\n\t\t\toptions: methods.map( ( option ) => option.key ),\n\t\t\tselected: key,\n\t\t} );\n\n\t\tif ( onClick ) {\n\t\t\tthis.setState( { busyMethod: key } );\n\t\t\tawait new Promise( onClick )\n\t\t\t\t.then( () => {\n\t\t\t\t\tthis.setState( { busyMethod: null } );\n\t\t\t\t} )\n\t\t\t\t.catch( () => {\n\t\t\t\t\tthis.setState( { busyMethod: null } );\n\t\t\t\t} );\n\n\t\t\treturn;\n\t\t}\n\n\t\tupdateQueryString( {\n\t\t\tmethod: key,\n\t\t} );\n\t}\n\n\tgetSetupButtons( method ) {\n\t\tconst { busyMethod, enabledMethods, recommendedMethod } = this.state;\n\t\tconst { container, isConfigured, key } = method;\n\t\tif ( container && ! isConfigured ) {\n\t\t\treturn (\n\t\t\t\t<div>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tisPrimary={ key === recommendedMethod }\n\t\t\t\t\t\tisSecondary={ key !== recommendedMethod }\n\t\t\t\t\t\tisBusy={ busyMethod === key }\n\t\t\t\t\t\tdisabled={ busyMethod }\n\t\t\t\t\t\tonClick={ () => this.handleClick( method ) }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Set up', 'woocommerce-admin' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\treturn (\n\t\t\t<FormToggle\n\t\t\t\tchecked={ enabledMethods[ key ] }\n\t\t\t\tonChange={ () => this.toggleMethod( key ) }\n\t\t\t\tonClick={ ( e ) => e.stopPropagation() }\n\t\t\t/>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst currentMethod = this.getCurrentMethod();\n\t\tconst { recommendedMethod } = this.state;\n\t\tconst { methods, query } = this.props;\n\n\t\tif ( currentMethod ) {\n\t\t\treturn (\n\t\t\t\t<Card className=\"woocommerce-task-payment-method woocommerce-task-card\">\n\t\t\t\t\t<CardBody>\n\t\t\t\t\t\t{ cloneElement( currentMethod.container, {\n\t\t\t\t\t\t\tquery,\n\t\t\t\t\t\t\tinstallStep: this.getInstallStep(),\n\t\t\t\t\t\t\tmarkConfigured: this.markConfigured,\n\t\t\t\t\t\t\thasCbdIndustry: currentMethod.hasCbdIndustry,\n\t\t\t\t\t\t} ) }\n\t\t\t\t\t</CardBody>\n\t\t\t\t</Card>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"woocommerce-task-payments\">\n\t\t\t\t{ methods.map( ( method ) => {\n\t\t\t\t\tconst {\n\t\t\t\t\t\tbefore,\n\t\t\t\t\t\tcontent,\n\t\t\t\t\t\tisConfigured,\n\t\t\t\t\t\tkey,\n\t\t\t\t\t\ttitle,\n\t\t\t\t\t\tvisible,\n\t\t\t\t\t\tloading,\n\t\t\t\t\t} = method;\n\n\t\t\t\t\tif ( ! visible ) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst classes = classnames(\n\t\t\t\t\t\t'woocommerce-task-payment',\n\t\t\t\t\t\t'woocommerce-task-card',\n\t\t\t\t\t\t! isConfigured &&\n\t\t\t\t\t\t\t'woocommerce-task-payment-not-configured',\n\t\t\t\t\t\t'woocommerce-task-payment-' + key\n\t\t\t\t\t);\n\n\t\t\t\t\tconst isRecommended =\n\t\t\t\t\t\tkey === recommendedMethod && ! isConfigured;\n\t\t\t\t\tconst showRecommendedRibbon =\n\t\t\t\t\t\tisRecommended && key !== 'wcpay';\n\t\t\t\t\tconst showRecommendedPill =\n\t\t\t\t\t\tisRecommended && key === 'wcpay';\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Card key={ key } className={ classes }>\n\t\t\t\t\t\t\t{ showRecommendedRibbon && (\n\t\t\t\t\t\t\t\t<div className=\"woocommerce-task-payment__recommended-ribbon\">\n\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t\t\t\t'Recommended',\n\t\t\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t<CardMedia isBorderless>{ before }</CardMedia>\n\t\t\t\t\t\t\t<CardBody>\n\t\t\t\t\t\t\t\t<H className=\"woocommerce-task-payment__title\">\n\t\t\t\t\t\t\t\t\t{ title }\n\t\t\t\t\t\t\t\t\t{ showRecommendedPill && (\n\t\t\t\t\t\t\t\t\t\t<span className=\"woocommerce-task-payment__recommended-pill\">\n\t\t\t\t\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t\t\t\t\t'Recommended',\n\t\t\t\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t</H>\n\t\t\t\t\t\t\t\t<div className=\"woocommerce-task-payment__content\">\n\t\t\t\t\t\t\t\t\t{ content }\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</CardBody>\n\t\t\t\t\t\t\t<CardFooter isBorderless>\n\t\t\t\t\t\t\t\t{ loading ? (\n\t\t\t\t\t\t\t\t\t<Spinner />\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\tthis.getSetupButtons( method )\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</CardFooter>\n\t\t\t\t\t\t</Card>\n\t\t\t\t\t);\n\t\t\t\t} ) }\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default compose(\n\twithDispatch( ( dispatch ) => {\n\t\tconst { createNotice } = dispatch( 'core/notices' );\n\t\tconst {\n\t\t\tinstallAndActivatePlugins,\n\t\t\tinvalidateResolutionForStoreSelector: invalidatePluginStoreSelector,\n\t\t} = dispatch( PLUGINS_STORE_NAME );\n\t\tconst { updateOptions } = dispatch( OPTIONS_STORE_NAME );\n\t\tconst {\n\t\t\tinvalidateResolution,\n\t\t\tinvalidateResolutionForStoreSelector,\n\t\t} = dispatch( ONBOARDING_STORE_NAME );\n\t\tinvalidateResolution( 'getProfileItems', [] );\n\t\tinvalidateResolution( 'getTasksStatus', [] );\n\t\treturn {\n\t\t\tclearTaskStatusCache: () => {\n\t\t\t\tinvalidateResolutionForStoreSelector( 'getTasksStatus' );\n\t\t\t\tinvalidatePluginStoreSelector( 'getPaypalOnboardingStatus' );\n\t\t\t},\n\t\t\tcreateNotice,\n\t\t\tinstallAndActivatePlugins,\n\t\t\tupdateOptions,\n\t\t};\n\t} ),\n\twithSelect( ( select, props ) => {\n\t\tconst { createNotice, installAndActivatePlugins } = props;\n\t\tconst { getProfileItems } = select( ONBOARDING_STORE_NAME );\n\t\tconst { getOption } = select( OPTIONS_STORE_NAME );\n\t\tconst {\n\t\t\tgetActivePlugins,\n\t\t\tisJetpackConnected,\n\t\t\tgetPaypalOnboardingStatus,\n\t\t\thasFinishedResolution,\n\t\t} = select( PLUGINS_STORE_NAME );\n\t\tconst { getSettings } = select( SETTINGS_STORE_NAME );\n\t\tconst { general: generalSettings = {} } = getSettings( 'general' );\n\t\tconst { getTasksStatus } = select( ONBOARDING_STORE_NAME );\n\n\t\tconst activePlugins = getActivePlugins();\n\t\tconst onboardingStatus = getTasksStatus();\n\t\tconst profileItems = getProfileItems();\n\n\t\tconst optionNames = [\n\t\t\t'woocommerce_woocommerce_payments_settings',\n\t\t\t'woocommerce_stripe_settings',\n\t\t\t'woocommerce-ppcp-settings',\n\t\t\t'woocommerce_ppcp-gateway_settings',\n\t\t\t'woocommerce_payfast_settings',\n\t\t\t'woocommerce_square_credit_card_settings',\n\t\t\t'woocommerce_klarna_payments_settings',\n\t\t\t'woocommerce_kco_settings',\n\t\t\t'wc_square_refresh_tokens',\n\t\t\t'woocommerce_cod_settings',\n\t\t\t'woocommerce_bacs_settings',\n\t\t\t'woocommerce_bacs_accounts',\n\t\t\t'woocommerce_eway_settings',\n\t\t\t'woocommerce_razorpay_settings',\n\t\t\t'woocommerce_mollie_payments_settings',\n\t\t\t'woocommerce_payubiz_settings',\n\t\t];\n\n\t\tconst options = optionNames.reduce( ( result, name ) => {\n\t\t\tresult[ name ] = getOption( name );\n\t\t\treturn result;\n\t\t}, {} );\n\t\tconst countryCode = getCountryCode(\n\t\t\tgeneralSettings.woocommerce_default_country\n\t\t);\n\t\tconst paypalOnboardingStatus = getPaypalOnboardingStatus();\n\n\t\tconst methods = getPaymentMethods( {\n\t\t\tactivePlugins,\n\t\t\tcountryCode,\n\t\t\tcreateNotice,\n\t\t\tinstallAndActivatePlugins,\n\t\t\tisJetpackConnected: isJetpackConnected(),\n\t\t\tonboardingStatus,\n\t\t\toptions,\n\t\t\tprofileItems,\n\t\t\tpaypalOnboardingStatus,\n\t\t\tloadingPaypalStatus:\n\t\t\t\t! hasFinishedResolution( 'getPaypalOnboardingStatus' ) &&\n\t\t\t\t! paypalOnboardingStatus,\n\t\t} );\n\n\t\treturn {\n\t\t\tcountryCode,\n\t\t\tprofileItems,\n\t\t\tactivePlugins,\n\t\t\toptions,\n\t\t\tmethods,\n\t\t};\n\t} )\n)( Payments );\n","/**\n * Internal dependencies\n */\nimport Products from './products';\nimport ProductTemplateModal from './product-template-modal';\n\nexport { Products, ProductTemplateModal };\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Button, Modal } from '@wordpress/components';\nimport { useState } from '@wordpress/element';\nimport { useDispatch } from '@wordpress/data';\nimport { applyFilters } from '@wordpress/hooks';\nimport { ITEMS_STORE_NAME } from '@woocommerce/data';\nimport { getAdminLink } from '@woocommerce/wc-admin-settings';\nimport { recordEvent } from '@woocommerce/tracks';\nimport { List } from '@woocommerce/components';\n\n/**\n * Internal dependencies\n */\nimport './product-template-modal.scss';\nimport { createNoticesFromResponse } from '../../../lib/notices';\n\nexport const ONBOARDING_PRODUCT_TEMPLATES_FILTER =\n\t'woocommerce_admin_onboarding_product_templates';\n\nconst PRODUCT_TEMPLATES = [\n\t{\n\t\tkey: 'physical',\n\t\ttitle: __( 'Physical product', 'woocommerce-admin' ),\n\t\tsubtitle: __(\n\t\t\t'Tangible items that get delivered to customers',\n\t\t\t'woocommerce-admin'\n\t\t),\n\t},\n\t{\n\t\tkey: 'digital',\n\t\ttitle: __( 'Digital product', 'woocommerce-admin' ),\n\t\tsubtitle: __(\n\t\t\t'Items that customers download or access through your website',\n\t\t\t'woocommerce-admin'\n\t\t),\n\t},\n\t{\n\t\tkey: 'variable',\n\t\ttitle: __( 'Variable product', 'woocommerce-admin' ),\n\t\tsubtitle: __(\n\t\t\t'Products with several versions that customers can choose from',\n\t\t\t'woocommerce-admin'\n\t\t),\n\t},\n];\n\nexport default function ProductTemplateModal( { onClose } ) {\n\tconst [ selectedTemplate, setSelectedTemplate ] = useState();\n\tconst [ isRedirecting, setIsRedirecting ] = useState( false );\n\tconst { createProductFromTemplate } = useDispatch( ITEMS_STORE_NAME );\n\n\tconst createTemplate = () => {\n\t\tsetIsRedirecting( true );\n\t\trecordEvent( 'tasklist_product_template_selection', {\n\t\t\tproduct_type: selectedTemplate,\n\t\t} );\n\t\tif ( selectedTemplate ) {\n\t\t\tcreateProductFromTemplate(\n\t\t\t\t{\n\t\t\t\t\ttemplate_name: selectedTemplate,\n\t\t\t\t\tstatus: 'draft',\n\t\t\t\t},\n\t\t\t\t{ _fields: [ 'id' ] }\n\t\t\t).then(\n\t\t\t\t( data ) => {\n\t\t\t\t\tif ( data && data.id ) {\n\t\t\t\t\t\tconst link = getAdminLink(\n\t\t\t\t\t\t\t`post.php?post=${ data.id }&action=edit&wc_onboarding_active_task=products&tutorial=true`\n\t\t\t\t\t\t);\n\t\t\t\t\t\twindow.location = link;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t( error ) => {\n\t\t\t\t\t// failed creating product with template\n\t\t\t\t\tcreateNoticesFromResponse( error );\n\t\t\t\t\tsetIsRedirecting( false );\n\t\t\t\t}\n\t\t\t);\n\t\t} else if ( onClose ) {\n\t\t\trecordEvent( 'tasklist_product_template_dismiss' );\n\t\t\tonClose();\n\t\t}\n\t};\n\n\tconst onSelectTemplateClick = ( event ) => {\n\t\tconst val = event.target && event.target.value;\n\t\tsetSelectedTemplate( val );\n\t};\n\n\tconst templates = applyFilters(\n\t\tONBOARDING_PRODUCT_TEMPLATES_FILTER,\n\t\tPRODUCT_TEMPLATES\n\t);\n\n\treturn (\n\t\t<Modal\n\t\t\ttitle={ __( 'Start with a template' ) }\n\t\t\tisDismissible={ true }\n\t\t\tonRequestClose={ () => onClose() }\n\t\t\tclassName=\"woocommerce-product-template-modal\"\n\t\t>\n\t\t\t<div className=\"woocommerce-product-template-modal__wrapper\">\n\t\t\t\t<div className=\"woocommerce-product-template-modal__list\">\n\t\t\t\t\t<List items={ templates }>\n\t\t\t\t\t\t{ ( item, index ) => (\n\t\t\t\t\t\t\t<div className=\"woocommerce-list__item-inner\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tid={ `product-templates-${\n\t\t\t\t\t\t\t\t\t\titem.key || index\n\t\t\t\t\t\t\t\t\t}` }\n\t\t\t\t\t\t\t\t\tclassName=\"components-radio-control__input\"\n\t\t\t\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\t\t\t\tname=\"product-template-options\"\n\t\t\t\t\t\t\t\t\tvalue={ item.key }\n\t\t\t\t\t\t\t\t\tonChange={ onSelectTemplateClick }\n\t\t\t\t\t\t\t\t\tchecked={ item.key === selectedTemplate }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\t\tclassName=\"woocommerce-list__item-text\"\n\t\t\t\t\t\t\t\t\thtmlFor={ `product-templates-${\n\t\t\t\t\t\t\t\t\t\titem.key || index\n\t\t\t\t\t\t\t\t\t}` }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div className=\"woocommerce-list__item-label\">\n\t\t\t\t\t\t\t\t\t\t{ item.title }\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"woocommerce-list__item-subtitle\">\n\t\t\t\t\t\t\t\t\t\t{ item.subtitle }\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</List>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"woocommerce-product-template-modal__actions\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\tisBusy={ isRedirecting }\n\t\t\t\t\t\tdisabled={ ! selectedTemplate || isRedirecting }\n\t\t\t\t\t\tonClick={ createTemplate }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Go' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Modal>\n\t);\n}\n","// extracted by mini-css-extract-plugin","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Fragment, useState } from '@wordpress/element';\nimport { Card, CardBody } from '@wordpress/components';\nimport {\n\tIcon,\n\ttemplatePartSidebar,\n\tchevronRight,\n\tplusCircle,\n\tarchive,\n\tdownload,\n} from '@wordpress/icons';\nimport { List, Pill } from '@woocommerce/components';\nimport { getAdminLink } from '@woocommerce/wc-admin-settings';\nimport { recordEvent } from '@woocommerce/tracks';\n\n/**\n * Internal dependencies\n */\nimport ProductTemplateModal from './product-template-modal';\n\nconst subTasks = [\n\t{\n\t\tkey: 'addProductTemplate',\n\t\ttitle: (\n\t\t\t<>\n\t\t\t\t{ __( 'Start with a template', 'woocommerce-admin' ) }\n\t\t\t\t<Pill>{ __( 'Recommended', 'woocommerce-admin' ) }</Pill>\n\t\t\t</>\n\t\t),\n\t\tcontent: __(\n\t\t\t'Use a template to add physical, digital, and variable products',\n\t\t\t'woocommerce-admin'\n\t\t),\n\t\tbefore: <Icon icon={ templatePartSidebar }></Icon>,\n\t\tafter: <Icon icon={ chevronRight } />,\n\t\tonClick: () =>\n\t\t\trecordEvent( 'tasklist_add_product', {\n\t\t\t\tmethod: 'product_template',\n\t\t\t} ),\n\t},\n\t{\n\t\tkey: 'addProductManually',\n\t\ttitle: __( 'Add manually', 'woocommerce-admin' ),\n\t\tcontent: __(\n\t\t\t'For small stores we recommend adding products manually',\n\t\t\t'woocommerce-admin'\n\t\t),\n\t\tbefore: <Icon icon={ plusCircle } />,\n\t\tafter: <Icon icon={ chevronRight } />,\n\t\tonClick: () =>\n\t\t\trecordEvent( 'tasklist_add_product', { method: 'manually' } ),\n\t\thref: getAdminLink(\n\t\t\t'post-new.php?post_type=product&wc_onboarding_active_task=products&tutorial=true'\n\t\t),\n\t},\n\t{\n\t\tkey: 'importProducts',\n\t\ttitle: __( 'Import via CSV', 'woocommerce-admin' ),\n\t\tcontent: __(\n\t\t\t'For larger stores we recommend importing all products at once via CSV file',\n\t\t\t'woocommerce-admin'\n\t\t),\n\t\tbefore: <Icon icon={ archive } />,\n\t\tafter: <Icon icon={ chevronRight } />,\n\t\tonClick: () =>\n\t\t\trecordEvent( 'tasklist_add_product', { method: 'import' } ),\n\t\thref: getAdminLink(\n\t\t\t'edit.php?post_type=product&page=product_importer&wc_onboarding_active_task=product-import'\n\t\t),\n\t},\n\t{\n\t\tkey: 'migrateProducts',\n\t\ttitle: __( 'Import from another service', 'woocommerce-admin' ),\n\t\tcontent: __(\n\t\t\t'For stores currently selling elsewhere we suggest using a product migration service',\n\t\t\t'woocommerce-admin'\n\t\t),\n\t\tbefore: <Icon icon={ download } />,\n\t\tafter: <Icon icon={ chevronRight } />,\n\t\tonClick: () =>\n\t\t\trecordEvent( 'tasklist_add_product', { method: 'migrate' } ),\n\t\t// @todo This should be replaced with the in-app purchase iframe when ready.\n\t\thref: 'https://woocommerce.com/products/cart2cart/',\n\t\ttarget: '_blank',\n\t},\n];\n\nexport default function Products() {\n\tconst [ selectTemplate, setSelectTemplate ] = useState( null );\n\n\tconst onTaskClick = ( task ) => {\n\t\ttask.onClick();\n\t\tif ( task.key === 'addProductTemplate' ) {\n\t\t\tsetSelectTemplate( true );\n\t\t}\n\t};\n\n\tconst listItems = subTasks.map( ( task ) => ( {\n\t\t...task,\n\t\tonClick: () => onTaskClick( task ),\n\t} ) );\n\n\treturn (\n\t\t<Fragment>\n\t\t\t<Card className=\"woocommerce-task-card\">\n\t\t\t\t<CardBody size={ null }>\n\t\t\t\t\t<List items={ listItems } />\n\t\t\t\t</CardBody>\n\t\t\t</Card>\n\t\t\t{ selectTemplate ? (\n\t\t\t\t<ProductTemplateModal\n\t\t\t\t\tonClose={ () => setSelectTemplate( null ) }\n\t\t\t\t/>\n\t\t\t) : null }\n\t\t</Fragment>\n\t);\n}\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport apiFetch from '@wordpress/api-fetch';\nimport { Component } from '@wordpress/element';\nimport { Card, CardBody } from '@wordpress/components';\nimport { compose } from '@wordpress/compose';\nimport { difference, filter } from 'lodash';\nimport interpolateComponents from 'interpolate-components';\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { Link, Stepper, Plugins } from '@woocommerce/components';\nimport { getAdminLink, getSetting } from '@woocommerce/wc-admin-settings';\nimport { getHistory, getNewPath } from '@woocommerce/navigation';\nimport { SETTINGS_STORE_NAME, PLUGINS_STORE_NAME } from '@woocommerce/data';\nimport { recordEvent } from '@woocommerce/tracks';\n\n/**\n * Internal dependencies\n */\nimport Connect from '../../../dashboard/components/connect';\nimport { getCountryCode } from '../../../dashboard/utils';\nimport StoreLocation from '../steps/location';\nimport ShippingRates from './rates';\nimport { createNoticesFromResponse } from '../../../lib/notices';\n\nexport class Shipping extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.initialState = {\n\t\t\tisPending: false,\n\t\t\tstep: 'store_location',\n\t\t\tshippingZones: [],\n\t\t};\n\n\t\t// Cache active plugins to prevent removal mid-step.\n\t\tthis.activePlugins = props.activePlugins;\n\t\tthis.state = this.initialState;\n\t\tthis.completeStep = this.completeStep.bind( this );\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.reset();\n\t}\n\n\treset() {\n\t\tthis.setState( this.initialState );\n\t}\n\n\tasync fetchShippingZones() {\n\t\tthis.setState( { isPending: true } );\n\t\tconst { countryCode, countryName } = this.props;\n\n\t\t// @todo The following fetches for shipping information should be moved into\n\t\t// @woocommerce/data to make these methods and states more readily available.\n\t\tconst shippingZones = [];\n\t\tconst zones = await apiFetch( { path: '/wc/v3/shipping/zones' } );\n\t\tlet hasCountryZone = false;\n\n\t\tawait Promise.all(\n\t\t\tzones.map( async ( zone ) => {\n\t\t\t\t// \"Rest of the world zone\"\n\t\t\t\tif ( zone.id === 0 ) {\n\t\t\t\t\tzone.methods = await apiFetch( {\n\t\t\t\t\t\tpath: `/wc/v3/shipping/zones/${ zone.id }/methods`,\n\t\t\t\t\t} );\n\t\t\t\t\tzone.name = __( 'Rest of the world', 'woocommerce-admin' );\n\t\t\t\t\tzone.toggleable = true;\n\t\t\t\t\tshippingZones.push( zone );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Return any zone with a single location matching the country zone.\n\t\t\t\tzone.locations = await apiFetch( {\n\t\t\t\t\tpath: `/wc/v3/shipping/zones/${ zone.id }/locations`,\n\t\t\t\t} );\n\t\t\t\tconst countryLocation = zone.locations.find(\n\t\t\t\t\t( location ) => countryCode === location.code\n\t\t\t\t);\n\t\t\t\tif ( countryLocation ) {\n\t\t\t\t\tzone.methods = await apiFetch( {\n\t\t\t\t\t\tpath: `/wc/v3/shipping/zones/${ zone.id }/methods`,\n\t\t\t\t\t} );\n\t\t\t\t\tshippingZones.push( zone );\n\t\t\t\t\thasCountryZone = true;\n\t\t\t\t}\n\t\t\t} )\n\t\t);\n\n\t\t// Create the default store country zone if it doesn't exist.\n\t\tif ( ! hasCountryZone ) {\n\t\t\tconst zone = await apiFetch( {\n\t\t\t\tmethod: 'POST',\n\t\t\t\tpath: '/wc/v3/shipping/zones',\n\t\t\t\tdata: { name: countryName },\n\t\t\t} );\n\t\t\tzone.locations = await apiFetch( {\n\t\t\t\tmethod: 'POST',\n\t\t\t\tpath: `/wc/v3/shipping/zones/${ zone.id }/locations`,\n\t\t\t\tdata: [ { code: countryCode, type: 'country' } ],\n\t\t\t} );\n\t\t\tshippingZones.push( zone );\n\t\t}\n\n\t\tshippingZones.reverse();\n\n\t\tthis.setState( { isPending: false, shippingZones } );\n\t}\n\n\tcomponentDidUpdate( prevProps, prevState ) {\n\t\tconst { countryCode, settings } = this.props;\n\t\tconst {\n\t\t\twoocommerce_store_address: storeAddress,\n\t\t\twoocommerce_default_country: defaultCountry,\n\t\t\twoocommerce_store_postcode: storePostCode,\n\t\t} = settings;\n\t\tconst { step } = this.state;\n\n\t\tif (\n\t\t\tstep === 'rates' &&\n\t\t\t( prevProps.countryCode !== countryCode ||\n\t\t\t\tprevState.step !== 'rates' )\n\t\t) {\n\t\t\tthis.fetchShippingZones();\n\t\t}\n\n\t\tconst isCompleteAddress = Boolean(\n\t\t\tstoreAddress && defaultCountry && storePostCode\n\t\t);\n\n\t\tif ( step === 'store_location' && isCompleteAddress ) {\n\t\t\tthis.completeStep();\n\t\t}\n\t}\n\n\tcompleteStep() {\n\t\tconst { createNotice } = this.props;\n\t\tconst { step } = this.state;\n\t\tconst steps = this.getSteps();\n\t\tconst currentStepIndex = steps.findIndex( ( s ) => s.key === step );\n\t\tconst nextStep = steps[ currentStepIndex + 1 ];\n\n\t\tif ( nextStep ) {\n\t\t\tthis.setState( { step: nextStep.key } );\n\t\t} else {\n\t\t\tcreateNotice(\n\t\t\t\t'success',\n\t\t\t\t__(\n\t\t\t\t\t\" Shipping is done! Don't worry, you can always change it later\",\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t)\n\t\t\t);\n\t\t\tgetHistory().push( getNewPath( {}, '/', {} ) );\n\t\t}\n\t}\n\n\tgetPluginsToActivate() {\n\t\tconst { countryCode } = this.props;\n\n\t\tconst plugins = [];\n\t\tif ( [ 'GB', 'CA', 'AU' ].includes( countryCode ) ) {\n\t\t\tplugins.push( 'woocommerce-shipstation-integration' );\n\t\t} else if ( countryCode === 'US' ) {\n\t\t\tplugins.push( 'woocommerce-services' );\n\t\t\tplugins.push( 'jetpack' );\n\t\t}\n\t\treturn difference( plugins, this.activePlugins );\n\t}\n\n\tgetSteps() {\n\t\tconst { countryCode, isJetpackConnected, settings } = this.props;\n\t\tconst pluginsToActivate = this.getPluginsToActivate();\n\t\tconst requiresJetpackConnection =\n\t\t\t! isJetpackConnected && countryCode === 'US';\n\n\t\tconst steps = [\n\t\t\t{\n\t\t\t\tkey: 'store_location',\n\t\t\t\tlabel: __( 'Set store location', 'woocommerce-admin' ),\n\t\t\t\tdescription: __(\n\t\t\t\t\t'The address from which your business operates',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tcontent: (\n\t\t\t\t\t<StoreLocation\n\t\t\t\t\t\t{ ...this.props }\n\t\t\t\t\t\tonComplete={ ( values ) => {\n\t\t\t\t\t\t\tconst country = getCountryCode(\n\t\t\t\t\t\t\t\tvalues.countryState\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\trecordEvent( 'tasklist_shipping_set_location', {\n\t\t\t\t\t\t\t\tcountry,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\tthis.completeStep();\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t),\n\t\t\t\tvisible: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'rates',\n\t\t\t\tlabel: __( 'Set shipping costs', 'woocommerce-admin' ),\n\t\t\t\tdescription: __(\n\t\t\t\t\t'Define how much customers pay to ship to different destinations',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tcontent: (\n\t\t\t\t\t<ShippingRates\n\t\t\t\t\t\tbuttonText={\n\t\t\t\t\t\t\tpluginsToActivate.length ||\n\t\t\t\t\t\t\trequiresJetpackConnection\n\t\t\t\t\t\t\t\t? __( 'Proceed', 'woocommerce-admin' )\n\t\t\t\t\t\t\t\t: __( 'Complete task', 'woocommerce-admin' )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tshippingZones={ this.state.shippingZones }\n\t\t\t\t\t\tonComplete={ this.completeStep }\n\t\t\t\t\t\t{ ...this.props }\n\t\t\t\t\t/>\n\t\t\t\t),\n\t\t\t\tvisible:\n\t\t\t\t\tsettings.woocommerce_ship_to_countries === 'disabled'\n\t\t\t\t\t\t? false\n\t\t\t\t\t\t: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'label_printing',\n\t\t\t\tlabel: __(\n\t\t\t\t\t'Enable shipping label printing',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tdescription: pluginsToActivate.includes(\n\t\t\t\t\t'woocommerce-shipstation-integration'\n\t\t\t\t)\n\t\t\t\t\t? interpolateComponents( {\n\t\t\t\t\t\t\tmixedString: __(\n\t\t\t\t\t\t\t\t'We recommend using ShipStation to save time at the post office by printing your shipping ' +\n\t\t\t\t\t\t\t\t\t'labels at home. Try ShipStation free for 30 days. {{link}}Learn more{{/link}}.',\n\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tcomponents: {\n\t\t\t\t\t\t\t\tlink: (\n\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\thref=\"https://woocommerce.com/products/shipstation-integration\"\n\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\t\ttype=\"external\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t  } )\n\t\t\t\t\t: __(\n\t\t\t\t\t\t\t'With WooCommerce Shipping and Jetpack you can save time at the ' +\n\t\t\t\t\t\t\t\t'Post Office by printing your shipping labels at home',\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t  ),\n\t\t\t\tcontent: (\n\t\t\t\t\t<Plugins\n\t\t\t\t\t\tonComplete={ ( plugins, response ) => {\n\t\t\t\t\t\t\tcreateNoticesFromResponse( response );\n\t\t\t\t\t\t\trecordEvent( 'tasklist_shipping_label_printing', {\n\t\t\t\t\t\t\t\tinstall: true,\n\t\t\t\t\t\t\t\tplugins_to_activate: pluginsToActivate,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\tthis.completeStep();\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tonError={ ( errors, response ) =>\n\t\t\t\t\t\t\tcreateNoticesFromResponse( response )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonSkip={ () => {\n\t\t\t\t\t\t\trecordEvent( 'tasklist_shipping_label_printing', {\n\t\t\t\t\t\t\t\tinstall: false,\n\t\t\t\t\t\t\t\tplugins_to_activate: pluginsToActivate,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\tgetHistory().push( getNewPath( {}, '/', {} ) );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tpluginSlugs={ pluginsToActivate }\n\t\t\t\t\t\t{ ...this.props }\n\t\t\t\t\t/>\n\t\t\t\t),\n\t\t\t\tvisible: pluginsToActivate.length,\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'connect',\n\t\t\t\tlabel: __( 'Connect your store', 'woocommerce-admin' ),\n\t\t\t\tdescription: __(\n\t\t\t\t\t'Connect your store to WordPress.com to enable label printing',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tcontent: (\n\t\t\t\t\t<Connect\n\t\t\t\t\t\tredirectUrl={ getAdminLink(\n\t\t\t\t\t\t\t'admin.php?page=wc-admin'\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tcompleteStep={ this.completeStep }\n\t\t\t\t\t\t{ ...this.props }\n\t\t\t\t\t\tonConnect={ () => {\n\t\t\t\t\t\t\trecordEvent( 'tasklist_shipping_connect_store' );\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t),\n\t\t\t\tvisible: requiresJetpackConnection,\n\t\t\t},\n\t\t];\n\n\t\treturn filter( steps, ( step ) => step.visible );\n\t}\n\n\trender() {\n\t\tconst { isPending, step } = this.state;\n\t\tconst { isUpdateSettingsRequesting } = this.props;\n\n\t\treturn (\n\t\t\t<div className=\"woocommerce-task-shipping\">\n\t\t\t\t<Card className=\"woocommerce-task-card\">\n\t\t\t\t\t<CardBody>\n\t\t\t\t\t\t<Stepper\n\t\t\t\t\t\t\tisPending={\n\t\t\t\t\t\t\t\tisPending || isUpdateSettingsRequesting\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tisVertical\n\t\t\t\t\t\t\tcurrentStep={ step }\n\t\t\t\t\t\t\tsteps={ this.getSteps() }\n\t\t\t\t\t\t/>\n\t\t\t\t\t</CardBody>\n\t\t\t\t</Card>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst { getSettings, isUpdateSettingsRequesting } = select(\n\t\t\tSETTINGS_STORE_NAME\n\t\t);\n\t\tconst { getActivePlugins, isJetpackConnected } = select(\n\t\t\tPLUGINS_STORE_NAME\n\t\t);\n\n\t\tconst { general: settings = {} } = getSettings( 'general' );\n\t\tconst countryCode = getCountryCode(\n\t\t\tsettings.woocommerce_default_country\n\t\t);\n\n\t\tconst { countries = [] } = getSetting( 'dataEndpoints', {} );\n\t\tconst country = countryCode\n\t\t\t? countries.find( ( c ) => c.code === countryCode )\n\t\t\t: null;\n\t\tconst countryName = country ? country.name : null;\n\t\tconst activePlugins = getActivePlugins();\n\n\t\treturn {\n\t\t\tcountryCode,\n\t\t\tcountryName,\n\t\t\tisUpdateSettingsRequesting: isUpdateSettingsRequesting( 'general' ),\n\t\t\tsettings,\n\t\t\tactivePlugins,\n\t\t\tisJetpackConnected: isJetpackConnected(),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { createNotice } = dispatch( 'core/notices' );\n\t\tconst { updateAndPersistSettingsForGroup } = dispatch(\n\t\t\tSETTINGS_STORE_NAME\n\t\t);\n\n\t\treturn {\n\t\t\tcreateNotice,\n\t\t\tupdateAndPersistSettingsForGroup,\n\t\t};\n\t} )\n)( Shipping );\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport apiFetch from '@wordpress/api-fetch';\nimport { compose } from '@wordpress/compose';\nimport { withDispatch } from '@wordpress/data';\nimport { Component, Fragment } from '@wordpress/element';\nimport { Button, FormToggle } from '@wordpress/components';\nimport PropTypes from 'prop-types';\nimport { Flag, Form, TextControlWithAffixes } from '@woocommerce/components';\nimport { ONBOARDING_STORE_NAME } from '@woocommerce/data';\nimport { recordEvent } from '@woocommerce/tracks';\nimport { Icon, globe } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport { CurrencyContext } from '../../../lib/currency-context';\n\nclass ShippingRates extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.updateShippingZones = this.updateShippingZones.bind( this );\n\t}\n\n\tgetShippingMethods( zone, type = null ) {\n\t\t// Sometimes the wc/v3/shipping/zones response does not include a methods attribute, return early if so.\n\t\tif ( ! zone || ! zone.methods || ! Array.isArray( zone.methods ) ) {\n\t\t\treturn [];\n\t\t}\n\n\t\tif ( ! type ) {\n\t\t\treturn zone.methods;\n\t\t}\n\n\t\treturn zone.methods\n\t\t\t? zone.methods.filter( ( method ) => method.method_id === type )\n\t\t\t: [];\n\t}\n\n\tdisableShippingMethods( zone, methods ) {\n\t\tif ( ! methods.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tmethods.forEach( ( method ) => {\n\t\t\tapiFetch( {\n\t\t\t\tmethod: 'POST',\n\t\t\t\tpath: `/wc/v3/shipping/zones/${ zone.id }/methods/${ method.instance_id }`,\n\t\t\t\tdata: {\n\t\t\t\t\tenabled: false,\n\t\t\t\t},\n\t\t\t} );\n\t\t} );\n\t}\n\n\tasync updateShippingZones( values ) {\n\t\tconst {\n\t\t\tclearTaskStatusCache,\n\t\t\tcreateNotice,\n\t\t\tshippingZones,\n\t\t} = this.props;\n\n\t\tlet restOfTheWorld = false;\n\t\tlet shippingCost = false;\n\t\tshippingZones.forEach( ( zone ) => {\n\t\t\tif ( zone.id === 0 ) {\n\t\t\t\trestOfTheWorld =\n\t\t\t\t\tzone.toggleable && values[ `${ zone.id }_enabled` ];\n\t\t\t} else {\n\t\t\t\tshippingCost =\n\t\t\t\t\tvalues[ `${ zone.id }_rate` ] !== '' &&\n\t\t\t\t\tparseFloat( values[ `${ zone.id }_rate` ] ) !==\n\t\t\t\t\t\tparseFloat( 0 );\n\t\t\t}\n\n\t\t\tconst shippingMethods = this.getShippingMethods( zone );\n\t\t\tconst methodType =\n\t\t\t\tparseFloat( values[ `${ zone.id }_rate` ] ) === parseFloat( 0 )\n\t\t\t\t\t? 'free_shipping'\n\t\t\t\t\t: 'flat_rate';\n\t\t\tconst shippingMethod = this.getShippingMethods( zone, methodType )\n\t\t\t\t.length\n\t\t\t\t? this.getShippingMethods( zone, methodType )[ 0 ]\n\t\t\t\t: null;\n\n\t\t\tif ( zone.toggleable && ! values[ `${ zone.id }_enabled` ] ) {\n\t\t\t\t// Disable any shipping methods that exist if toggled off.\n\t\t\t\tthis.disableShippingMethods( zone, shippingMethods );\n\t\t\t\treturn;\n\t\t\t} else if ( shippingMethod ) {\n\t\t\t\t// Disable all methods except the one being updated.\n\t\t\t\tconst methodsToDisable = shippingMethods.filter(\n\t\t\t\t\t( method ) =>\n\t\t\t\t\t\tmethod.instance_id !== shippingMethod.instance_id\n\t\t\t\t);\n\t\t\t\tthis.disableShippingMethods( zone, methodsToDisable );\n\t\t\t}\n\n\t\t\tapiFetch( {\n\t\t\t\tmethod: 'POST',\n\t\t\t\tpath: shippingMethod\n\t\t\t\t\t? // Update the first existing method if one exists, otherwise create a new one.\n\t\t\t\t\t  `/wc/v3/shipping/zones/${ zone.id }/methods/${ shippingMethod.instance_id }`\n\t\t\t\t\t: `/wc/v3/shipping/zones/${ zone.id }/methods`,\n\t\t\t\tdata: {\n\t\t\t\t\tmethod_id: methodType,\n\t\t\t\t\tenabled: true,\n\t\t\t\t\tsettings: { cost: values[ `${ zone.id }_rate` ] },\n\t\t\t\t},\n\t\t\t} );\n\t\t} );\n\n\t\trecordEvent( 'tasklist_shipping_set_costs', {\n\t\t\tshipping_cost: shippingCost,\n\t\t\trest_world: restOfTheWorld,\n\t\t} );\n\n\t\tclearTaskStatusCache();\n\n\t\tcreateNotice(\n\t\t\t'success',\n\t\t\t__( 'Your shipping rates have been updated', 'woocommerce-admin' )\n\t\t);\n\n\t\tthis.props.onComplete();\n\t}\n\n\trenderInputPrefix() {\n\t\tconst { symbolPosition, symbol } = this.context.getCurrencyConfig();\n\t\tif ( symbolPosition.indexOf( 'right' ) === 0 ) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (\n\t\t\t<span className=\"woocommerce-shipping-rate__control-prefix\">\n\t\t\t\t{ symbol }\n\t\t\t</span>\n\t\t);\n\t}\n\n\trenderInputSuffix( rate ) {\n\t\tconst { symbolPosition, symbol } = this.context.getCurrencyConfig();\n\t\tif ( symbolPosition.indexOf( 'right' ) === 0 ) {\n\t\t\treturn (\n\t\t\t\t<span className=\"woocommerce-shipping-rate__control-suffix\">\n\t\t\t\t\t{ symbol }\n\t\t\t\t</span>\n\t\t\t);\n\t\t}\n\n\t\treturn parseFloat( rate ) === parseFloat( 0 ) ? (\n\t\t\t<span className=\"woocommerce-shipping-rate__control-suffix\">\n\t\t\t\t{ __( 'Free shipping', 'woocommerce-admin' ) }\n\t\t\t</span>\n\t\t) : null;\n\t}\n\n\tgetFormattedRate( value ) {\n\t\tconst { formatDecimalString } = this.context;\n\t\tconst currencyString = formatDecimalString( value );\n\t\tif ( ! value.length || ! currencyString.length ) {\n\t\t\treturn formatDecimalString( 0 );\n\t\t}\n\n\t\treturn formatDecimalString( value );\n\t}\n\n\tgetInitialValues() {\n\t\tconst { formatDecimalString } = this.context;\n\t\tconst values = {};\n\n\t\tthis.props.shippingZones.forEach( ( zone ) => {\n\t\t\tconst shippingMethods = this.getShippingMethods( zone );\n\t\t\tconst rate =\n\t\t\t\tshippingMethods.length && shippingMethods[ 0 ].settings.cost\n\t\t\t\t\t? this.getFormattedRate(\n\t\t\t\t\t\t\tshippingMethods[ 0 ].settings.cost.value\n\t\t\t\t\t  )\n\t\t\t\t\t: formatDecimalString( 0 );\n\t\t\tvalues[ `${ zone.id }_rate` ] = rate;\n\n\t\t\tif ( shippingMethods.length && shippingMethods[ 0 ].enabled ) {\n\t\t\t\tvalues[ `${ zone.id }_enabled` ] = true;\n\t\t\t} else {\n\t\t\t\tvalues[ `${ zone.id }_enabled` ] = false;\n\t\t\t}\n\t\t} );\n\n\t\treturn values;\n\t}\n\n\tvalidate( values ) {\n\t\tconst errors = {};\n\n\t\tconst rates = Object.keys( values ).filter( ( field ) =>\n\t\t\tfield.endsWith( '_rate' )\n\t\t);\n\n\t\trates.forEach( ( rate ) => {\n\t\t\tif ( values[ rate ] < 0 ) {\n\t\t\t\terrors[ rate ] = __(\n\t\t\t\t\t'Shipping rates can not be negative numbers.',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t);\n\t\t\t}\n\t\t} );\n\n\t\treturn errors;\n\t}\n\n\trender() {\n\t\tconst { buttonText, shippingZones } = this.props;\n\n\t\tif ( ! shippingZones.length ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (\n\t\t\t<Form\n\t\t\t\tinitialValues={ this.getInitialValues() }\n\t\t\t\tonSubmitCallback={ this.updateShippingZones }\n\t\t\t\tvalidate={ this.validate }\n\t\t\t>\n\t\t\t\t{ ( {\n\t\t\t\t\tgetInputProps,\n\t\t\t\t\thandleSubmit,\n\t\t\t\t\tsetTouched,\n\t\t\t\t\tsetValue,\n\t\t\t\t\tvalues,\n\t\t\t\t} ) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t<div className=\"woocommerce-shipping-rates\">\n\t\t\t\t\t\t\t\t{ shippingZones.map( ( zone ) => (\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName=\"woocommerce-shipping-rate\"\n\t\t\t\t\t\t\t\t\t\tkey={ zone.id }\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<div className=\"woocommerce-shipping-rate__icon\">\n\t\t\t\t\t\t\t\t\t\t\t{ zone.locations ? (\n\t\t\t\t\t\t\t\t\t\t\t\tzone.locations.map(\n\t\t\t\t\t\t\t\t\t\t\t\t\t( location ) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Flag\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize={ 24 }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcode={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlocation.code\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlocation.code\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t// Icon used for zones without locations or \"Rest of the world\".\n\t\t\t\t\t\t\t\t\t\t\t\t<Icon icon={ globe } />\n\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"woocommerce-shipping-rate__main\">\n\t\t\t\t\t\t\t\t\t\t\t{ zone.toggleable ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\t\t\t\t\t\thtmlFor={ `woocommerce-shipping-rate__toggle-${ zone.id }` }\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"woocommerce-shipping-rate__name\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ zone.name }\n\t\t\t\t\t\t\t\t\t\t\t\t\t<FormToggle\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid={ `woocommerce-shipping-rate__toggle-${ zone.id }` }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ ...getInputProps(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t`${ zone.id }_enabled`\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"woocommerce-shipping-rate__name\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ zone.name }\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\t{ ( ! zone.toggleable ||\n\t\t\t\t\t\t\t\t\t\t\t\tvalues[\n\t\t\t\t\t\t\t\t\t\t\t\t\t`${ zone.id }_enabled`\n\t\t\t\t\t\t\t\t\t\t\t\t] ) && (\n\t\t\t\t\t\t\t\t\t\t\t\t<TextControlWithAffixes\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={ __(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'Shipping cost',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ ...getInputProps(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t`${ zone.id }_rate`\n\t\t\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\t\t\tonBlur={ () => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetTouched(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t`${ zone.id }_rate`\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetValue(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t`${ zone.id }_rate`,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.getFormattedRate(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalues[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t`${ zone.id }_rate`\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\t\t\t\t\tprefix={ this.renderInputPrefix() }\n\t\t\t\t\t\t\t\t\t\t\t\t\tsuffix={ this.renderInputSuffix(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalues[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t`${ zone.id }_rate`\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"muriel-input-text woocommerce-shipping-rate__control-wrapper\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t) ) }\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<Button isPrimary onClick={ handleSubmit }>\n\t\t\t\t\t\t\t\t{ buttonText ||\n\t\t\t\t\t\t\t\t\t__( 'Update', 'woocommerce-admin' ) }\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t);\n\t\t\t\t} }\n\t\t\t</Form>\n\t\t);\n\t}\n}\n\nShippingRates.propTypes = {\n\t/**\n\t * Text displayed on the primary button.\n\t */\n\tbuttonText: PropTypes.string,\n\t/**\n\t * Function used to mark the step complete.\n\t */\n\tonComplete: PropTypes.func.isRequired,\n\t/**\n\t * Function to create a transient notice in the store.\n\t */\n\tcreateNotice: PropTypes.func.isRequired,\n\t/**\n\t * Array of shipping zones returned from the WC REST API with added\n\t * `methods` and `locations` properties appended from separate API calls.\n\t */\n\tshippingZones: PropTypes.array,\n};\n\nShippingRates.defaultProps = {\n\tshippingZones: [],\n};\n\nShippingRates.contextType = CurrencyContext;\n\nexport default compose(\n\twithDispatch( ( dispatch ) => {\n\t\tconst { invalidateResolutionForStoreSelector } = dispatch(\n\t\t\tONBOARDING_STORE_NAME\n\t\t);\n\n\t\treturn {\n\t\t\tclearTaskStatusCache: () =>\n\t\t\t\tinvalidateResolutionForStoreSelector( 'getTasksStatus' ),\n\t\t};\n\t} )\n)( ShippingRates );\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Button } from '@wordpress/components';\nimport { Component, Fragment } from '@wordpress/element';\nimport { Form } from '@woocommerce/components';\n\n/**\n * Internal dependencies\n */\nimport {\n\tStoreAddress,\n\tvalidateStoreAddress,\n} from '../../../dashboard/components/settings/general/store-address';\n\nexport default class StoreLocation extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\t\tthis.onSubmit = this.onSubmit.bind( this );\n\t}\n\n\tasync onSubmit( values ) {\n\t\tconst {\n\t\t\tonComplete,\n\t\t\tcreateNotice,\n\t\t\tisSettingsError,\n\t\t\tupdateAndPersistSettingsForGroup,\n\t\t\tsettings,\n\t\t} = this.props;\n\n\t\tawait updateAndPersistSettingsForGroup( 'general', {\n\t\t\tgeneral: {\n\t\t\t\t...settings,\n\t\t\t\twoocommerce_store_address: values.addressLine1,\n\t\t\t\twoocommerce_store_address_2: values.addressLine2,\n\t\t\t\twoocommerce_default_country: values.countryState,\n\t\t\t\twoocommerce_store_city: values.city,\n\t\t\t\twoocommerce_store_postcode: values.postCode,\n\t\t\t},\n\t\t} );\n\n\t\tif ( ! isSettingsError ) {\n\t\t\tonComplete( values );\n\t\t} else {\n\t\t\tcreateNotice(\n\t\t\t\t'error',\n\t\t\t\t__(\n\t\t\t\t\t'There was a problem saving your store location',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t}\n\n\tgetInitialValues() {\n\t\tconst { settings } = this.props;\n\n\t\tconst {\n\t\t\twoocommerce_store_address: storeAddress,\n\t\t\twoocommerce_store_address_2: storeAddress2,\n\t\t\twoocommerce_store_city: storeCity,\n\t\t\twoocommerce_default_country: defaultCountry,\n\t\t\twoocommerce_store_postcode: storePostcode,\n\t\t} = settings;\n\n\t\treturn {\n\t\t\taddressLine1: storeAddress || '',\n\t\t\taddressLine2: storeAddress2 || '',\n\t\t\tcity: storeCity || '',\n\t\t\tcountryState: defaultCountry || '',\n\t\t\tpostCode: storePostcode || '',\n\t\t};\n\t}\n\n\trender() {\n\t\tconst { isSettingsRequesting } = this.props;\n\n\t\tif ( isSettingsRequesting ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (\n\t\t\t<Form\n\t\t\t\tinitialValues={ this.getInitialValues() }\n\t\t\t\tonSubmitCallback={ this.onSubmit }\n\t\t\t\tvalidate={ validateStoreAddress }\n\t\t\t>\n\t\t\t\t{ ( { getInputProps, handleSubmit, setValue } ) => (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<StoreAddress\n\t\t\t\t\t\t\tgetInputProps={ getInputProps }\n\t\t\t\t\t\t\tsetValue={ setValue }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Button isPrimary onClick={ handleSubmit }>\n\t\t\t\t\t\t\t{ __( 'Continue', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Fragment>\n\t\t\t\t) }\n\t\t\t</Form>\n\t\t);\n\t}\n}\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Button, Card, CardBody } from '@wordpress/components';\nimport { Component, Fragment } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport { difference, filter } from 'lodash';\nimport interpolateComponents from 'interpolate-components';\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { H, Link, Stepper, Plugins } from '@woocommerce/components';\nimport { getHistory, getNewPath } from '@woocommerce/navigation';\nimport { getAdminLink } from '@woocommerce/wc-admin-settings';\nimport {\n\tONBOARDING_STORE_NAME,\n\tOPTIONS_STORE_NAME,\n\tPLUGINS_STORE_NAME,\n\tSETTINGS_STORE_NAME,\n} from '@woocommerce/data';\nimport { recordEvent, queueRecordEvent } from '@woocommerce/tracks';\nimport { Text } from '@woocommerce/experimental';\n\n/**\n * Internal dependencies\n */\nimport Connect from '../../dashboard/components/connect';\nimport { createNoticesFromResponse } from '../../lib/notices';\nimport { getCountryCode } from '../../dashboard/utils';\nimport StoreLocation from './steps/location';\n\nclass Tax extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tconst { hasCompleteAddress, pluginsToActivate } = props;\n\n\t\tthis.initialState = {\n\t\t\tisPending: false,\n\t\t\tstepIndex: hasCompleteAddress ? 1 : 0,\n\t\t\t// Cache the value of pluginsToActivate so that we can\n\t\t\t// show/hide tasks based on it, but not have them update mid task.\n\t\t\tcachedPluginsToActivate: pluginsToActivate,\n\t\t};\n\t\tthis.state = this.initialState;\n\n\t\tthis.completeStep = this.completeStep.bind( this );\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.reset();\n\t}\n\n\treset() {\n\t\tthis.setState( this.initialState );\n\t}\n\n\tshouldShowSuccessScreen() {\n\t\tconst {\n\t\t\tisJetpackConnected,\n\t\t\thasCompleteAddress,\n\t\t\tpluginsToActivate,\n\t\t} = this.props;\n\n\t\treturn (\n\t\t\thasCompleteAddress &&\n\t\t\t! pluginsToActivate.length &&\n\t\t\tisJetpackConnected &&\n\t\t\tthis.isTaxJarSupported()\n\t\t);\n\t}\n\n\tisTaxJarSupported() {\n\t\tconst { countryCode, tasksStatus } = this.props;\n\t\tconst {\n\t\t\tautomatedTaxSupportedCountries = [],\n\t\t\ttaxJarActivated,\n\t\t} = tasksStatus;\n\n\t\treturn (\n\t\t\t! taxJarActivated && // WCS integration doesn't work with the official TaxJar plugin.\n\t\t\tautomatedTaxSupportedCountries.includes( countryCode )\n\t\t);\n\t}\n\n\tcompleteStep() {\n\t\tconst { stepIndex } = this.state;\n\t\tconst steps = this.getSteps();\n\t\tconst nextStep = steps[ stepIndex + 1 ];\n\n\t\tif ( nextStep ) {\n\t\t\tthis.setState( { stepIndex: stepIndex + 1 } );\n\t\t}\n\t}\n\n\tasync manuallyConfigureTaxRates() {\n\t\tconst {\n\t\t\tgeneralSettings,\n\t\t\tupdateAndPersistSettingsForGroup,\n\t\t} = this.props;\n\n\t\tif ( generalSettings.woocommerce_calc_taxes !== 'yes' ) {\n\t\t\tthis.setState( { isPending: true } );\n\t\t\tupdateAndPersistSettingsForGroup( 'general', {\n\t\t\t\tgeneral: {\n\t\t\t\t\t...generalSettings,\n\t\t\t\t\twoocommerce_calc_taxes: 'yes',\n\t\t\t\t},\n\t\t\t} )\n\t\t\t\t.then( () => this.redirectToTaxSettings() )\n\t\t\t\t.catch( ( error ) => createNoticesFromResponse( error ) );\n\t\t} else {\n\t\t\tthis.redirectToTaxSettings();\n\t\t}\n\t}\n\n\tupdateAutomatedTax( isEnabling ) {\n\t\tconst {\n\t\t\tclearTaskStatusCache,\n\t\t\tcreateNotice,\n\t\t\tupdateAndPersistSettingsForGroup,\n\t\t\tgeneralSettings,\n\t\t\ttaxSettings,\n\t\t} = this.props;\n\n\t\tPromise.all( [\n\t\t\tupdateAndPersistSettingsForGroup( 'tax', {\n\t\t\t\ttax: {\n\t\t\t\t\t...taxSettings,\n\t\t\t\t\twc_connect_taxes_enabled: isEnabling ? 'yes' : 'no',\n\t\t\t\t},\n\t\t\t} ),\n\t\t\tupdateAndPersistSettingsForGroup( 'general', {\n\t\t\t\tgeneral: {\n\t\t\t\t\t...generalSettings,\n\t\t\t\t\twoocommerce_calc_taxes: 'yes',\n\t\t\t\t},\n\t\t\t} ),\n\t\t] )\n\t\t\t.then( () => {\n\t\t\t\tclearTaskStatusCache();\n\n\t\t\t\tif ( isEnabling ) {\n\t\t\t\t\tcreateNotice(\n\t\t\t\t\t\t'success',\n\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t\"You're awesome! One less item on your to-do list \",\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t\tgetHistory().push( getNewPath( {}, '/', {} ) );\n\t\t\t\t} else {\n\t\t\t\t\tthis.redirectToTaxSettings();\n\t\t\t\t}\n\t\t\t} )\n\t\t\t.catch( () => {\n\t\t\t\tcreateNotice(\n\t\t\t\t\t'error',\n\t\t\t\t\t__(\n\t\t\t\t\t\t'There was a problem updating your tax settings',\n\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t} );\n\t}\n\n\tredirectToTaxSettings() {\n\t\twindow.location = getAdminLink(\n\t\t\t'admin.php?page=wc-settings&tab=tax&section=standard&wc_onboarding_active_task=tax'\n\t\t);\n\t}\n\n\tdoNotChargeSalesTax() {\n\t\tconst { updateOptions } = this.props;\n\n\t\tqueueRecordEvent( 'tasklist_tax_connect_store', {\n\t\t\tconnect: false,\n\t\t\tno_tax: true,\n\t\t} );\n\n\t\tupdateOptions( {\n\t\t\twoocommerce_no_sales_tax: true,\n\t\t\twoocommerce_calc_taxes: 'no',\n\t\t} ).then( () => {\n\t\t\twindow.location = getAdminLink( 'admin.php?page=wc-admin' );\n\t\t} );\n\t}\n\n\tgetSteps() {\n\t\tconst {\n\t\t\tgeneralSettings,\n\t\t\tisJetpackConnected,\n\t\t\tisPending,\n\t\t\ttosAccepted,\n\t\t\tupdateOptions,\n\t\t} = this.props;\n\t\tconst { cachedPluginsToActivate } = this.state;\n\t\tlet step2Label, agreementText;\n\n\t\tif ( cachedPluginsToActivate.includes( 'woocommerce-services' ) ) {\n\t\t\tstep2Label = __(\n\t\t\t\t'Install Jetpack and WooCommerce Tax',\n\t\t\t\t'woocommerce-admin'\n\t\t\t);\n\t\t\tagreementText = __(\n\t\t\t\t'By installing Jetpack and WooCommerce Tax you agree to the {{link}}Terms of Service{{/link}}.',\n\t\t\t\t'woocommerce-admin'\n\t\t\t);\n\t\t} else {\n\t\t\tstep2Label = __( 'Install Jetpack', 'woocommerce-admin' );\n\t\t\tagreementText = __(\n\t\t\t\t'By installing Jetpack you agree to the {{link}}Terms of Service{{/link}}.',\n\t\t\t\t'woocommerce-admin'\n\t\t\t);\n\t\t}\n\n\t\tconst steps = [\n\t\t\t{\n\t\t\t\tkey: 'store_location',\n\t\t\t\tlabel: __( 'Set store location', 'woocommerce-admin' ),\n\t\t\t\tdescription: __(\n\t\t\t\t\t'The address from which your business operates',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tcontent: (\n\t\t\t\t\t<StoreLocation\n\t\t\t\t\t\t{ ...this.props }\n\t\t\t\t\t\tonComplete={ ( values ) => {\n\t\t\t\t\t\t\tconst country = getCountryCode(\n\t\t\t\t\t\t\t\tvalues.countryState\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\trecordEvent( 'tasklist_tax_set_location', {\n\t\t\t\t\t\t\t\tcountry,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\tthis.completeStep();\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tisSettingsRequesting={ false }\n\t\t\t\t\t\tsettings={ generalSettings }\n\t\t\t\t\t/>\n\t\t\t\t),\n\t\t\t\tvisible: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'plugins',\n\t\t\t\tlabel: step2Label,\n\t\t\t\tdescription: __(\n\t\t\t\t\t'Jetpack and WooCommerce Tax allow you to automate sales tax calculations',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tcontent: (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<Plugins\n\t\t\t\t\t\t\tonComplete={ ( plugins, response ) => {\n\t\t\t\t\t\t\t\tcreateNoticesFromResponse( response );\n\t\t\t\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t\t\t\t'tasklist_tax_install_extensions',\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tinstall_extensions: true,\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tupdateOptions( {\n\t\t\t\t\t\t\t\t\twoocommerce_setup_jetpack_opted_in: true,\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\tthis.completeStep();\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tonError={ ( errors, response ) =>\n\t\t\t\t\t\t\t\tcreateNoticesFromResponse( response )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonSkip={ () => {\n\t\t\t\t\t\t\t\tqueueRecordEvent(\n\t\t\t\t\t\t\t\t\t'tasklist_tax_install_extensions',\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tinstall_extensions: false,\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tthis.manuallyConfigureTaxRates();\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tskipText={ __(\n\t\t\t\t\t\t\t\t'Set up manually',\n\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\tonAbort={ () => this.doNotChargeSalesTax() }\n\t\t\t\t\t\t\tabortText={ __(\n\t\t\t\t\t\t\t\t\"I don't charge sales tax\",\n\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{ ! tosAccepted && (\n\t\t\t\t\t\t\t<Text\n\t\t\t\t\t\t\t\tvariant=\"caption\"\n\t\t\t\t\t\t\t\tclassName=\"woocommerce-task__caption\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ interpolateComponents( {\n\t\t\t\t\t\t\t\t\tmixedString: agreementText,\n\t\t\t\t\t\t\t\t\tcomponents: {\n\t\t\t\t\t\t\t\t\t\tlink: (\n\t\t\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\t\t\thref={\n\t\t\t\t\t\t\t\t\t\t\t\t\t'https://wordpress.com/tos/'\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"external\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t} ) }\n\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</Fragment>\n\t\t\t\t),\n\t\t\t\tvisible:\n\t\t\t\t\t( cachedPluginsToActivate.length || ! tosAccepted ) &&\n\t\t\t\t\tthis.isTaxJarSupported(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'connect',\n\t\t\t\tlabel: __( 'Connect your store', 'woocommerce-admin' ),\n\t\t\t\tdescription: __(\n\t\t\t\t\t'Connect your store to WordPress.com to enable automated sales tax calculations',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tcontent: (\n\t\t\t\t\t<Connect\n\t\t\t\t\t\t{ ...this.props }\n\t\t\t\t\t\tonConnect={ () => {\n\t\t\t\t\t\t\trecordEvent( 'tasklist_tax_connect_store', {\n\t\t\t\t\t\t\t\tconnect: true,\n\t\t\t\t\t\t\t\tno_tax: false,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tonSkip={ () => {\n\t\t\t\t\t\t\tqueueRecordEvent( 'tasklist_tax_connect_store', {\n\t\t\t\t\t\t\t\tconnect: false,\n\t\t\t\t\t\t\t\tno_tax: false,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\tthis.manuallyConfigureTaxRates();\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tskipText={ __(\n\t\t\t\t\t\t\t'Set up tax rates manually',\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tonAbort={ () => this.doNotChargeSalesTax() }\n\t\t\t\t\t\tabortText={ __(\n\t\t\t\t\t\t\t\"My business doesn't charge sales tax\",\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t) }\n\t\t\t\t\t/>\n\t\t\t\t),\n\t\t\t\tvisible: ! isJetpackConnected && this.isTaxJarSupported(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'manual_configuration',\n\t\t\t\tlabel: __( 'Configure tax rates', 'woocommerce-admin' ),\n\t\t\t\tdescription: __(\n\t\t\t\t\t'Head over to the tax rate settings screen to configure your tax rates',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tcontent: (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tdisabled={ isPending }\n\t\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\t\tisBusy={ isPending }\n\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\trecordEvent( 'tasklist_tax_config_rates' );\n\t\t\t\t\t\t\t\tthis.manuallyConfigureTaxRates();\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Configure', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t{ generalSettings.woocommerce_calc_taxes !==\n\t\t\t\t\t\t\t\t'yes' &&\n\t\t\t\t\t\t\t\tinterpolateComponents( {\n\t\t\t\t\t\t\t\t\tmixedString: __(\n\t\t\t\t\t\t\t\t\t\t/*eslint-disable max-len*/\n\t\t\t\t\t\t\t\t\t\t'By clicking \"Configure\" you\\'re enabling tax rates and calculations. More info {{link}}here{{/link}}.',\n\t\t\t\t\t\t\t\t\t\t/*eslint-enable max-len*/\n\t\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tcomponents: {\n\t\t\t\t\t\t\t\t\t\tlink: (\n\t\t\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\t\t\thref=\"https://docs.woocommerce.com/document/setting-up-taxes-in-woocommerce/#section-1\"\n\t\t\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"external\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t} ) }\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</Fragment>\n\t\t\t\t),\n\t\t\t\tvisible: ! this.isTaxJarSupported(),\n\t\t\t},\n\t\t];\n\n\t\treturn filter( steps, ( step ) => step.visible );\n\t}\n\n\trenderSuccessScreen() {\n\t\tconst { isPending } = this.props;\n\n\t\treturn (\n\t\t\t<div className=\"woocommerce-task-tax__success\">\n\t\t\t\t<span\n\t\t\t\t\tclassName=\"woocommerce-task-tax__success-icon\"\n\t\t\t\t\trole=\"img\"\n\t\t\t\t\taria-labelledby=\"woocommerce-task-tax__success-message\"\n\t\t\t\t>\n\t\t\t\t\t\n\t\t\t\t</span>\n\t\t\t\t<H id=\"woocommerce-task-tax__success-message\">\n\t\t\t\t\t{ __( 'Good news!', 'woocommerce-admin' ) }\n\t\t\t\t</H>\n\t\t\t\t<p>\n\t\t\t\t\t{ interpolateComponents( {\n\t\t\t\t\t\tmixedString: __(\n\t\t\t\t\t\t\t'{{strong}}Jetpack{{/strong}} and {{strong}}WooCommerce Tax{{/strong}} ' +\n\t\t\t\t\t\t\t\t'can automate your sales tax calculations for you.',\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t),\n\t\t\t\t\t\tcomponents: {\n\t\t\t\t\t\t\tstrong: <strong />,\n\t\t\t\t\t\t},\n\t\t\t\t\t} ) }\n\t\t\t\t</p>\n\t\t\t\t<Button\n\t\t\t\t\tdisabled={ isPending }\n\t\t\t\t\tisPrimary\n\t\t\t\t\tisBusy={ isPending }\n\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\trecordEvent( 'tasklist_tax_setup_automated_proceed', {\n\t\t\t\t\t\t\tsetup_automatically: true,\n\t\t\t\t\t\t} );\n\t\t\t\t\t\tthis.updateAutomatedTax( true );\n\t\t\t\t\t} }\n\t\t\t\t>\n\t\t\t\t\t{ __( 'Yes please', 'woocommerce-admin' ) }\n\t\t\t\t</Button>\n\t\t\t\t<Button\n\t\t\t\t\tdisabled={ isPending }\n\t\t\t\t\tisTertiary\n\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\trecordEvent( 'tasklist_tax_setup_automated_proceed', {\n\t\t\t\t\t\t\tsetup_automatically: false,\n\t\t\t\t\t\t} );\n\t\t\t\t\t\tthis.updateAutomatedTax( false );\n\t\t\t\t\t} }\n\t\t\t\t>\n\t\t\t\t\t{ __(\n\t\t\t\t\t\t\"No thanks, I'll set up manually\",\n\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t) }\n\t\t\t\t</Button>\n\t\t\t\t<Button\n\t\t\t\t\tdisabled={ isPending }\n\t\t\t\t\tisTertiary\n\t\t\t\t\tonClick={ () => this.doNotChargeSalesTax() }\n\t\t\t\t>\n\t\t\t\t\t{ __( \"I don't charge sales tax\", 'woocommerce-admin' ) }\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst { stepIndex } = this.state;\n\t\tconst { isPending, isResolving } = this.props;\n\t\tconst step = this.getSteps()[ stepIndex ];\n\n\t\treturn (\n\t\t\t<div className=\"woocommerce-task-tax\">\n\t\t\t\t<Card className=\"woocommerce-task-card\">\n\t\t\t\t\t<CardBody>\n\t\t\t\t\t\t{ this.shouldShowSuccessScreen() ? (\n\t\t\t\t\t\t\tthis.renderSuccessScreen()\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<Stepper\n\t\t\t\t\t\t\t\tisPending={ isPending || isResolving }\n\t\t\t\t\t\t\t\tisVertical={ true }\n\t\t\t\t\t\t\t\tcurrentStep={ step.key }\n\t\t\t\t\t\t\t\tsteps={ this.getSteps() }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</CardBody>\n\t\t\t\t</Card>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst { getSettings, isUpdateSettingsRequesting } = select(\n\t\t\tSETTINGS_STORE_NAME\n\t\t);\n\t\tconst { getOption } = select( OPTIONS_STORE_NAME );\n\t\tconst {\n\t\t\tgetActivePlugins,\n\t\t\tisJetpackConnected,\n\t\t\tisPluginsRequesting,\n\t\t} = select( PLUGINS_STORE_NAME );\n\t\tconst { getTasksStatus } = select( ONBOARDING_STORE_NAME );\n\n\t\tconst { general: generalSettings = {} } = getSettings( 'general' );\n\t\tconst countryCode = getCountryCode(\n\t\t\tgeneralSettings.woocommerce_default_country\n\t\t);\n\t\tconst {\n\t\t\twoocommerce_store_address: storeAddress,\n\t\t\twoocommerce_default_country: defaultCountry,\n\t\t\twoocommerce_store_postcode: storePostCode,\n\t\t} = generalSettings;\n\t\tconst hasCompleteAddress = Boolean(\n\t\t\tstoreAddress && defaultCountry && storePostCode\n\t\t);\n\n\t\tconst { tax: taxSettings = {} } = getSettings( 'tax' );\n\t\tconst activePlugins = getActivePlugins();\n\t\tconst pluginsToActivate = difference(\n\t\t\t[ 'jetpack', 'woocommerce-services' ],\n\t\t\tactivePlugins\n\t\t);\n\t\tconst connectOptions = getOption( 'wc_connect_options' ) || {};\n\t\tconst tosAccepted =\n\t\t\tconnectOptions.tos_accepted ||\n\t\t\tgetOption( 'woocommerce_setup_jetpack_opted_in' );\n\n\t\tconst tasksStatus = getTasksStatus();\n\n\t\tconst isPending =\n\t\t\tisUpdateSettingsRequesting( 'tax' ) ||\n\t\t\tisUpdateSettingsRequesting( 'general' );\n\t\tconst isResolving = isPluginsRequesting( 'getJetpackConnectUrl' );\n\n\t\treturn {\n\t\t\tcountryCode,\n\t\t\tgeneralSettings,\n\t\t\thasCompleteAddress,\n\t\t\tisJetpackConnected: isJetpackConnected(),\n\t\t\tisPending,\n\t\t\tisResolving,\n\t\t\tpluginsToActivate,\n\t\t\ttasksStatus,\n\t\t\ttaxSettings,\n\t\t\ttosAccepted,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { createNotice } = dispatch( 'core/notices' );\n\t\tconst { updateOptions } = dispatch( OPTIONS_STORE_NAME );\n\t\tconst { updateAndPersistSettingsForGroup } = dispatch(\n\t\t\tSETTINGS_STORE_NAME\n\t\t);\n\t\tconst { invalidateResolutionForStoreSelector } = dispatch(\n\t\t\tONBOARDING_STORE_NAME\n\t\t);\n\n\t\treturn {\n\t\t\tclearTaskStatusCache: () =>\n\t\t\t\tinvalidateResolutionForStoreSelector( 'getTasksStatus' ),\n\t\t\tcreateNotice,\n\t\t\tupdateAndPersistSettingsForGroup,\n\t\t\tupdateOptions,\n\t\t};\n\t} )\n)( Tax );\n"],"sourceRoot":""}