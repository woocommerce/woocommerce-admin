{"version":3,"sources":["webpack://wc.[modulename]/./client/dashboard/components/cart-modal.js","webpack://wc.[modulename]/./client/dashboard/components/connect/index.js","webpack://wc.[modulename]/./client/dashboard/components/settings/general/store-address.js","webpack://wc.[modulename]/./client/lib/in-app-purchase.js","webpack://wc.[modulename]/./client/task-list/index.js","webpack://wc.[modulename]/./client/task-list/tasks.js","webpack://wc.[modulename]/./client/task-list/tasks/appearance.js","webpack://wc.[modulename]/./client/task-list/tasks/payments/index.js","webpack://wc.[modulename]/./client/task-list/tasks/products.js","webpack://wc.[modulename]/./client/task-list/tasks/shipping/index.js","webpack://wc.[modulename]/./client/task-list/tasks/shipping/rates.js","webpack://wc.[modulename]/./client/task-list/tasks/steps/location.js","webpack://wc.[modulename]/./client/task-list/tasks/tax.js","webpack://wc.[modulename]/./node_modules/@babel/runtime/helpers/asyncToGenerator.js"],"names":["CartModal","props","state","purchaseNowButtonBusy","purchaseLaterButtonBusy","productIds","onClickPurchaseNow","setState","length","recordEvent","product_ids","purchase_install","url","getInAppPurchaseUrl","join","window","location","onClickPurchaseLater","onClose","getSetting","productTypes","themes","listItems","forEach","productId","productInfo","find","productType","product","push","title","label","content","description","themeInfo","theme","id","sprintf","__","decodeEntities","price","sanitizeHTML","excerpt","renderProducts","Component","compose","withSelect","select","PLUGINS_STORE_NAME","getInstalledPlugins","ONBOARDING_STORE_NAME","getProfileItems","profileItems","installedPlugins","getProductIdsForCart","Connect","isConnecting","connectJetpack","bind","setIsPending","prevProps","createNotice","error","isRequesting","onError","jetpackConnectUrl","onConnect","hasErrors","onSkip","skipText","onAbort","abortText","reload","propTypes","PropTypes","func","isRequired","string","bool","redirectUrl","defaultProps","getJetpackConnectUrl","isPluginsRequesting","getPluginsError","queryArgs","redirect_url","href","withDispatch","dispatch","countries","validateStoreAddress","values","errors","addressLine1","countryState","city","postCode","getCountryStateOptions","countryStateOptions","reduce","acc","country","states","key","code","name","countryStates","map","useGetCountryStateAutofill","options","setValue","useState","autofillCountry","setAutofillCountry","autofillState","setAutofillState","useEffect","filteredOptions","countrySearch","RegExp","escapeRegExp","filter","option","test","stateSearch","replace","countryKeyOptions","stateKeyOptions","event","target","value","StoreAddress","getInputProps","useMemo","countryStateAutofill","className","pathname","search","connectNonce","addQueryArgs","TaskDashboard","isCartModalOpen","document","body","classList","add","recordTaskView","recordTaskListView","possiblyCompleteTaskList","possiblyTrackCompletedTasks","query","prevQuery","prevTask","task","documentElement","scrollTop","isTaskListComplete","updateOptions","getIncompleteTasks","woocommerce_task_list_complete","woocommerce_default_homepage_layout","getVisibleTasks","completed","getAllTasks","visible","trackedCompletedTasks","completedTaskKeys","getCompletedTaskKeys","xor","woocommerce_task_list_tracked_completed_tasks","dismissedTasks","actions","onClick","undoDismissTask","task_name","woocommerce_task_list_dismissed_tasks","updatedDismissedTasks","remove","activePlugins","countryCode","installAndActivatePlugins","isJetpackConnected","onboardingStatus","toggleCartModal","includes","taskName","recordTaskViewEvent","getCurrentTask","tasks","number_tasks","store_connected","wccom_connected","action","completed_task_count","incomplete_task_count","woocommerce_task_list_hidden","woocommerce_task_list_prompt_shown","currentTask","s","hideTaskCard","listTasks","classNames","before","check","additionalInfo","time","isDismissable","after","stopPropagation","dismissTask","e","nodeName","updateQueryString","cloneElement","container","renderMenu","getTasksStatus","OPTIONS_STORE_NAME","getOption","SETTINGS_STORE_NAME","getSettings","getActivePlugins","general","generalSettings","getCountryCode","woocommerce_default_country","wcs_installed","wcs_active","jetpack_installed","jetpack_active","jetpack_connected","hasPaymentGateway","hasPhysicalProducts","hasProducts","isAppearanceComplete","isTaxComplete","shippingZonesCount","wcPayIsConnected","groupedProducts","getCategorizedOnboardingProducts","products","remainingProducts","uniqueItemsList","woocommercePaymentsInstalled","indexOf","profilerCompleted","product_types","purchaseAndInstallText","itemName","itemType","type","purchaseAndInstallFormat","getHistory","getNewPath","Promise","resolve","reject","installActivateAndConnectWcpay","wcAdminFeatures","wcpay","applyFilters","sort","a","b","Appearance","tasksStatus","hasHomepage","stepVisibility","homepage","import","isDirty","isPending","logo","stepIndex","isUpdatingLogo","isUpdatingNotice","storeNoticeText","demoStoreNotice","completeStep","createHomepage","importProducts","updateLogo","updateNotice","themeMods","custom_logo","wp","media","attachment","fetch","then","logoUrl","get","nextStep","getSteps","clearTaskStatusCache","apiFetch","path","WC_ADMIN_NAMESPACE","method","result","failed","catch","message","create_homepage","response","status","edit_post_link","queueRecordEvent","stylesheet","updatedThemeMods","update","success","added_text","Boolean","woocommerce_task_list_appearance_complete","woocommerce_demo_store","woocommerce_demo_store_notice","steps","image","step","currentStep","invalidateResolutionForStoreSelector","Payments","arguments","methods","enabledMethods","isEnabled","busyMethod","recommendedMethod","getRecommendedMethod","markConfigured","m","payment_method","currentMethod","getCurrentMethod","plugins","pluginsToInstall","pluginNamesString","pluginSlug","pluginNames","createNoticesFromResponse","isComplete","enabled","optionName","selected","installStep","getInstallStep","hasCbdIndustry","isConfigured","classes","classnames","isRecommended","showRecommendedRibbon","showRecommendedPill","handleClick","toggleMethod","invalidateResolution","optionNames","getPaymentMethods","subTasks","getAdminLink","Products","Shipping","initialState","shippingZones","reset","countryName","zones","hasCountryZone","all","zone","toggleable","locations","countryLocation","data","reverse","prevState","settings","storeAddress","woocommerce_store_address","defaultCountry","storePostCode","woocommerce_store_postcode","fetchShippingZones","isCompleteAddress","currentStepIndex","findIndex","difference","pluginsToActivate","getPluginsToActivate","requiresJetpackConnection","interpolateComponents","mixedString","components","link","install","plugins_to_activate","isUpdateSettingsRequesting","c","updateAndPersistSettingsForGroup","ShippingRates","updateShippingZones","Array","isArray","method_id","instance_id","restOfTheWorld","shippingCost","parseFloat","shippingMethods","getShippingMethods","methodType","shippingMethod","disableShippingMethods","methodsToDisable","cost","shipping_cost","rest_world","onComplete","context","getCurrencyConfig","symbolPosition","symbol","rate","formatDecimalString","currencyString","getFormattedRate","rates","Object","keys","field","endsWith","buttonText","getInitialValues","validate","handleSubmit","setTouched","renderInputPrefix","renderInputSuffix","array","contextType","CurrencyContext","StoreLocation","onSubmit","isSettingsError","woocommerce_store_address_2","addressLine2","woocommerce_store_city","storeAddress2","storeCity","storePostcode","isSettingsRequesting","Tax","hasCompleteAddress","cachedPluginsToActivate","isTaxJarSupported","automatedTaxSupportedCountries","taxJarActivated","woocommerce_calc_taxes","redirectToTaxSettings","isEnabling","taxSettings","tax","wc_connect_taxes_enabled","connect","no_tax","woocommerce_no_sales_tax","tosAccepted","install_extensions","woocommerce_setup_jetpack_opted_in","manuallyConfigureTaxRates","doNotChargeSalesTax","strong","setup_automatically","updateAutomatedTax","isResolving","shouldShowSuccessScreen","renderSuccessScreen","connectOptions","tos_accepted"],"mappings":"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","file":"chunks/task-list.min.js","sourcesContent":["/**\n * External dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport { Component } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport { Button, Modal } from '@wordpress/components';\nimport { find } from 'lodash';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { withSelect } from '@wordpress/data';\nimport { getSetting } from '@woocommerce/wc-admin-settings';\nimport { List } from '@woocommerce/components';\nimport { ONBOARDING_STORE_NAME, PLUGINS_STORE_NAME } from '@woocommerce/data';\nimport { recordEvent } from '@woocommerce/tracks';\n\n/**\n * Internal dependencies\n */\nimport { getProductIdsForCart } from '../utils';\nimport sanitizeHTML from '../../lib/sanitize-html';\nimport { getInAppPurchaseUrl } from '../../lib/in-app-purchase';\n\nclass CartModal extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.state = {\n\t\t\tpurchaseNowButtonBusy: false,\n\t\t\tpurchaseLaterButtonBusy: false,\n\t\t};\n\t}\n\n\tonClickPurchaseNow() {\n\t\tconst { productIds, onClickPurchaseNow } = this.props;\n\t\tthis.setState( { purchaseNowButtonBusy: true } );\n\t\tif ( ! productIds.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\trecordEvent( 'tasklist_modal_proceed_checkout', {\n\t\t\tproduct_ids: productIds,\n\t\t\tpurchase_install: true,\n\t\t} );\n\n\t\tconst url = getInAppPurchaseUrl( 'https://woocommerce.com/cart', {\n\t\t\t'wccom-replace-with': productIds.join( ',' ),\n\t\t} );\n\n\t\tif ( onClickPurchaseNow ) {\n\t\t\tonClickPurchaseNow( url );\n\t\t\treturn;\n\t\t}\n\n\t\twindow.location = url;\n\t}\n\n\tonClickPurchaseLater() {\n\t\tconst { productIds } = this.props;\n\n\t\trecordEvent( 'tasklist_modal_proceed_checkout', {\n\t\t\tproduct_ids: productIds,\n\t\t\tpurchase_install: false,\n\t\t} );\n\n\t\tthis.setState( { purchaseLaterButtonBusy: true } );\n\t\tthis.props.onClickPurchaseLater();\n\t}\n\n\tonClose() {\n\t\tconst { onClose, productIds } = this.props;\n\n\t\trecordEvent( 'tasklist_modal_proceed_checkout', {\n\t\t\tproduct_ids: productIds,\n\t\t\tpurchase_install: false,\n\t\t} );\n\n\t\tonClose();\n\t}\n\n\trenderProducts() {\n\t\tconst { productIds } = this.props;\n\t\tconst { productTypes = {}, themes = [] } = getSetting(\n\t\t\t'onboarding',\n\t\t\t{}\n\t\t);\n\t\tconst listItems = [];\n\n\t\tproductIds.forEach( ( productId ) => {\n\t\t\tconst productInfo = find( productTypes, ( productType ) => {\n\t\t\t\treturn productType.product === productId;\n\t\t\t} );\n\n\t\t\tif ( productInfo ) {\n\t\t\t\tlistItems.push( {\n\t\t\t\t\ttitle: productInfo.label,\n\t\t\t\t\tcontent: productInfo.description,\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tconst themeInfo = find( themes, ( theme ) => {\n\t\t\t\treturn theme.id === productId;\n\t\t\t} );\n\n\t\t\tif ( themeInfo ) {\n\t\t\t\tlistItems.push( {\n\t\t\t\t\ttitle: sprintf(\n\t\t\t\t\t\t__( '%s  %s per year', 'woocommerce-admin' ),\n\t\t\t\t\t\tthemeInfo.title,\n\t\t\t\t\t\tdecodeEntities( themeInfo.price )\n\t\t\t\t\t),\n\t\t\t\t\tcontent: (\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tdangerouslySetInnerHTML={ sanitizeHTML(\n\t\t\t\t\t\t\t\tthemeInfo.excerpt\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t),\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\n\t\treturn <List items={ listItems } />;\n\t}\n\n\trender() {\n\t\tconst { purchaseNowButtonBusy, purchaseLaterButtonBusy } = this.state;\n\t\treturn (\n\t\t\t<Modal\n\t\t\t\ttitle={ __(\n\t\t\t\t\t'Would you like to purchase and install the following features now?',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t) }\n\t\t\t\tonRequestClose={ () => this.onClose() }\n\t\t\t\tclassName=\"woocommerce-cart-modal\"\n\t\t\t>\n\t\t\t\t{ this.renderProducts() }\n\n\t\t\t\t<p className=\"woocommerce-cart-modal__help-text\">\n\t\t\t\t\t{ __(\n\t\t\t\t\t\t\"You won't have access to this functionality until the extensions have been purchased and installed.\",\n\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t) }\n\t\t\t\t</p>\n\n\t\t\t\t<div className=\"woocommerce-cart-modal__actions\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\tisLink\n\t\t\t\t\t\tisBusy={ purchaseLaterButtonBusy }\n\t\t\t\t\t\tonClick={ () => this.onClickPurchaseLater() }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( \"I'll do it later\", 'woocommerce-admin' ) }\n\t\t\t\t\t</Button>\n\n\t\t\t\t\t<Button\n\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\tisBusy={ purchaseNowButtonBusy }\n\t\t\t\t\t\tonClick={ () => this.onClickPurchaseNow() }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Purchase & install now', 'woocommerce-admin' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</Modal>\n\t\t);\n\t}\n}\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst { getInstalledPlugins } = select( PLUGINS_STORE_NAME );\n\t\tconst { getProfileItems } = select( ONBOARDING_STORE_NAME );\n\t\tconst profileItems = getProfileItems();\n\t\tconst installedPlugins = getInstalledPlugins();\n\t\tconst productIds = getProductIdsForCart(\n\t\t\tprofileItems,\n\t\t\tfalse,\n\t\t\tinstalledPlugins\n\t\t);\n\n\t\treturn { profileItems, productIds };\n\t} )\n)( CartModal );\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Button } from '@wordpress/components';\nimport { Component, Fragment } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport PropTypes from 'prop-types';\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { PLUGINS_STORE_NAME } from '@woocommerce/data';\n\nexport class Connect extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.state = {\n\t\t\tisConnecting: false,\n\t\t};\n\n\t\tthis.connectJetpack = this.connectJetpack.bind( this );\n\t\tprops.setIsPending( true );\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tconst {\n\t\t\tcreateNotice,\n\t\t\terror,\n\t\t\tisRequesting,\n\t\t\tonError,\n\t\t\tsetIsPending,\n\t\t} = this.props;\n\n\t\tif ( prevProps.isRequesting && ! isRequesting ) {\n\t\t\tsetIsPending( false );\n\t\t}\n\n\t\tif ( error && error !== prevProps.error ) {\n\t\t\tif ( onError ) {\n\t\t\t\tonError();\n\t\t\t}\n\t\t\tcreateNotice( 'error', error );\n\t\t}\n\t}\n\n\tasync connectJetpack() {\n\t\tconst { jetpackConnectUrl, onConnect } = this.props;\n\n\t\tthis.setState(\n\t\t\t{\n\t\t\t\tisConnecting: true,\n\t\t\t},\n\t\t\t() => {\n\t\t\t\tif ( onConnect ) {\n\t\t\t\t\tonConnect();\n\t\t\t\t}\n\t\t\t\twindow.location = jetpackConnectUrl;\n\t\t\t}\n\t\t);\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\thasErrors,\n\t\t\tisRequesting,\n\t\t\tonSkip,\n\t\t\tskipText,\n\t\t\tonAbort,\n\t\t\tabortText,\n\t\t} = this.props;\n\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t{ hasErrors ? (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\tonClick={ () => window.location.reload() }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Retry', 'woocommerce-admin' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t) : (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tdisabled={ isRequesting }\n\t\t\t\t\t\tisBusy={ this.state.isConnecting }\n\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\tonClick={ this.connectJetpack }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Connect', 'woocommerce-admin' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t) }\n\t\t\t\t{ onSkip && (\n\t\t\t\t\t<Button onClick={ onSkip }>\n\t\t\t\t\t\t{ skipText || __( 'No thanks', 'woocommerce-admin' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t) }\n\t\t\t\t{ onAbort && (\n\t\t\t\t\t<Button onClick={ onAbort }>\n\t\t\t\t\t\t{ abortText || __( 'Abort', 'woocommerce-admin' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t) }\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n\nConnect.propTypes = {\n\t/**\n\t * Method to create a displayed notice.\n\t */\n\tcreateNotice: PropTypes.func.isRequired,\n\t/**\n\t * Human readable error message.\n\t */\n\terror: PropTypes.string,\n\t/**\n\t * Bool to determine if the \"Retry\" button should be displayed.\n\t */\n\thasErrors: PropTypes.bool,\n\t/**\n\t * Bool to check if the connection URL is still being requested.\n\t */\n\tisRequesting: PropTypes.bool,\n\t/**\n\t * Generated Jetpack connection URL.\n\t */\n\tjetpackConnectUrl: PropTypes.string,\n\t/**\n\t * Called before the redirect to Jetpack.\n\t */\n\tonConnect: PropTypes.func,\n\t/**\n\t * Called when the plugin has an error retrieving the jetpackConnectUrl.\n\t */\n\tonError: PropTypes.func,\n\t/**\n\t * Called when the plugin connection is skipped.\n\t */\n\tonSkip: PropTypes.func,\n\t/**\n\t * Redirect URL to encode as a URL param for the connection path.\n\t */\n\tredirectUrl: PropTypes.string,\n\t/**\n\t * Text used for the skip connection button.\n\t */\n\tskipText: PropTypes.string,\n\t/**\n\t * Control the `isPending` logic of the parent containing the Stepper.\n\t */\n\tsetIsPending: PropTypes.func,\n\t/**\n\t * Called when the plugin connection is aborted.\n\t */\n\tonAbort: PropTypes.func,\n\t/**\n\t * Text used for the abort connection button.\n\t */\n\tabortText: PropTypes.string,\n};\n\nConnect.defaultProps = {\n\tsetIsPending: () => {},\n};\n\nexport default compose(\n\twithSelect( ( select, props ) => {\n\t\tconst {\n\t\t\tgetJetpackConnectUrl,\n\t\t\tisPluginsRequesting,\n\t\t\tgetPluginsError,\n\t\t} = select( PLUGINS_STORE_NAME );\n\n\t\tconst queryArgs = {\n\t\t\tredirect_url: props.redirectUrl || window.location.href,\n\t\t};\n\t\tconst isRequesting = isPluginsRequesting( 'getJetpackConnectUrl' );\n\t\tconst error = getPluginsError( 'getJetpackConnectUrl' ) || '';\n\t\tconst jetpackConnectUrl = getJetpackConnectUrl( queryArgs );\n\n\t\treturn {\n\t\t\terror,\n\t\t\tisRequesting,\n\t\t\tjetpackConnectUrl,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { createNotice } = dispatch( 'core/notices' );\n\n\t\treturn {\n\t\t\tcreateNotice,\n\t\t};\n\t} )\n)( Connect );\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { escapeRegExp } from 'lodash';\nimport { Fragment, useEffect, useMemo, useState } from '@wordpress/element';\nimport { getSetting } from '@woocommerce/wc-admin-settings';\nimport { SelectControl, TextControl } from '@woocommerce/components';\n\nconst { countries } = getSetting( 'dataEndpoints', { countries: {} } );\n/**\n * Form validation.\n *\n * @param {Object} values Keyed values of all fields in the form.\n * @return {Object} Key value of fields and error messages, { myField: 'This field is required' }\n */\nexport function validateStoreAddress( values ) {\n\tconst errors = {};\n\n\tif ( ! values.addressLine1.length ) {\n\t\terrors.addressLine1 = __(\n\t\t\t'Please add an address',\n\t\t\t'woocommerce-admin'\n\t\t);\n\t}\n\tif ( ! values.countryState.length ) {\n\t\terrors.countryState = __(\n\t\t\t'Please select a country / region',\n\t\t\t'woocommerce-admin'\n\t\t);\n\t}\n\tif ( ! values.city.length ) {\n\t\terrors.city = __( 'Please add a city', 'woocommerce-admin' );\n\t}\n\tif ( ! values.postCode.length ) {\n\t\terrors.postCode = __( 'Please add a post code', 'woocommerce-admin' );\n\t}\n\n\treturn errors;\n}\n\n/**\n * Get all country and state combinations used for select dropdowns.\n *\n * @return {Object} Select options, { value: 'US:GA', label: 'United States - Georgia' }\n */\nexport function getCountryStateOptions() {\n\tconst countryStateOptions = countries.reduce( ( acc, country ) => {\n\t\tif ( ! country.states.length ) {\n\t\t\tacc.push( {\n\t\t\t\tkey: country.code,\n\t\t\t\tlabel: decodeEntities( country.name ),\n\t\t\t} );\n\n\t\t\treturn acc;\n\t\t}\n\n\t\tconst countryStates = country.states.map( ( state ) => {\n\t\t\treturn {\n\t\t\t\tkey: country.code + ':' + state.code,\n\t\t\t\tlabel:\n\t\t\t\t\tdecodeEntities( country.name ) +\n\t\t\t\t\t'  ' +\n\t\t\t\t\tdecodeEntities( state.name ),\n\t\t\t};\n\t\t} );\n\n\t\tacc.push( ...countryStates );\n\n\t\treturn acc;\n\t}, [] );\n\n\treturn countryStateOptions;\n}\n\n/**\n * Get the autofill countryState fields and set value from filtered options.\n *\n * @param {Array} options Array of filterable options.\n * @param {string} countryState The value of the countryState field.\n * @param {Function} setValue Set value of the countryState input.\n * @return {Object} React component.\n */\nexport function useGetCountryStateAutofill( options, countryState, setValue ) {\n\tconst [ autofillCountry, setAutofillCountry ] = useState( '' );\n\tconst [ autofillState, setAutofillState ] = useState( '' );\n\n\tuseEffect( () => {\n\t\tlet filteredOptions = [];\n\t\tconst countrySearch = new RegExp(\n\t\t\tescapeRegExp( autofillCountry ),\n\t\t\t'i'\n\t\t);\n\t\tif ( autofillState.length || autofillCountry.length ) {\n\t\t\tfilteredOptions = options.filter( ( option ) =>\n\t\t\t\tcountrySearch.test( option.label )\n\t\t\t);\n\t\t}\n\t\tif ( autofillCountry.length && autofillState.length ) {\n\t\t\tconst stateSearch = new RegExp(\n\t\t\t\tescapeRegExp( autofillState.replace( /\\s/g, '' ) ),\n\t\t\t\t'i'\n\t\t\t);\n\t\t\tfilteredOptions = filteredOptions.filter( ( option ) =>\n\t\t\t\tstateSearch.test(\n\t\t\t\t\toption.label.replace( '-', '' ).replace( /\\s/g, '' )\n\t\t\t\t)\n\t\t\t);\n\n\t\t\tif ( filteredOptions.length > 1 ) {\n\t\t\t\tlet countryKeyOptions = [];\n\t\t\t\tcountryKeyOptions = filteredOptions.filter( ( option ) =>\n\t\t\t\t\tcountrySearch.test( option.key )\n\t\t\t\t);\n\n\t\t\t\tif ( countryKeyOptions.length > 0 ) {\n\t\t\t\t\tfilteredOptions = countryKeyOptions;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( filteredOptions.length > 1 ) {\n\t\t\t\tlet stateKeyOptions = [];\n\t\t\t\tstateKeyOptions = filteredOptions.filter( ( option ) =>\n\t\t\t\t\tstateSearch.test( option.key )\n\t\t\t\t);\n\n\t\t\t\tif ( stateKeyOptions.length === 1 ) {\n\t\t\t\t\tfilteredOptions = stateKeyOptions;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (\n\t\t\tfilteredOptions.length === 1 &&\n\t\t\tcountryState !== filteredOptions[ 0 ].key\n\t\t) {\n\t\t\tsetValue( 'countryState', filteredOptions[ 0 ].key );\n\t\t}\n\t}, [ autofillCountry, autofillState, countryState, options, setValue ] );\n\n\treturn (\n\t\t<Fragment>\n\t\t\t<input\n\t\t\t\tonChange={ ( event ) =>\n\t\t\t\t\tsetAutofillCountry( event.target.value )\n\t\t\t\t}\n\t\t\t\tvalue={ autofillCountry }\n\t\t\t\tname=\"country\"\n\t\t\t\ttype=\"text\"\n\t\t\t\tclassName=\"woocommerce-select-control__autofill-input\"\n\t\t\t\ttabIndex=\"-1\"\n\t\t\t\tautoComplete=\"country\"\n\t\t\t/>\n\n\t\t\t<input\n\t\t\t\tonChange={ ( event ) => setAutofillState( event.target.value ) }\n\t\t\t\tvalue={ autofillState }\n\t\t\t\tname=\"state\"\n\t\t\t\ttype=\"text\"\n\t\t\t\tclassName=\"woocommerce-select-control__autofill-input\"\n\t\t\t\ttabIndex=\"-1\"\n\t\t\t\tautoComplete=\"address-level1\"\n\t\t\t/>\n\t\t</Fragment>\n\t);\n}\n\n/**\n * Store address fields.\n *\n * @param {Object} props Props for input components.\n * @return {Object} -\n */\nexport function StoreAddress( props ) {\n\tconst { getInputProps, setValue } = props;\n\tconst countryStateOptions = useMemo( () => getCountryStateOptions(), [] );\n\tconst countryStateAutofill = useGetCountryStateAutofill(\n\t\tcountryStateOptions,\n\t\tgetInputProps( 'countryState' ).value,\n\t\tsetValue\n\t);\n\n\treturn (\n\t\t<div className=\"woocommerce-store-address-fields\">\n\t\t\t<TextControl\n\t\t\t\tlabel={ __( 'Address line 1', 'woocommerce-admin' ) }\n\t\t\t\trequired\n\t\t\t\tautoComplete=\"address-line1\"\n\t\t\t\t{ ...getInputProps( 'addressLine1' ) }\n\t\t\t/>\n\n\t\t\t<TextControl\n\t\t\t\tlabel={ __( 'Address line 2 (optional)', 'woocommerce-admin' ) }\n\t\t\t\trequired\n\t\t\t\tautoComplete=\"address-line2\"\n\t\t\t\t{ ...getInputProps( 'addressLine2' ) }\n\t\t\t/>\n\n\t\t\t<SelectControl\n\t\t\t\tlabel={ __( 'Country / Region', 'woocommerce-admin' ) }\n\t\t\t\trequired\n\t\t\t\toptions={ countryStateOptions }\n\t\t\t\texcludeSelectedOptions={ false }\n\t\t\t\tshowAllOnFocus\n\t\t\t\tisSearchable\n\t\t\t\t{ ...getInputProps( 'countryState' ) }\n\t\t\t\tcontrolClassName={ getInputProps( 'countryState' ).className }\n\t\t\t>\n\t\t\t\t{ countryStateAutofill }\n\t\t\t</SelectControl>\n\n\t\t\t<TextControl\n\t\t\t\tlabel={ __( 'City', 'woocommerce-admin' ) }\n\t\t\t\trequired\n\t\t\t\t{ ...getInputProps( 'city' ) }\n\t\t\t\tautoComplete=\"address-level2\"\n\t\t\t/>\n\n\t\t\t<TextControl\n\t\t\t\tlabel={ __( 'Post code', 'woocommerce-admin' ) }\n\t\t\t\trequired\n\t\t\t\tautoComplete=\"postal-code\"\n\t\t\t\t{ ...getInputProps( 'postCode' ) }\n\t\t\t/>\n\t\t</div>\n\t);\n}\n","/**\n * External dependencies\n */\nimport { addQueryArgs } from '@wordpress/url';\nimport { getSetting } from '@woocommerce/wc-admin-settings';\n\n/**\n * Returns an in-app-purchase URL.\n *\n * @param {string} url\n * @param {Object} queryArgs\n * @return {string} url with in-app-purchase query parameters\n */\nexport const getInAppPurchaseUrl = ( url, queryArgs = {} ) => {\n\tconst { pathname, search } = window.location;\n\tconst connectNonce = getSetting( 'connectNonce', '' );\n\tqueryArgs = {\n\t\t'wccom-site': getSetting( 'siteUrl' ),\n\t\t// If the site is installed in a directory the directory must be included in the back param path.\n\t\t'wccom-back': pathname + search,\n\t\t'wccom-woo-version': getSetting( 'wcVersion' ),\n\t\t'wccom-connect-nonce': connectNonce,\n\t\t...queryArgs,\n\t};\n\n\treturn addQueryArgs( url, queryArgs );\n};\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component, cloneElement } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport classNames from 'classnames';\nimport {\n\tButton,\n\tCard,\n\tCardBody,\n\tCardHeader,\n\t__experimentalText as Text,\n} from '@wordpress/components';\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { Icon, check } from '@wordpress/icons';\nimport { xor } from 'lodash';\nimport { List, EllipsisMenu, Badge } from '@woocommerce/components';\nimport { updateQueryString } from '@woocommerce/navigation';\nimport {\n\tPLUGINS_STORE_NAME,\n\tOPTIONS_STORE_NAME,\n\tONBOARDING_STORE_NAME,\n\tSETTINGS_STORE_NAME,\n} from '@woocommerce/data';\nimport { recordEvent } from '@woocommerce/tracks';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport CartModal from '../dashboard/components/cart-modal';\nimport { getAllTasks, recordTaskViewEvent } from './tasks';\nimport { getCountryCode } from '../dashboard/utils';\nimport sanitizeHTML from '../lib/sanitize-html';\n\nexport class TaskDashboard extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.state = {\n\t\t\tisCartModalOpen: false,\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tdocument.body.classList.add( 'woocommerce-onboarding' );\n\t\tdocument.body.classList.add( 'woocommerce-task-dashboard__body' );\n\n\t\tthis.recordTaskView();\n\t\tthis.recordTaskListView();\n\t\tthis.possiblyCompleteTaskList();\n\t\tthis.possiblyTrackCompletedTasks();\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tconst { query } = this.props;\n\t\tconst { query: prevQuery } = prevProps;\n\t\tconst { task: prevTask } = prevQuery;\n\t\tconst { task } = query;\n\n\t\tif ( prevTask !== task ) {\n\t\t\twindow.document.documentElement.scrollTop = 0;\n\t\t\tthis.recordTaskView();\n\t\t}\n\n\t\tthis.possiblyCompleteTaskList();\n\t\tthis.possiblyTrackCompletedTasks();\n\t}\n\n\tpossiblyCompleteTaskList() {\n\t\tconst { isTaskListComplete, updateOptions } = this.props;\n\n\t\tif ( ! this.getIncompleteTasks().length && ! isTaskListComplete ) {\n\t\t\tupdateOptions( {\n\t\t\t\twoocommerce_task_list_complete: 'yes',\n\t\t\t\twoocommerce_default_homepage_layout: 'two_columns',\n\t\t\t} );\n\t\t}\n\t}\n\n\tgetCompletedTaskKeys() {\n\t\treturn this.getVisibleTasks()\n\t\t\t.filter( ( task ) => task.completed )\n\t\t\t.map( ( task ) => task.key );\n\t}\n\n\tgetIncompleteTasks() {\n\t\treturn this.getAllTasks().filter(\n\t\t\t( task ) => task.visible && ! task.completed\n\t\t);\n\t}\n\n\tpossiblyTrackCompletedTasks() {\n\t\tconst { trackedCompletedTasks, updateOptions } = this.props;\n\t\tconst completedTaskKeys = this.getCompletedTaskKeys();\n\n\t\tif ( xor( trackedCompletedTasks, completedTaskKeys ).length !== 0 ) {\n\t\t\tupdateOptions( {\n\t\t\t\twoocommerce_task_list_tracked_completed_tasks: completedTaskKeys,\n\t\t\t} );\n\t\t}\n\t}\n\n\tdismissTask( key ) {\n\t\tconst { createNotice, dismissedTasks, updateOptions } = this.props;\n\n\t\tcreateNotice( 'success', __( 'Task dismissed' ), {\n\t\t\tactions: [\n\t\t\t\t{\n\t\t\t\t\tlabel: __( 'Undo', 'woocommerce-admin' ),\n\t\t\t\t\tonClick: () => this.undoDismissTask( key ),\n\t\t\t\t},\n\t\t\t],\n\t\t} );\n\n\t\trecordEvent( 'tasklist_dismiss_task', { task_name: key } );\n\n\t\tupdateOptions( {\n\t\t\twoocommerce_task_list_dismissed_tasks: [ ...dismissedTasks, key ],\n\t\t} );\n\t}\n\n\tundoDismissTask( key ) {\n\t\tconst { dismissedTasks, updateOptions } = this.props;\n\n\t\tconst updatedDismissedTasks = dismissedTasks.filter(\n\t\t\t( task ) => task !== key\n\t\t);\n\n\t\tupdateOptions( {\n\t\t\twoocommerce_task_list_dismissed_tasks: updatedDismissedTasks,\n\t\t} );\n\t}\n\n\tcomponentWillUnmount() {\n\t\tdocument.body.classList.remove( 'woocommerce-onboarding' );\n\t\tdocument.body.classList.remove( 'woocommerce-task-dashboard__body' );\n\t}\n\n\tgetAllTasks() {\n\t\tconst {\n\t\t\tactivePlugins,\n\t\t\tcountryCode,\n\t\t\tcreateNotice,\n\t\t\tinstallAndActivatePlugins,\n\t\t\tinstalledPlugins,\n\t\t\tisJetpackConnected,\n\t\t\tonboardingStatus,\n\t\t\tprofileItems,\n\t\t\tquery,\n\t\t} = this.props;\n\n\t\treturn getAllTasks( {\n\t\t\tactivePlugins,\n\t\t\tcountryCode,\n\t\t\tcreateNotice,\n\t\t\tinstallAndActivatePlugins,\n\t\t\tinstalledPlugins,\n\t\t\tisJetpackConnected,\n\t\t\tonboardingStatus,\n\t\t\tprofileItems,\n\t\t\tquery,\n\t\t\ttoggleCartModal: this.toggleCartModal.bind( this ),\n\t\t} );\n\t}\n\n\tgetVisibleTasks() {\n\t\tconst { dismissedTasks } = this.props;\n\n\t\treturn this.getAllTasks().filter(\n\t\t\t( task ) => task.visible && ! dismissedTasks.includes( task.key )\n\t\t);\n\t}\n\n\trecordTaskView() {\n\t\tconst {\n\t\t\tisJetpackConnected,\n\t\t\tactivePlugins,\n\t\t\tinstalledPlugins,\n\t\t\tquery,\n\t\t} = this.props;\n\t\tconst { task: taskName } = query;\n\n\t\tif ( ! taskName ) {\n\t\t\treturn;\n\t\t}\n\n\t\trecordTaskViewEvent(\n\t\t\ttaskName,\n\t\t\tisJetpackConnected,\n\t\t\tactivePlugins,\n\t\t\tinstalledPlugins\n\t\t);\n\t}\n\n\trecordTaskListView() {\n\t\tif ( this.getCurrentTask() ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { profileItems } = this.props;\n\t\tconst tasks = this.getVisibleTasks();\n\n\t\trecordEvent( 'tasklist_view', {\n\t\t\tnumber_tasks: tasks.length,\n\t\t\tstore_connected: profileItems.wccom_connected,\n\t\t} );\n\t}\n\n\thideTaskCard( action ) {\n\t\trecordEvent( 'tasklist_completed', {\n\t\t\taction,\n\t\t\tcompleted_task_count: this.getCompletedTaskKeys().length,\n\t\t\tincomplete_task_count: this.getIncompleteTasks().length,\n\t\t} );\n\t\tthis.props.updateOptions( {\n\t\t\twoocommerce_task_list_hidden: 'yes',\n\t\t\twoocommerce_task_list_prompt_shown: true,\n\t\t\twoocommerce_default_homepage_layout: 'two_columns',\n\t\t} );\n\t}\n\n\tgetCurrentTask() {\n\t\tconst { query } = this.props;\n\t\tconst { task } = query;\n\t\tconst currentTask = this.getAllTasks().find( ( s ) => s.key === task );\n\n\t\tif ( ! currentTask ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn currentTask;\n\t}\n\n\trenderMenu() {\n\t\treturn (\n\t\t\t<div className=\"woocommerce-card__menu woocommerce-card__header-item\">\n\t\t\t\t<EllipsisMenu\n\t\t\t\t\tlabel={ __( 'Task List Options', 'woocommerce-admin' ) }\n\t\t\t\t\trenderContent={ () => (\n\t\t\t\t\t\t<div className=\"woocommerce-task-card__section-controls\">\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\t\t\tthis.hideTaskCard( 'remove_card' )\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ __( 'Hide this', 'woocommerce-admin' ) }\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) }\n\t\t\t\t/>\n\t\t\t</div>\n\t\t);\n\t}\n\n\ttoggleCartModal() {\n\t\tconst { isCartModalOpen } = this.state;\n\n\t\tif ( ! isCartModalOpen ) {\n\t\t\trecordEvent( 'tasklist_purchase_extensions' );\n\t\t}\n\n\t\tthis.setState( { isCartModalOpen: ! isCartModalOpen } );\n\t}\n\n\trender() {\n\t\tconst { query } = this.props;\n\t\tconst { isCartModalOpen } = this.state;\n\t\tconst currentTask = this.getCurrentTask();\n\t\tconst listTasks = this.getVisibleTasks().map( ( task ) => {\n\t\t\ttask.className = classNames(\n\t\t\t\ttask.completed ? 'is-complete' : null,\n\t\t\t\ttask.className\n\t\t\t);\n\t\t\ttask.before = (\n\t\t\t\t<div className=\"woocommerce-task__icon\">\n\t\t\t\t\t{ task.completed && <Icon icon={ check } /> }\n\t\t\t\t</div>\n\t\t\t);\n\n\t\t\ttask.title = (\n\t\t\t\t<Text\n\t\t\t\t\tas=\"div\"\n\t\t\t\t\tvariant={ task.completed ? 'body.small' : 'button' }\n\t\t\t\t>\n\t\t\t\t\t{ task.title }\n\t\t\t\t\t{ task.additionalInfo && (\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"woocommerce-task__additional-info\"\n\t\t\t\t\t\t\tdangerouslySetInnerHTML={ sanitizeHTML(\n\t\t\t\t\t\t\t\ttask.additionalInfo\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t></div>\n\t\t\t\t\t) }\n\t\t\t\t\t{ task.time && ! task.completed && (\n\t\t\t\t\t\t<div className=\"woocommerce-task__estimated-time\">\n\t\t\t\t\t\t\t{ task.time }\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) }\n\t\t\t\t</Text>\n\t\t\t);\n\n\t\t\tif ( ! task.completed && task.isDismissable ) {\n\t\t\t\ttask.after = (\n\t\t\t\t\t<Button\n\t\t\t\t\t\tdata-testid={ `${ task.key }-dismiss-button` }\n\t\t\t\t\t\tisTertiary\n\t\t\t\t\t\tonClick={ ( event ) => {\n\t\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t\t\tthis.dismissTask( task.key );\n\t\t\t\t\t\t} }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Dismiss', 'woocommerce-admin' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif ( ! task.onClick ) {\n\t\t\t\ttask.onClick = ( e ) => {\n\t\t\t\t\tif ( e.target.nodeName === 'A' ) {\n\t\t\t\t\t\t// This is a nested link, so don't activate this task.\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tupdateQueryString( { task: task.key } );\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn task;\n\t\t} );\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div className=\"woocommerce-task-dashboard__container\">\n\t\t\t\t\t{ currentTask ? (\n\t\t\t\t\t\tcloneElement( currentTask.container, {\n\t\t\t\t\t\t\tquery,\n\t\t\t\t\t\t} )\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<Card\n\t\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\t\tclassName=\"woocommerce-task-card woocommerce-homescreen-card\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<CardHeader size=\"medium\">\n\t\t\t\t\t\t\t\t\t<div className=\"wooocommerce-task-card__header\">\n\t\t\t\t\t\t\t\t\t\t<Text variant=\"title.small\">\n\t\t\t\t\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t\t\t\t\t'Finish setup',\n\t\t\t\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t\t\t\t<Badge\n\t\t\t\t\t\t\t\t\t\t\tcount={\n\t\t\t\t\t\t\t\t\t\t\t\tthis.getIncompleteTasks().length\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t{ this.renderMenu() }\n\t\t\t\t\t\t\t\t</CardHeader>\n\t\t\t\t\t\t\t\t<CardBody>\n\t\t\t\t\t\t\t\t\t<List items={ listTasks } />\n\t\t\t\t\t\t\t\t</CardBody>\n\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t</>\n\t\t\t\t\t) }\n\t\t\t\t</div>\n\t\t\t\t{ isCartModalOpen && (\n\t\t\t\t\t<CartModal\n\t\t\t\t\t\tonClose={ () => this.toggleCartModal() }\n\t\t\t\t\t\tonClickPurchaseLater={ () => this.toggleCartModal() }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</>\n\t\t);\n\t}\n}\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst { getProfileItems, getTasksStatus } = select(\n\t\t\tONBOARDING_STORE_NAME\n\t\t);\n\t\tconst { getOption } = select( OPTIONS_STORE_NAME );\n\t\tconst { getSettings } = select( SETTINGS_STORE_NAME );\n\t\tconst {\n\t\t\tgetActivePlugins,\n\t\t\tgetInstalledPlugins,\n\t\t\tisJetpackConnected,\n\t\t} = select( PLUGINS_STORE_NAME );\n\t\tconst profileItems = getProfileItems();\n\n\t\tconst isTaskListComplete =\n\t\t\tgetOption( 'woocommerce_task_list_complete' ) === 'yes';\n\t\tconst trackedCompletedTasks =\n\t\t\tgetOption( 'woocommerce_task_list_tracked_completed_tasks' ) || [];\n\t\tconst dismissedTasks =\n\t\t\tgetOption( 'woocommerce_task_list_dismissed_tasks' ) || [];\n\n\t\tconst { general: generalSettings = {} } = getSettings( 'general' );\n\t\tconst countryCode = getCountryCode(\n\t\t\tgeneralSettings.woocommerce_default_country\n\t\t);\n\n\t\tconst activePlugins = getActivePlugins();\n\t\tconst installedPlugins = getInstalledPlugins();\n\t\tconst onboardingStatus = getTasksStatus();\n\n\t\treturn {\n\t\t\tactivePlugins,\n\t\t\tcountryCode,\n\t\t\tdismissedTasks,\n\t\t\tisJetpackConnected: isJetpackConnected(),\n\t\t\tinstalledPlugins,\n\t\t\tisTaskListComplete,\n\t\t\tonboardingStatus,\n\t\t\tprofileItems,\n\t\t\ttrackedCompletedTasks,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { createNotice } = dispatch( 'core/notices' );\n\t\tconst { updateOptions } = dispatch( OPTIONS_STORE_NAME );\n\t\tconst { installAndActivatePlugins } = dispatch( PLUGINS_STORE_NAME );\n\n\t\treturn {\n\t\t\tcreateNotice,\n\t\t\tinstallAndActivatePlugins,\n\t\t\tupdateOptions,\n\t\t};\n\t} )\n)( TaskDashboard );\n","/**\n * External dependencies\n */\n\nimport { __, sprintf } from '@wordpress/i18n';\nimport { applyFilters } from '@wordpress/hooks';\nimport {\n\tgetHistory,\n\tgetNewPath,\n\tupdateQueryString,\n} from '@woocommerce/navigation';\nimport { Fragment } from '@wordpress/element';\nimport { recordEvent } from '@woocommerce/tracks';\n\n/**\n * Internal dependencies\n */\nimport Appearance from './tasks/appearance';\nimport { getCategorizedOnboardingProducts } from '../dashboard/utils';\nimport Products from './tasks/products';\nimport Shipping from './tasks/shipping';\nimport Tax from './tasks/tax';\nimport Payments from './tasks/payments';\nimport { installActivateAndConnectWcpay } from './tasks/payments/methods';\n\nexport function recordTaskViewEvent(\n\ttaskName,\n\tisJetpackConnected,\n\tactivePlugins,\n\tinstalledPlugins\n) {\n\trecordEvent( 'task_view', {\n\t\ttask_name: taskName,\n\t\twcs_installed: installedPlugins.includes( 'woocommerce-services' ),\n\t\twcs_active: activePlugins.includes( 'woocommerce-services' ),\n\t\tjetpack_installed: installedPlugins.includes( 'jetpack' ),\n\t\tjetpack_active: activePlugins.includes( 'jetpack' ),\n\t\tjetpack_connected: isJetpackConnected,\n\t} );\n}\n\nexport function getAllTasks( {\n\tactivePlugins,\n\tcountryCode,\n\tcreateNotice,\n\tinstallAndActivatePlugins,\n\tinstalledPlugins,\n\tisJetpackConnected,\n\tonboardingStatus,\n\tprofileItems,\n\tquery,\n\ttoggleCartModal,\n} ) {\n\tconst {\n\t\thasPaymentGateway,\n\t\thasPhysicalProducts,\n\t\thasProducts,\n\t\tisAppearanceComplete,\n\t\tisTaxComplete,\n\t\tshippingZonesCount,\n\t\twcPayIsConnected,\n\t} = {\n\t\thasPaymentGateway: false,\n\t\thasPhysicalProducts: false,\n\t\thasProducts: false,\n\t\tisAppearanceComplete: false,\n\t\tisTaxComplete: false,\n\t\tshippingZonesCount: 0,\n\t\twcPayIsConnected: false,\n\t\t...onboardingStatus,\n\t};\n\n\tconst groupedProducts = getCategorizedOnboardingProducts(\n\t\tprofileItems,\n\t\tinstalledPlugins\n\t);\n\tconst { products, remainingProducts, uniqueItemsList } = groupedProducts;\n\n\tconst woocommercePaymentsInstalled =\n\t\tinstalledPlugins.indexOf( 'woocommerce-payments' ) !== -1;\n\tconst {\n\t\tcompleted: profilerCompleted,\n\t\tproduct_types: productTypes,\n\t} = profileItems;\n\n\tlet purchaseAndInstallText = __( 'Purchase & install extensions' );\n\n\tif ( uniqueItemsList.length === 1 ) {\n\t\tconst { name: itemName, type: itemType } = uniqueItemsList[ 0 ];\n\t\tconst purchaseAndInstallFormat =\n\t\t\titemType === 'theme'\n\t\t\t\t? __( 'Purchase & install %s theme', 'woocommerce-admin' )\n\t\t\t\t: __( 'Purchase & install %s extension', 'woocommerce-admin' );\n\t\tpurchaseAndInstallText = sprintf( purchaseAndInstallFormat, itemName );\n\t}\n\n\tconst tasks = [\n\t\t{\n\t\t\tkey: 'store_details',\n\t\t\ttitle: __( 'Store details', 'woocommerce-admin' ),\n\t\t\tcontainer: null,\n\t\t\tonClick: () => {\n\t\t\t\trecordEvent( 'tasklist_click', {\n\t\t\t\t\ttask_name: 'store_details',\n\t\t\t\t} );\n\t\t\t\tgetHistory().push( getNewPath( {}, '/setup-wizard', {} ) );\n\t\t\t},\n\t\t\tcompleted: profilerCompleted,\n\t\t\tvisible: true,\n\t\t\ttime: __( '4 minutes', 'woocommerce-admin' ),\n\t\t},\n\t\t{\n\t\t\tkey: 'purchase',\n\t\t\ttitle: purchaseAndInstallText,\n\t\t\tcontainer: null,\n\t\t\tonClick: () => {\n\t\t\t\trecordEvent( 'tasklist_click', {\n\t\t\t\t\ttask_name: 'purchase',\n\t\t\t\t} );\n\t\t\t\treturn remainingProducts.length ? toggleCartModal() : null;\n\t\t\t},\n\t\t\tvisible: products.length,\n\t\t\tcompleted: products.length && ! remainingProducts.length,\n\t\t\ttime: __( '2 minutes', 'woocommerce-admin' ),\n\t\t\tisDismissable: true,\n\t\t},\n\t\t{\n\t\t\tkey: 'products',\n\t\t\ttitle: __( 'Add my products', 'woocommerce-admin' ),\n\t\t\tcontainer: <Products />,\n\t\t\tonClick: () => {\n\t\t\t\trecordEvent( 'tasklist_click', {\n\t\t\t\t\ttask_name: 'products',\n\t\t\t\t} );\n\t\t\t\tupdateQueryString( { task: 'products' } );\n\t\t\t},\n\t\t\tcompleted: hasProducts,\n\t\t\tvisible: true,\n\t\t\ttime: __( '1 minute per product', 'woocommerce-admin' ),\n\t\t},\n\t\t{\n\t\t\tkey: 'woocommerce-payments',\n\t\t\ttitle: __( 'Set up WooCommerce Payments', 'woocommerce-admin' ),\n\t\t\tcontainer: <Fragment />,\n\t\t\tcompleted: wcPayIsConnected,\n\t\t\tonClick: async ( e ) => {\n\t\t\t\tif ( e.target.nodeName === 'A' ) {\n\t\t\t\t\t// This is a nested link, so don't activate the task.\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tawait new Promise( ( resolve, reject ) => {\n\t\t\t\t\t// This task doesn't have a view, so the recordEvent call\n\t\t\t\t\t// in TaskDashboard.recordTaskView() is never called. So\n\t\t\t\t\t// record it here.\n\t\t\t\t\trecordTaskViewEvent(\n\t\t\t\t\t\t'wcpay',\n\t\t\t\t\t\tisJetpackConnected,\n\t\t\t\t\t\tactivePlugins,\n\t\t\t\t\t\tinstalledPlugins\n\t\t\t\t\t);\n\t\t\t\t\trecordEvent( 'tasklist_click', {\n\t\t\t\t\t\ttask_name: 'woocommerce-payments',\n\t\t\t\t\t} );\n\t\t\t\t\treturn installActivateAndConnectWcpay(\n\t\t\t\t\t\tresolve,\n\t\t\t\t\t\treject,\n\t\t\t\t\t\tcreateNotice,\n\t\t\t\t\t\tinstallAndActivatePlugins\n\t\t\t\t\t);\n\t\t\t\t} );\n\t\t\t},\n\t\t\tvisible:\n\t\t\t\twindow.wcAdminFeatures.wcpay &&\n\t\t\t\twoocommercePaymentsInstalled &&\n\t\t\t\tcountryCode === 'US',\n\t\t\tadditionalInfo: __(\n\t\t\t\t'By setting up, you are agreeing to the <a href=\"https://wordpress.com/tos/\" target=\"_blank\">Terms of Service</a>',\n\t\t\t\t'woocommerce-admin'\n\t\t\t),\n\t\t\ttime: __( '2 minutes', 'woocommerce-admin' ),\n\t\t},\n\t\t{\n\t\t\tkey: 'payments',\n\t\t\ttitle: __( 'Set up payments', 'woocommerce-admin' ),\n\t\t\tcontainer: <Payments />,\n\t\t\tcompleted: hasPaymentGateway,\n\t\t\tonClick: () => {\n\t\t\t\trecordEvent( 'tasklist_click', {\n\t\t\t\t\ttask_name: 'payments',\n\t\t\t\t} );\n\t\t\t\tupdateQueryString( { task: 'payments' } );\n\t\t\t},\n\t\t\tvisible: ! woocommercePaymentsInstalled || countryCode !== 'US',\n\t\t\ttime: __( '2 minutes', 'woocommerce-admin' ),\n\t\t},\n\t\t{\n\t\t\tkey: 'tax',\n\t\t\ttitle: __( 'Set up tax', 'woocommerce-admin' ),\n\t\t\tcontainer: <Tax />,\n\t\t\tonClick: () => {\n\t\t\t\trecordEvent( 'tasklist_click', {\n\t\t\t\t\ttask_name: 'tax',\n\t\t\t\t} );\n\t\t\t\tupdateQueryString( { task: 'tax' } );\n\t\t\t},\n\t\t\tcompleted: isTaxComplete,\n\t\t\tvisible: true,\n\t\t\ttime: __( '1 minute', 'woocommerce-admin' ),\n\t\t},\n\t\t{\n\t\t\tkey: 'shipping',\n\t\t\ttitle: __( 'Set up shipping', 'woocommerce-admin' ),\n\t\t\tcontainer: <Shipping />,\n\t\t\tonClick: () => {\n\t\t\t\trecordEvent( 'tasklist_click', {\n\t\t\t\t\ttask_name: 'shipping',\n\t\t\t\t} );\n\t\t\t\tupdateQueryString( { task: 'shipping' } );\n\t\t\t},\n\t\t\tcompleted: shippingZonesCount > 0,\n\t\t\tvisible:\n\t\t\t\t( productTypes && productTypes.includes( 'physical' ) ) ||\n\t\t\t\thasPhysicalProducts,\n\t\t\ttime: __( '1 minute', 'woocommerce-admin' ),\n\t\t},\n\t\t{\n\t\t\tkey: 'appearance',\n\t\t\ttitle: __( 'Personalize my store', 'woocommerce-admin' ),\n\t\t\tcontainer: <Appearance />,\n\t\t\tonClick: () => {\n\t\t\t\trecordEvent( 'tasklist_click', {\n\t\t\t\t\ttask_name: 'appearance',\n\t\t\t\t} );\n\t\t\t\tupdateQueryString( { task: 'appearance' } );\n\t\t\t},\n\t\t\tcompleted: isAppearanceComplete,\n\t\t\tvisible: true,\n\t\t\ttime: __( '2 minutes', 'woocommerce-admin' ),\n\t\t},\n\t];\n\n\treturn applyFilters(\n\t\t'woocommerce_admin_onboarding_task_list',\n\t\ttasks.sort( ( a, b ) => {\n\t\t\tif ( a.completed === b.completed ) {\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\treturn a.completed ? 1 : -1;\n\t\t} ),\n\t\tquery\n\t);\n}\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport apiFetch from '@wordpress/api-fetch';\nimport { Button } from '@wordpress/components';\nimport { Component, Fragment } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport { filter } from 'lodash';\nimport { withDispatch, withSelect } from '@wordpress/data';\n\nimport {\n\tCard,\n\tStepper,\n\tTextControl,\n\tImageUpload,\n} from '@woocommerce/components';\nimport { getHistory, getNewPath } from '@woocommerce/navigation';\nimport {\n\tOPTIONS_STORE_NAME,\n\tONBOARDING_STORE_NAME,\n\tWC_ADMIN_NAMESPACE,\n} from '@woocommerce/data';\nimport { queueRecordEvent, recordEvent } from '@woocommerce/tracks';\n\n/**\n * Internal dependencies\n */\nclass Appearance extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tconst { hasHomepage, hasProducts } = props.tasksStatus;\n\n\t\tthis.stepVisibility = {\n\t\t\thomepage: ! hasHomepage,\n\t\t\timport: ! hasProducts,\n\t\t};\n\n\t\tthis.state = {\n\t\t\tisDirty: false,\n\t\t\tisPending: false,\n\t\t\tlogo: null,\n\t\t\tstepIndex: 0,\n\t\t\tisUpdatingLogo: false,\n\t\t\tisUpdatingNotice: false,\n\t\t\tstoreNoticeText: props.demoStoreNotice || '',\n\t\t};\n\n\t\tthis.completeStep = this.completeStep.bind( this );\n\t\tthis.createHomepage = this.createHomepage.bind( this );\n\t\tthis.importProducts = this.importProducts.bind( this );\n\t\tthis.updateLogo = this.updateLogo.bind( this );\n\t\tthis.updateNotice = this.updateNotice.bind( this );\n\t}\n\n\tcomponentDidMount() {\n\t\tconst { themeMods } = this.props.tasksStatus;\n\n\t\tif ( themeMods && themeMods.custom_logo ) {\n\t\t\t/* eslint-disable react/no-did-mount-set-state */\n\t\t\tthis.setState( { logo: { id: themeMods.custom_logo } } );\n\t\t\t/* eslint-enable react/no-did-mount-set-state */\n\t\t}\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tconst { isPending, logo } = this.state;\n\t\tconst { demoStoreNotice } = this.props;\n\n\t\tif ( logo && ! logo.url && ! isPending ) {\n\t\t\t/* eslint-disable react/no-did-update-set-state */\n\t\t\tthis.setState( { isPending: true } );\n\t\t\twp.media\n\t\t\t\t.attachment( logo.id )\n\t\t\t\t.fetch()\n\t\t\t\t.then( () => {\n\t\t\t\t\tconst logoUrl = wp.media.attachment( logo.id ).get( 'url' );\n\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\tisPending: false,\n\t\t\t\t\t\tlogo: { id: logo.id, url: logoUrl },\n\t\t\t\t\t} );\n\t\t\t\t} );\n\t\t\t/* eslint-enable react/no-did-update-set-state */\n\t\t}\n\n\t\tif (\n\t\t\tdemoStoreNotice &&\n\t\t\tprevProps.demoStoreNotice !== demoStoreNotice\n\t\t) {\n\t\t\t/* eslint-disable react/no-did-update-set-state */\n\t\t\tthis.setState( {\n\t\t\t\tstoreNoticeText: demoStoreNotice,\n\t\t\t} );\n\t\t\t/* eslint-enable react/no-did-update-set-state */\n\t\t}\n\t}\n\n\tcompleteStep() {\n\t\tconst { stepIndex } = this.state;\n\t\tconst nextStep = this.getSteps()[ stepIndex + 1 ];\n\n\t\tif ( nextStep ) {\n\t\t\tthis.setState( { stepIndex: stepIndex + 1 } );\n\t\t} else {\n\t\t\tgetHistory().push( getNewPath( {}, '/', {} ) );\n\t\t}\n\t}\n\n\timportProducts() {\n\t\tconst { clearTaskStatusCache, createNotice } = this.props;\n\t\tthis.setState( { isPending: true } );\n\n\t\trecordEvent( 'tasklist_appearance_import_demo', {} );\n\n\t\tapiFetch( {\n\t\t\tpath: `${ WC_ADMIN_NAMESPACE }/onboarding/tasks/import_sample_products`,\n\t\t\tmethod: 'POST',\n\t\t} )\n\t\t\t.then( ( result ) => {\n\t\t\t\tif ( result.failed && result.failed.length ) {\n\t\t\t\t\tcreateNotice(\n\t\t\t\t\t\t'error',\n\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t'There was an error importing some of the sample products.',\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tcreateNotice(\n\t\t\t\t\t\t'success',\n\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t'All sample products have been imported.',\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t\tclearTaskStatusCache();\n\t\t\t\t}\n\n\t\t\t\tthis.setState( { isPending: false } );\n\t\t\t\tthis.completeStep();\n\t\t\t} )\n\t\t\t.catch( ( error ) => {\n\t\t\t\tcreateNotice( 'error', error.message );\n\t\t\t\tthis.setState( { isPending: false } );\n\t\t\t} );\n\t}\n\n\tcreateHomepage() {\n\t\tconst { clearTaskStatusCache, createNotice } = this.props;\n\t\tthis.setState( { isPending: true } );\n\n\t\trecordEvent( 'tasklist_appearance_create_homepage', {\n\t\t\tcreate_homepage: true,\n\t\t} );\n\n\t\tapiFetch( {\n\t\t\tpath: '/wc-admin/onboarding/tasks/create_homepage',\n\t\t\tmethod: 'POST',\n\t\t} )\n\t\t\t.then( ( response ) => {\n\t\t\t\tclearTaskStatusCache();\n\t\t\t\tcreateNotice( response.status, response.message, {\n\t\t\t\t\tactions: response.edit_post_link\n\t\t\t\t\t\t? [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tlabel: __(\n\t\t\t\t\t\t\t\t\t\t'Customize',\n\t\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\t\t\tqueueRecordEvent(\n\t\t\t\t\t\t\t\t\t\t\t'tasklist_appearance_customize_homepage',\n\t\t\t\t\t\t\t\t\t\t\t{}\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\twindow.location = `${ response.edit_post_link }&wc_onboarding_active_task=homepage`;\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t  ]\n\t\t\t\t\t\t: null,\n\t\t\t\t} );\n\n\t\t\t\tthis.setState( { isPending: false } );\n\t\t\t\tthis.completeStep();\n\t\t\t} )\n\t\t\t.catch( ( error ) => {\n\t\t\t\tcreateNotice( 'error', error.message );\n\t\t\t\tthis.setState( { isPending: false } );\n\t\t\t} );\n\t}\n\n\tasync updateLogo() {\n\t\tconst {\n\t\t\tclearTaskStatusCache,\n\t\t\tcreateNotice,\n\t\t\tstylesheet,\n\t\t\tthemeMods,\n\t\t\tupdateOptions,\n\t\t} = this.props;\n\t\tconst { logo } = this.state;\n\t\tconst updatedThemeMods = {\n\t\t\t...themeMods,\n\t\t\tcustom_logo: logo ? logo.id : null,\n\t\t};\n\n\t\trecordEvent( 'tasklist_appearance_upload_logo' );\n\n\t\tthis.setState( { isUpdatingLogo: true } );\n\t\tconst update = await updateOptions( {\n\t\t\t[ `theme_mods_${ stylesheet }` ]: updatedThemeMods,\n\t\t} );\n\n\t\tclearTaskStatusCache();\n\n\t\tif ( update.success ) {\n\t\t\tthis.setState( { isUpdatingLogo: false } );\n\t\t\tcreateNotice(\n\t\t\t\t'success',\n\t\t\t\t__( 'Store logo updated sucessfully.', 'woocommerce-admin' )\n\t\t\t);\n\t\t\tthis.completeStep();\n\t\t} else {\n\t\t\tcreateNotice( 'error', update.message );\n\t\t}\n\t}\n\n\tasync updateNotice() {\n\t\tconst {\n\t\t\tclearTaskStatusCache,\n\t\t\tcreateNotice,\n\t\t\tupdateOptions,\n\t\t} = this.props;\n\t\tconst { storeNoticeText } = this.state;\n\n\t\trecordEvent( 'tasklist_appearance_set_store_notice', {\n\t\t\tadded_text: Boolean( storeNoticeText.length ),\n\t\t} );\n\n\t\tthis.setState( { isUpdatingNotice: true } );\n\t\tconst update = await updateOptions( {\n\t\t\twoocommerce_task_list_appearance_complete: true,\n\t\t\twoocommerce_demo_store: storeNoticeText.length ? 'yes' : 'no',\n\t\t\twoocommerce_demo_store_notice: storeNoticeText,\n\t\t} );\n\n\t\tclearTaskStatusCache();\n\n\t\tif ( update.success ) {\n\t\t\tthis.setState( { isUpdatingNotice: false } );\n\t\t\tcreateNotice(\n\t\t\t\t'success',\n\t\t\t\t__(\n\t\t\t\t\t\" Your store is looking great! Don't forget to continue personalizing it.\",\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t)\n\t\t\t);\n\t\t\tthis.completeStep();\n\t\t} else {\n\t\t\tcreateNotice( 'error', update.message );\n\t\t}\n\t}\n\n\tgetSteps() {\n\t\tconst {\n\t\t\tisDirty,\n\t\t\tisPending,\n\t\t\tlogo,\n\t\t\tstoreNoticeText,\n\t\t\tisUpdatingLogo,\n\t\t} = this.state;\n\n\t\tconst steps = [\n\t\t\t{\n\t\t\t\tkey: 'import',\n\t\t\t\tlabel: __( 'Import sample products', 'woocommerce-admin' ),\n\t\t\t\tdescription: __(\n\t\t\t\t\t'Well add some products that will make it easier to see what your store looks like',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tcontent: (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={ this.importProducts }\n\t\t\t\t\t\t\tisBusy={ isPending }\n\t\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Import products', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button onClick={ () => this.completeStep() }>\n\t\t\t\t\t\t\t{ __( 'Skip', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Fragment>\n\t\t\t\t),\n\t\t\t\tvisible: this.stepVisibility.import,\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'homepage',\n\t\t\t\tlabel: __( 'Create a custom homepage', 'woocommerce-admin' ),\n\t\t\t\tdescription: __(\n\t\t\t\t\t'Create a new homepage and customize it to suit your needs',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tcontent: (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\t\tisBusy={ isPending }\n\t\t\t\t\t\t\tonClick={ this.createHomepage }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Create homepage', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t\t\t\t'tasklist_appearance_create_homepage',\n\t\t\t\t\t\t\t\t\t{ create_homepage: false }\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tthis.completeStep();\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Skip', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Fragment>\n\t\t\t\t),\n\t\t\t\tvisible: this.stepVisibility.homepage,\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'logo',\n\t\t\t\tlabel: __( 'Upload a logo', 'woocommerce-admin' ),\n\t\t\t\tdescription: __(\n\t\t\t\t\t'Ensure your store is on-brand by adding your logo',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tcontent: isPending ? null : (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<ImageUpload\n\t\t\t\t\t\t\timage={ logo }\n\t\t\t\t\t\t\tonChange={ ( image ) =>\n\t\t\t\t\t\t\t\tthis.setState( { isDirty: true, logo: image } )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tdisabled={ ! logo && ! isDirty }\n\t\t\t\t\t\t\tonClick={ this.updateLogo }\n\t\t\t\t\t\t\tisBusy={ isUpdatingLogo }\n\t\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Proceed', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tisTertiary\n\t\t\t\t\t\t\tonClick={ () => this.completeStep() }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Skip', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Fragment>\n\t\t\t\t),\n\t\t\t\tvisible: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'notice',\n\t\t\t\tlabel: __( 'Set a store notice', 'woocommerce-admin' ),\n\t\t\t\tdescription: __(\n\t\t\t\t\t'Optionally display a prominent notice across all pages of your store',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tcontent: (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\tlabel={ __(\n\t\t\t\t\t\t\t\t'Store notice text',\n\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\tplaceholder={ __(\n\t\t\t\t\t\t\t\t'Store notice text',\n\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\tvalue={ storeNoticeText }\n\t\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\t\tthis.setState( { storeNoticeText: value } )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Button onClick={ this.updateNotice } isPrimary>\n\t\t\t\t\t\t\t{ __( 'Complete task', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Fragment>\n\t\t\t\t),\n\t\t\t\tvisible: true,\n\t\t\t},\n\t\t];\n\n\t\treturn filter( steps, ( step ) => step.visible );\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tisPending,\n\t\t\tstepIndex,\n\t\t\tisUpdatingLogo,\n\t\t\tisUpdatingNotice,\n\t\t} = this.state;\n\t\tconst currentStep = this.getSteps()[ stepIndex ].key;\n\n\t\treturn (\n\t\t\t<div className=\"woocommerce-task-appearance\">\n\t\t\t\t<Card className=\"is-narrow\">\n\t\t\t\t\t<Stepper\n\t\t\t\t\t\tisPending={\n\t\t\t\t\t\t\tisUpdatingNotice || isUpdatingLogo || isPending\n\t\t\t\t\t\t}\n\t\t\t\t\t\tisVertical\n\t\t\t\t\t\tcurrentStep={ currentStep }\n\t\t\t\t\t\tsteps={ this.getSteps() }\n\t\t\t\t\t/>\n\t\t\t\t</Card>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst { getOption } = select( OPTIONS_STORE_NAME );\n\t\tconst { getTasksStatus } = select( ONBOARDING_STORE_NAME );\n\t\tconst tasksStatus = getTasksStatus();\n\n\t\treturn {\n\t\t\tdemoStoreNotice: getOption( 'woocommerce_demo_store_notice' ),\n\t\t\tstylesheet: getOption( 'stylesheet' ),\n\t\t\ttasksStatus,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { createNotice } = dispatch( 'core/notices' );\n\t\tconst { updateOptions } = dispatch( OPTIONS_STORE_NAME );\n\t\tconst { invalidateResolutionForStoreSelector } = dispatch(\n\t\t\tONBOARDING_STORE_NAME\n\t\t);\n\n\t\treturn {\n\t\t\tclearTaskStatusCache: () =>\n\t\t\t\tinvalidateResolutionForStoreSelector( 'getTasksStatus' ),\n\t\t\tcreateNotice,\n\t\t\tupdateOptions,\n\t\t};\n\t} )\n)( Appearance );\n","/**\n * External dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport classnames from 'classnames';\nimport { cloneElement, Component } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport { Button, FormToggle } from '@wordpress/components';\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { Card, H, Plugins } from '@woocommerce/components';\nimport {\n\tgetHistory,\n\tgetNewPath,\n\tupdateQueryString,\n} from '@woocommerce/navigation';\nimport {\n\tONBOARDING_STORE_NAME,\n\tOPTIONS_STORE_NAME,\n\tPLUGINS_STORE_NAME,\n\tpluginNames,\n\tSETTINGS_STORE_NAME,\n} from '@woocommerce/data';\nimport { recordEvent } from '@woocommerce/tracks';\n\n/**\n * Internal dependencies\n */\nimport { createNoticesFromResponse } from '../../../lib/notices';\nimport { getCountryCode } from '../../../dashboard/utils';\nimport { getPaymentMethods } from './methods';\n\nclass Payments extends Component {\n\tconstructor( props ) {\n\t\tsuper( ...arguments );\n\t\tconst { methods } = props;\n\n\t\tconst enabledMethods = {};\n\t\tmethods.forEach(\n\t\t\t( method ) => ( enabledMethods[ method.key ] = method.isEnabled )\n\t\t);\n\t\tthis.state = {\n\t\t\tbusyMethod: null,\n\t\t\tenabledMethods,\n\t\t\trecommendedMethod: this.getRecommendedMethod(),\n\t\t};\n\n\t\tthis.markConfigured = this.markConfigured.bind( this );\n\t}\n\n\tcomponentDidUpdate() {\n\t\tconst { recommendedMethod } = this.state;\n\n\t\tconst method = this.getRecommendedMethod();\n\t\tif ( recommendedMethod !== method ) {\n\t\t\tthis.setState( {\n\t\t\t\trecommendedMethod: method,\n\t\t\t} );\n\t\t}\n\t}\n\n\tgetRecommendedMethod() {\n\t\tconst { methods } = this.props;\n\t\treturn methods.find( ( m ) => m.key === 'wcpay' && m.visible )\n\t\t\t? 'wcpay'\n\t\t\t: 'stripe';\n\t}\n\n\tmarkConfigured( method ) {\n\t\tconst { clearTaskStatusCache } = this.props;\n\t\tconst { enabledMethods } = this.state;\n\n\t\tthis.setState( {\n\t\t\tenabledMethods: {\n\t\t\t\t...enabledMethods,\n\t\t\t\t[ method ]: true,\n\t\t\t},\n\t\t} );\n\n\t\tclearTaskStatusCache();\n\n\t\trecordEvent( 'tasklist_payment_connect_method', {\n\t\t\tpayment_method: method,\n\t\t} );\n\n\t\tgetHistory().push( getNewPath( { task: 'payments' }, '/', {} ) );\n\t}\n\n\tgetCurrentMethod() {\n\t\tconst { methods, query } = this.props;\n\n\t\tif ( ! query.method ) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn methods.find( ( method ) => method.key === query.method );\n\t}\n\n\tgetInstallStep() {\n\t\tconst currentMethod = this.getCurrentMethod();\n\n\t\tif ( ! currentMethod.plugins || ! currentMethod.plugins.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { activePlugins } = this.props;\n\t\tconst pluginsToInstall = currentMethod.plugins.filter(\n\t\t\t( method ) => ! activePlugins.includes( method )\n\t\t);\n\t\tconst pluginNamesString = currentMethod.plugins\n\t\t\t.map( ( pluginSlug ) => pluginNames[ pluginSlug ] )\n\t\t\t.join( ' ' + __( 'and', 'woocommerce-admin' ) + ' ' );\n\n\t\treturn {\n\t\t\tkey: 'install',\n\t\t\tlabel: sprintf(\n\t\t\t\t__( 'Install %s', 'woocommerce-admin' ),\n\t\t\t\tpluginNamesString\n\t\t\t),\n\t\t\tcontent: (\n\t\t\t\t<Plugins\n\t\t\t\t\tonComplete={ ( plugins, response ) => {\n\t\t\t\t\t\tcreateNoticesFromResponse( response );\n\t\t\t\t\t\trecordEvent( 'tasklist_payment_install_method', {\n\t\t\t\t\t\t\tplugins: currentMethod.plugins,\n\t\t\t\t\t\t} );\n\t\t\t\t\t} }\n\t\t\t\t\tonError={ ( errors, response ) =>\n\t\t\t\t\t\tcreateNoticesFromResponse( response )\n\t\t\t\t\t}\n\t\t\t\t\tautoInstall\n\t\t\t\t\tpluginSlugs={ currentMethod.plugins }\n\t\t\t\t/>\n\t\t\t),\n\t\t\tisComplete: ! pluginsToInstall.length,\n\t\t};\n\t}\n\n\tasync toggleMethod( key ) {\n\t\tconst {\n\t\t\tclearTaskStatusCache,\n\t\t\tmethods,\n\t\t\toptions,\n\t\t\tupdateOptions,\n\t\t} = this.props;\n\t\tconst { enabledMethods } = this.state;\n\t\tconst method = methods.find( ( option ) => option.key === key );\n\n\t\tenabledMethods[ key ] = ! enabledMethods[ key ];\n\t\tthis.setState( { enabledMethods } );\n\n\t\trecordEvent( 'tasklist_payment_toggle', {\n\t\t\tenabled: ! method.isEnabled,\n\t\t\tpayment_method: key,\n\t\t} );\n\n\t\tawait updateOptions( {\n\t\t\t[ method.optionName ]: {\n\t\t\t\t...options[ method.optionName ],\n\t\t\t\tenabled: method.isEnabled ? 'no' : 'yes',\n\t\t\t},\n\t\t} );\n\n\t\tclearTaskStatusCache();\n\t}\n\n\tasync handleClick( method ) {\n\t\tconst { methods } = this.props;\n\t\tconst { key, onClick } = method;\n\n\t\trecordEvent( 'tasklist_payment_setup', {\n\t\t\toptions: methods.map( ( option ) => option.key ),\n\t\t\tselected: key,\n\t\t} );\n\n\t\tif ( onClick ) {\n\t\t\tthis.setState( { busyMethod: key } );\n\t\t\tawait new Promise( onClick )\n\t\t\t\t.then( () => {\n\t\t\t\t\tthis.setState( { busyMethod: null } );\n\t\t\t\t} )\n\t\t\t\t.catch( () => {\n\t\t\t\t\tthis.setState( { busyMethod: null } );\n\t\t\t\t} );\n\n\t\t\treturn;\n\t\t}\n\n\t\tupdateQueryString( {\n\t\t\tmethod: key,\n\t\t} );\n\t}\n\n\trender() {\n\t\tconst currentMethod = this.getCurrentMethod();\n\t\tconst { busyMethod, enabledMethods, recommendedMethod } = this.state;\n\t\tconst { methods, query } = this.props;\n\n\t\tif ( currentMethod ) {\n\t\t\treturn (\n\t\t\t\t<Card className=\"woocommerce-task-payment-method is-narrow\">\n\t\t\t\t\t{ cloneElement( currentMethod.container, {\n\t\t\t\t\t\tquery,\n\t\t\t\t\t\tinstallStep: this.getInstallStep(),\n\t\t\t\t\t\tmarkConfigured: this.markConfigured,\n\t\t\t\t\t\thasCbdIndustry: currentMethod.hasCbdIndustry,\n\t\t\t\t\t} ) }\n\t\t\t\t</Card>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"woocommerce-task-payments\">\n\t\t\t\t{ methods.map( ( method ) => {\n\t\t\t\t\tconst {\n\t\t\t\t\t\tbefore,\n\t\t\t\t\t\tcontainer,\n\t\t\t\t\t\tcontent,\n\t\t\t\t\t\tisConfigured,\n\t\t\t\t\t\tkey,\n\t\t\t\t\t\ttitle,\n\t\t\t\t\t\tvisible,\n\t\t\t\t\t} = method;\n\n\t\t\t\t\tif ( ! visible ) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst classes = classnames(\n\t\t\t\t\t\t'woocommerce-task-payment',\n\t\t\t\t\t\t'is-narrow',\n\t\t\t\t\t\t! isConfigured &&\n\t\t\t\t\t\t\t'woocommerce-task-payment-not-configured',\n\t\t\t\t\t\t'woocommerce-task-payment-' + key\n\t\t\t\t\t);\n\n\t\t\t\t\tconst isRecommended =\n\t\t\t\t\t\tkey === recommendedMethod && ! isConfigured;\n\t\t\t\t\tconst showRecommendedRibbon =\n\t\t\t\t\t\tisRecommended && key !== 'wcpay';\n\t\t\t\t\tconst showRecommendedPill =\n\t\t\t\t\t\tisRecommended && key === 'wcpay';\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Card key={ key } className={ classes }>\n\t\t\t\t\t\t\t<div className=\"woocommerce-task-payment__before\">\n\t\t\t\t\t\t\t\t{ showRecommendedRibbon && (\n\t\t\t\t\t\t\t\t\t<div className=\"woocommerce-task-payment__recommended-ribbon\">\n\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t\t\t\t\t'Recommended',\n\t\t\t\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t{ before }\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"woocommerce-task-payment__text\">\n\t\t\t\t\t\t\t\t<H className=\"woocommerce-task-payment__title\">\n\t\t\t\t\t\t\t\t\t{ title }\n\t\t\t\t\t\t\t\t\t{ showRecommendedPill && (\n\t\t\t\t\t\t\t\t\t\t<span className=\"woocommerce-task-payment__recommended-pill\">\n\t\t\t\t\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t\t\t\t\t'Recommended',\n\t\t\t\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t</H>\n\t\t\t\t\t\t\t\t<div className=\"woocommerce-task-payment__content\">\n\t\t\t\t\t\t\t\t\t{ content }\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"woocommerce-task-payment__after\">\n\t\t\t\t\t\t\t\t{ container && ! isConfigured ? (\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tisPrimary={ key === recommendedMethod }\n\t\t\t\t\t\t\t\t\t\tisSecondary={\n\t\t\t\t\t\t\t\t\t\t\tkey !== recommendedMethod\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tisBusy={ busyMethod === key }\n\t\t\t\t\t\t\t\t\t\tdisabled={ busyMethod }\n\t\t\t\t\t\t\t\t\t\tonClick={ () =>\n\t\t\t\t\t\t\t\t\t\t\tthis.handleClick( method )\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ __( 'Set up', 'woocommerce-admin' ) }\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<FormToggle\n\t\t\t\t\t\t\t\t\t\tchecked={ enabledMethods[ key ] }\n\t\t\t\t\t\t\t\t\t\tonChange={ () =>\n\t\t\t\t\t\t\t\t\t\t\tthis.toggleMethod( key )\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tonClick={ ( e ) => e.stopPropagation() }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Card>\n\t\t\t\t\t);\n\t\t\t\t} ) }\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default compose(\n\twithDispatch( ( dispatch ) => {\n\t\tconst { createNotice } = dispatch( 'core/notices' );\n\t\tconst { installAndActivatePlugins } = dispatch( PLUGINS_STORE_NAME );\n\t\tconst { updateOptions } = dispatch( OPTIONS_STORE_NAME );\n\t\tconst {\n\t\t\tinvalidateResolution,\n\t\t\tinvalidateResolutionForStoreSelector,\n\t\t} = dispatch( ONBOARDING_STORE_NAME );\n\t\tinvalidateResolution( 'getProfileItems', [] );\n\t\tinvalidateResolution( 'getTasksStatus', [] );\n\t\treturn {\n\t\t\tclearTaskStatusCache: () =>\n\t\t\t\tinvalidateResolutionForStoreSelector( 'getTasksStatus' ),\n\t\t\tcreateNotice,\n\t\t\tinstallAndActivatePlugins,\n\t\t\tupdateOptions,\n\t\t};\n\t} ),\n\twithSelect( ( select, props ) => {\n\t\tconst { createNotice, installAndActivatePlugins } = props;\n\t\tconst { getProfileItems } = select( ONBOARDING_STORE_NAME );\n\t\tconst { getOption } = select( OPTIONS_STORE_NAME );\n\t\tconst { getActivePlugins, isJetpackConnected } = select(\n\t\t\tPLUGINS_STORE_NAME\n\t\t);\n\t\tconst { getSettings } = select( SETTINGS_STORE_NAME );\n\t\tconst { general: generalSettings = {} } = getSettings( 'general' );\n\t\tconst { getTasksStatus } = select( ONBOARDING_STORE_NAME );\n\n\t\tconst activePlugins = getActivePlugins();\n\t\tconst onboardingStatus = getTasksStatus();\n\t\tconst profileItems = getProfileItems();\n\n\t\tconst optionNames = [\n\t\t\t'woocommerce_woocommerce_payments_settings',\n\t\t\t'woocommerce_stripe_settings',\n\t\t\t'woocommerce_ppec_paypal_settings',\n\t\t\t'woocommerce_payfast_settings',\n\t\t\t'woocommerce_square_credit_card_settings',\n\t\t\t'woocommerce_klarna_payments_settings',\n\t\t\t'woocommerce_kco_settings',\n\t\t\t'wc_square_refresh_tokens',\n\t\t\t'woocommerce_cod_settings',\n\t\t\t'woocommerce_bacs_settings',\n\t\t\t'woocommerce_bacs_accounts',\n\t\t\t'woocommerce_eway_settings',\n\t\t];\n\n\t\tconst options = optionNames.reduce( ( result, name ) => {\n\t\t\tresult[ name ] = getOption( name );\n\t\t\treturn result;\n\t\t}, {} );\n\t\tconst countryCode = getCountryCode(\n\t\t\tgeneralSettings.woocommerce_default_country\n\t\t);\n\n\t\tconst methods = getPaymentMethods( {\n\t\t\tactivePlugins,\n\t\t\tcountryCode,\n\t\t\tcreateNotice,\n\t\t\tinstallAndActivatePlugins,\n\t\t\tisJetpackConnected: isJetpackConnected(),\n\t\t\tonboardingStatus,\n\t\t\toptions,\n\t\t\tprofileItems,\n\t\t} );\n\n\t\treturn {\n\t\t\tcountryCode,\n\t\t\tprofileItems,\n\t\t\tactivePlugins,\n\t\t\toptions,\n\t\t\tmethods,\n\t\t};\n\t} )\n)( Payments );\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component, Fragment } from '@wordpress/element';\nimport { Card, List } from '@woocommerce/components';\nimport { getAdminLink } from '@woocommerce/wc-admin-settings';\nimport { recordEvent } from '@woocommerce/tracks';\n\n/**\n * Internal dependencies\n */\n\nconst subTasks = [\n\t{\n\t\ttitle: __( 'Add manually (recommended)', 'woocommerce-admin' ),\n\t\tcontent: __(\n\t\t\t'For small stores we recommend adding products manually',\n\t\t\t'woocommerce-admin'\n\t\t),\n\t\tbefore: <i className=\"material-icons-outlined\">add_box</i>,\n\t\tafter: <i className=\"material-icons-outlined\">chevron_right</i>,\n\t\tonClick: () =>\n\t\t\trecordEvent( 'tasklist_add_product', { method: 'manually' } ),\n\t\thref: getAdminLink(\n\t\t\t'post-new.php?post_type=product&wc_onboarding_active_task=products&tutorial=true'\n\t\t),\n\t},\n\t{\n\t\ttitle: __( 'Import', 'woocommerce-admin' ),\n\t\tcontent: __(\n\t\t\t'For larger stores we recommend importing all products at once via CSV file',\n\t\t\t'woocommerce-admin'\n\t\t),\n\t\tbefore: <i className=\"material-icons-outlined\">import_export</i>,\n\t\tafter: <i className=\"material-icons-outlined\">chevron_right</i>,\n\t\tonClick: () =>\n\t\t\trecordEvent( 'tasklist_add_product', { method: 'import' } ),\n\t\thref: getAdminLink(\n\t\t\t'edit.php?post_type=product&page=product_importer&wc_onboarding_active_task=product-import'\n\t\t),\n\t},\n\t{\n\t\ttitle: __( 'Migrate', 'woocommerce-admin' ),\n\t\tcontent: __(\n\t\t\t'For stores currently selling elsewhere we suggest using a product migration service',\n\t\t\t'woocommerce-admin'\n\t\t),\n\t\tbefore: <i className=\"material-icons-outlined\">cloud_download</i>,\n\t\tafter: <i className=\"material-icons-outlined\">chevron_right</i>,\n\t\tonClick: () =>\n\t\t\trecordEvent( 'tasklist_add_product', { method: 'migrate' } ),\n\t\t// @todo This should be replaced with the in-app purchase iframe when ready.\n\t\thref: 'https://woocommerce.com/products/cart2cart/',\n\t\ttarget: '_blank',\n\t},\n];\n\nexport default class Products extends Component {\n\trender() {\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<Card className=\"woocommerce-task-card\">\n\t\t\t\t\t<List items={ subTasks } />\n\t\t\t\t</Card>\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport apiFetch from '@wordpress/api-fetch';\nimport { Component } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport { difference, filter } from 'lodash';\nimport interpolateComponents from 'interpolate-components';\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { Card, Link, Stepper, Plugins } from '@woocommerce/components';\nimport { getAdminLink, getSetting } from '@woocommerce/wc-admin-settings';\nimport { getHistory, getNewPath } from '@woocommerce/navigation';\nimport { SETTINGS_STORE_NAME, PLUGINS_STORE_NAME } from '@woocommerce/data';\nimport { recordEvent } from '@woocommerce/tracks';\n\n/**\n * Internal dependencies\n */\nimport Connect from '../../../dashboard/components/connect';\nimport { getCountryCode } from '../../../dashboard/utils';\nimport StoreLocation from '../steps/location';\nimport ShippingRates from './rates';\nimport { createNoticesFromResponse } from '../../../lib/notices';\n\nclass Shipping extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.initialState = {\n\t\t\tisPending: false,\n\t\t\tstep: 'store_location',\n\t\t\tshippingZones: [],\n\t\t};\n\n\t\t// Cache active plugins to prevent removal mid-step.\n\t\tthis.activePlugins = props.activePlugins;\n\t\tthis.state = this.initialState;\n\t\tthis.completeStep = this.completeStep.bind( this );\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.reset();\n\t}\n\n\treset() {\n\t\tthis.setState( this.initialState );\n\t}\n\n\tasync fetchShippingZones() {\n\t\tthis.setState( { isPending: true } );\n\t\tconst { countryCode, countryName } = this.props;\n\n\t\t// @todo The following fetches for shipping information should be moved into\n\t\t// @woocommerce/data to make these methods and states more readily available.\n\t\tconst shippingZones = [];\n\t\tconst zones = await apiFetch( { path: '/wc/v3/shipping/zones' } );\n\t\tlet hasCountryZone = false;\n\n\t\tawait Promise.all(\n\t\t\tzones.map( async ( zone ) => {\n\t\t\t\t// \"Rest of the world zone\"\n\t\t\t\tif ( zone.id === 0 ) {\n\t\t\t\t\tzone.methods = await apiFetch( {\n\t\t\t\t\t\tpath: `/wc/v3/shipping/zones/${ zone.id }/methods`,\n\t\t\t\t\t} );\n\t\t\t\t\tzone.name = __( 'Rest of the world', 'woocommerce-admin' );\n\t\t\t\t\tzone.toggleable = true;\n\t\t\t\t\tshippingZones.push( zone );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Return any zone with a single location matching the country zone.\n\t\t\t\tzone.locations = await apiFetch( {\n\t\t\t\t\tpath: `/wc/v3/shipping/zones/${ zone.id }/locations`,\n\t\t\t\t} );\n\t\t\t\tconst countryLocation = zone.locations.find(\n\t\t\t\t\t( location ) => countryCode === location.code\n\t\t\t\t);\n\t\t\t\tif ( countryLocation ) {\n\t\t\t\t\tzone.methods = await apiFetch( {\n\t\t\t\t\t\tpath: `/wc/v3/shipping/zones/${ zone.id }/methods`,\n\t\t\t\t\t} );\n\t\t\t\t\tshippingZones.push( zone );\n\t\t\t\t\thasCountryZone = true;\n\t\t\t\t}\n\t\t\t} )\n\t\t);\n\n\t\t// Create the default store country zone if it doesn't exist.\n\t\tif ( ! hasCountryZone ) {\n\t\t\tconst zone = await apiFetch( {\n\t\t\t\tmethod: 'POST',\n\t\t\t\tpath: '/wc/v3/shipping/zones',\n\t\t\t\tdata: { name: countryName },\n\t\t\t} );\n\t\t\tzone.locations = await apiFetch( {\n\t\t\t\tmethod: 'POST',\n\t\t\t\tpath: `/wc/v3/shipping/zones/${ zone.id }/locations`,\n\t\t\t\tdata: [ { code: countryCode, type: 'country' } ],\n\t\t\t} );\n\t\t\tshippingZones.push( zone );\n\t\t}\n\n\t\tshippingZones.reverse();\n\n\t\tthis.setState( { isPending: false, shippingZones } );\n\t}\n\n\tcomponentDidUpdate( prevProps, prevState ) {\n\t\tconst { countryCode, settings } = this.props;\n\t\tconst {\n\t\t\twoocommerce_store_address: storeAddress,\n\t\t\twoocommerce_default_country: defaultCountry,\n\t\t\twoocommerce_store_postcode: storePostCode,\n\t\t} = settings;\n\t\tconst { step } = this.state;\n\n\t\tif (\n\t\t\tstep === 'rates' &&\n\t\t\t( prevProps.countryCode !== countryCode ||\n\t\t\t\tprevState.step !== 'rates' )\n\t\t) {\n\t\t\tthis.fetchShippingZones();\n\t\t}\n\n\t\tconst isCompleteAddress = Boolean(\n\t\t\tstoreAddress && defaultCountry && storePostCode\n\t\t);\n\n\t\tif ( step === 'store_location' && isCompleteAddress ) {\n\t\t\tthis.completeStep();\n\t\t}\n\t}\n\n\tcompleteStep() {\n\t\tconst { createNotice } = this.props;\n\t\tconst { step } = this.state;\n\t\tconst steps = this.getSteps();\n\t\tconst currentStepIndex = steps.findIndex( ( s ) => s.key === step );\n\t\tconst nextStep = steps[ currentStepIndex + 1 ];\n\n\t\tif ( nextStep ) {\n\t\t\tthis.setState( { step: nextStep.key } );\n\t\t} else {\n\t\t\tcreateNotice(\n\t\t\t\t'success',\n\t\t\t\t__(\n\t\t\t\t\t\" Shipping is done! Don't worry, you can always change it later.\",\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t)\n\t\t\t);\n\t\t\tgetHistory().push( getNewPath( {}, '/', {} ) );\n\t\t}\n\t}\n\n\tgetPluginsToActivate() {\n\t\tconst { countryCode } = this.props;\n\n\t\tconst plugins = [];\n\t\tif ( [ 'GB', 'CA', 'AU' ].includes( countryCode ) ) {\n\t\t\tplugins.push( 'woocommerce-shipstation-integration' );\n\t\t} else if ( countryCode === 'US' ) {\n\t\t\tplugins.push( 'woocommerce-services' );\n\t\t\tplugins.push( 'jetpack' );\n\t\t}\n\t\treturn difference( plugins, this.activePlugins );\n\t}\n\n\tgetSteps() {\n\t\tconst { countryCode, isJetpackConnected } = this.props;\n\t\tconst pluginsToActivate = this.getPluginsToActivate();\n\t\tconst requiresJetpackConnection =\n\t\t\t! isJetpackConnected && countryCode === 'US';\n\n\t\tconst steps = [\n\t\t\t{\n\t\t\t\tkey: 'store_location',\n\t\t\t\tlabel: __( 'Set store location', 'woocommerce-admin' ),\n\t\t\t\tdescription: __(\n\t\t\t\t\t'The address from which your business operates',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tcontent: (\n\t\t\t\t\t<StoreLocation\n\t\t\t\t\t\t{ ...this.props }\n\t\t\t\t\t\tonComplete={ ( values ) => {\n\t\t\t\t\t\t\tconst country = getCountryCode(\n\t\t\t\t\t\t\t\tvalues.countryState\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\trecordEvent( 'tasklist_shipping_set_location', {\n\t\t\t\t\t\t\t\tcountry,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\tthis.completeStep();\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t),\n\t\t\t\tvisible: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'rates',\n\t\t\t\tlabel: __( 'Set shipping costs', 'woocommerce-admin' ),\n\t\t\t\tdescription: __(\n\t\t\t\t\t'Define how much customers pay to ship to different destinations',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tcontent: (\n\t\t\t\t\t<ShippingRates\n\t\t\t\t\t\tbuttonText={\n\t\t\t\t\t\t\tpluginsToActivate.length ||\n\t\t\t\t\t\t\trequiresJetpackConnection\n\t\t\t\t\t\t\t\t? __( 'Proceed', 'woocommerce-admin' )\n\t\t\t\t\t\t\t\t: __( 'Complete task', 'woocommerce-admin' )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tshippingZones={ this.state.shippingZones }\n\t\t\t\t\t\tonComplete={ this.completeStep }\n\t\t\t\t\t\t{ ...this.props }\n\t\t\t\t\t/>\n\t\t\t\t),\n\t\t\t\tvisible: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'label_printing',\n\t\t\t\tlabel: __(\n\t\t\t\t\t'Enable shipping label printing',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tdescription: pluginsToActivate.includes(\n\t\t\t\t\t'woocommerce-shipstation-integration'\n\t\t\t\t)\n\t\t\t\t\t? interpolateComponents( {\n\t\t\t\t\t\t\tmixedString: __(\n\t\t\t\t\t\t\t\t'We recommend using ShipStation to save time at the post office by printing your shipping ' +\n\t\t\t\t\t\t\t\t\t'labels at home. Try ShipStation free for 30 days. {{link}}Learn more{{/link}}.',\n\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tcomponents: {\n\t\t\t\t\t\t\t\tlink: (\n\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\thref=\"https://woocommerce.com/products/shipstation-integration\"\n\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\t\ttype=\"external\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t  } )\n\t\t\t\t\t: __(\n\t\t\t\t\t\t\t'With WooCommerce Shipping and Jetpack you can save time at the ' +\n\t\t\t\t\t\t\t\t'Post Office by printing your shipping labels at home',\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t  ),\n\t\t\t\tcontent: (\n\t\t\t\t\t<Plugins\n\t\t\t\t\t\tonComplete={ ( plugins, response ) => {\n\t\t\t\t\t\t\tcreateNoticesFromResponse( response );\n\t\t\t\t\t\t\trecordEvent( 'tasklist_shipping_label_printing', {\n\t\t\t\t\t\t\t\tinstall: true,\n\t\t\t\t\t\t\t\tplugins_to_activate: pluginsToActivate,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\tthis.completeStep();\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tonError={ ( errors, response ) =>\n\t\t\t\t\t\t\tcreateNoticesFromResponse( response )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonSkip={ () => {\n\t\t\t\t\t\t\trecordEvent( 'tasklist_shipping_label_printing', {\n\t\t\t\t\t\t\t\tinstall: false,\n\t\t\t\t\t\t\t\tplugins_to_activate: pluginsToActivate,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\tgetHistory().push( getNewPath( {}, '/', {} ) );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tpluginSlugs={ pluginsToActivate }\n\t\t\t\t\t\t{ ...this.props }\n\t\t\t\t\t/>\n\t\t\t\t),\n\t\t\t\tvisible: pluginsToActivate.length,\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'connect',\n\t\t\t\tlabel: __( 'Connect your store', 'woocommerce-admin' ),\n\t\t\t\tdescription: __(\n\t\t\t\t\t'Connect your store to WordPress.com to enable label printing',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tcontent: (\n\t\t\t\t\t<Connect\n\t\t\t\t\t\tredirectUrl={ getAdminLink(\n\t\t\t\t\t\t\t'admin.php?page=wc-admin'\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tcompleteStep={ this.completeStep }\n\t\t\t\t\t\t{ ...this.props }\n\t\t\t\t\t\tonConnect={ () => {\n\t\t\t\t\t\t\trecordEvent( 'tasklist_shipping_connect_store' );\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t),\n\t\t\t\tvisible: requiresJetpackConnection,\n\t\t\t},\n\t\t];\n\n\t\treturn filter( steps, ( step ) => step.visible );\n\t}\n\n\trender() {\n\t\tconst { isPending, step } = this.state;\n\t\tconst { isUpdateSettingsRequesting } = this.props;\n\n\t\treturn (\n\t\t\t<div className=\"woocommerce-task-shipping\">\n\t\t\t\t<Card className=\"is-narrow\">\n\t\t\t\t\t<Stepper\n\t\t\t\t\t\tisPending={ isPending || isUpdateSettingsRequesting }\n\t\t\t\t\t\tisVertical\n\t\t\t\t\t\tcurrentStep={ step }\n\t\t\t\t\t\tsteps={ this.getSteps() }\n\t\t\t\t\t/>\n\t\t\t\t</Card>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst { getSettings, isUpdateSettingsRequesting } = select(\n\t\t\tSETTINGS_STORE_NAME\n\t\t);\n\t\tconst { getActivePlugins, isJetpackConnected } = select(\n\t\t\tPLUGINS_STORE_NAME\n\t\t);\n\n\t\tconst { general: settings = {} } = getSettings( 'general' );\n\t\tconst countryCode = getCountryCode(\n\t\t\tsettings.woocommerce_default_country\n\t\t);\n\n\t\tconst { countries = [] } = getSetting( 'dataEndpoints', {} );\n\t\tconst country = countryCode\n\t\t\t? countries.find( ( c ) => c.code === countryCode )\n\t\t\t: null;\n\t\tconst countryName = country ? country.name : null;\n\t\tconst activePlugins = getActivePlugins();\n\n\t\treturn {\n\t\t\tcountryCode,\n\t\t\tcountryName,\n\t\t\tisUpdateSettingsRequesting: isUpdateSettingsRequesting( 'general' ),\n\t\t\tsettings,\n\t\t\tactivePlugins,\n\t\t\tisJetpackConnected: isJetpackConnected(),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { createNotice } = dispatch( 'core/notices' );\n\t\tconst { updateAndPersistSettingsForGroup } = dispatch(\n\t\t\tSETTINGS_STORE_NAME\n\t\t);\n\n\t\treturn {\n\t\t\tcreateNotice,\n\t\t\tupdateAndPersistSettingsForGroup,\n\t\t};\n\t} )\n)( Shipping );\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport apiFetch from '@wordpress/api-fetch';\nimport { compose } from '@wordpress/compose';\nimport { withDispatch } from '@wordpress/data';\nimport { Component, Fragment } from '@wordpress/element';\nimport { Button, FormToggle } from '@wordpress/components';\nimport PropTypes from 'prop-types';\nimport { Flag, Form, TextControlWithAffixes } from '@woocommerce/components';\nimport { ONBOARDING_STORE_NAME } from '@woocommerce/data';\nimport { recordEvent } from '@woocommerce/tracks';\n\n/**\n * Internal dependencies\n */\nimport { CurrencyContext } from '../../../lib/currency-context';\n\nclass ShippingRates extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.updateShippingZones = this.updateShippingZones.bind( this );\n\t}\n\n\tgetShippingMethods( zone, type = null ) {\n\t\t// Sometimes the wc/v3/shipping/zones response does not include a methods attribute, return early if so.\n\t\tif ( ! zone || ! zone.methods || ! Array.isArray( zone.methods ) ) {\n\t\t\treturn [];\n\t\t}\n\n\t\tif ( ! type ) {\n\t\t\treturn zone.methods;\n\t\t}\n\n\t\treturn zone.methods\n\t\t\t? zone.methods.filter( ( method ) => method.method_id === type )\n\t\t\t: [];\n\t}\n\n\tdisableShippingMethods( zone, methods ) {\n\t\tif ( ! methods.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tmethods.forEach( ( method ) => {\n\t\t\tapiFetch( {\n\t\t\t\tmethod: 'POST',\n\t\t\t\tpath: `/wc/v3/shipping/zones/${ zone.id }/methods/${ method.instance_id }`,\n\t\t\t\tdata: {\n\t\t\t\t\tenabled: false,\n\t\t\t\t},\n\t\t\t} );\n\t\t} );\n\t}\n\n\tasync updateShippingZones( values ) {\n\t\tconst {\n\t\t\tclearTaskStatusCache,\n\t\t\tcreateNotice,\n\t\t\tshippingZones,\n\t\t} = this.props;\n\n\t\tlet restOfTheWorld = false;\n\t\tlet shippingCost = false;\n\t\tshippingZones.forEach( ( zone ) => {\n\t\t\tif ( zone.id === 0 ) {\n\t\t\t\trestOfTheWorld =\n\t\t\t\t\tzone.toggleable && values[ `${ zone.id }_enabled` ];\n\t\t\t} else {\n\t\t\t\tshippingCost =\n\t\t\t\t\tvalues[ `${ zone.id }_rate` ] !== '' &&\n\t\t\t\t\tparseFloat( values[ `${ zone.id }_rate` ] ) !==\n\t\t\t\t\t\tparseFloat( 0 );\n\t\t\t}\n\n\t\t\tconst shippingMethods = this.getShippingMethods( zone );\n\t\t\tconst methodType =\n\t\t\t\tparseFloat( values[ `${ zone.id }_rate` ] ) === parseFloat( 0 )\n\t\t\t\t\t? 'free_shipping'\n\t\t\t\t\t: 'flat_rate';\n\t\t\tconst shippingMethod = this.getShippingMethods( zone, methodType )\n\t\t\t\t.length\n\t\t\t\t? this.getShippingMethods( zone, methodType )[ 0 ]\n\t\t\t\t: null;\n\n\t\t\tif ( zone.toggleable && ! values[ `${ zone.id }_enabled` ] ) {\n\t\t\t\t// Disable any shipping methods that exist if toggled off.\n\t\t\t\tthis.disableShippingMethods( zone, shippingMethods );\n\t\t\t\treturn;\n\t\t\t} else if ( shippingMethod ) {\n\t\t\t\t// Disable all methods except the one being updated.\n\t\t\t\tconst methodsToDisable = shippingMethods.filter(\n\t\t\t\t\t( method ) =>\n\t\t\t\t\t\tmethod.instance_id !== shippingMethod.instance_id\n\t\t\t\t);\n\t\t\t\tthis.disableShippingMethods( zone, methodsToDisable );\n\t\t\t}\n\n\t\t\tapiFetch( {\n\t\t\t\tmethod: 'POST',\n\t\t\t\tpath: shippingMethod\n\t\t\t\t\t? // Update the first existing method if one exists, otherwise create a new one.\n\t\t\t\t\t  `/wc/v3/shipping/zones/${ zone.id }/methods/${ shippingMethod.instance_id }`\n\t\t\t\t\t: `/wc/v3/shipping/zones/${ zone.id }/methods`,\n\t\t\t\tdata: {\n\t\t\t\t\tmethod_id: methodType,\n\t\t\t\t\tenabled: true,\n\t\t\t\t\tsettings: { cost: values[ `${ zone.id }_rate` ] },\n\t\t\t\t},\n\t\t\t} );\n\t\t} );\n\n\t\trecordEvent( 'tasklist_shipping_set_costs', {\n\t\t\tshipping_cost: shippingCost,\n\t\t\trest_world: restOfTheWorld,\n\t\t} );\n\n\t\tclearTaskStatusCache();\n\n\t\tcreateNotice(\n\t\t\t'success',\n\t\t\t__( 'Your shipping rates have been updated.', 'woocommerce-admin' )\n\t\t);\n\n\t\tthis.props.onComplete();\n\t}\n\n\trenderInputPrefix() {\n\t\tconst { symbolPosition, symbol } = this.context.getCurrencyConfig();\n\t\tif ( symbolPosition.indexOf( 'right' ) === 0 ) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (\n\t\t\t<span className=\"woocommerce-shipping-rate__control-prefix\">\n\t\t\t\t{ symbol }\n\t\t\t</span>\n\t\t);\n\t}\n\n\trenderInputSuffix( rate ) {\n\t\tconst { symbolPosition, symbol } = this.context.getCurrencyConfig();\n\t\tif ( symbolPosition.indexOf( 'right' ) === 0 ) {\n\t\t\treturn (\n\t\t\t\t<span className=\"woocommerce-shipping-rate__control-suffix\">\n\t\t\t\t\t{ symbol }\n\t\t\t\t</span>\n\t\t\t);\n\t\t}\n\n\t\treturn parseFloat( rate ) === parseFloat( 0 ) ? (\n\t\t\t<span className=\"woocommerce-shipping-rate__control-suffix\">\n\t\t\t\t{ __( 'Free shipping', 'woocommerce-admin' ) }\n\t\t\t</span>\n\t\t) : null;\n\t}\n\n\tgetFormattedRate( value ) {\n\t\tconst { formatDecimalString } = this.context;\n\t\tconst currencyString = formatDecimalString( value );\n\t\tif ( ! value.length || ! currencyString.length ) {\n\t\t\treturn formatDecimalString( 0 );\n\t\t}\n\n\t\treturn formatDecimalString( value );\n\t}\n\n\tgetInitialValues() {\n\t\tconst { formatDecimalString } = this.context;\n\t\tconst values = {};\n\n\t\tthis.props.shippingZones.forEach( ( zone ) => {\n\t\t\tconst shippingMethods = this.getShippingMethods( zone );\n\t\t\tconst rate =\n\t\t\t\tshippingMethods.length && shippingMethods[ 0 ].settings.cost\n\t\t\t\t\t? this.getFormattedRate(\n\t\t\t\t\t\t\tshippingMethods[ 0 ].settings.cost.value\n\t\t\t\t\t  )\n\t\t\t\t\t: formatDecimalString( 0 );\n\t\t\tvalues[ `${ zone.id }_rate` ] = rate;\n\n\t\t\tif ( shippingMethods.length && shippingMethods[ 0 ].enabled ) {\n\t\t\t\tvalues[ `${ zone.id }_enabled` ] = true;\n\t\t\t} else {\n\t\t\t\tvalues[ `${ zone.id }_enabled` ] = false;\n\t\t\t}\n\t\t} );\n\n\t\treturn values;\n\t}\n\n\tvalidate( values ) {\n\t\tconst errors = {};\n\n\t\tconst rates = Object.keys( values ).filter( ( field ) =>\n\t\t\tfield.endsWith( '_rate' )\n\t\t);\n\n\t\trates.forEach( ( rate ) => {\n\t\t\tif ( values[ rate ] < 0 ) {\n\t\t\t\terrors[ rate ] = __(\n\t\t\t\t\t'Shipping rates can not be negative numbers.',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t);\n\t\t\t}\n\t\t} );\n\n\t\treturn errors;\n\t}\n\n\trender() {\n\t\tconst { buttonText, shippingZones } = this.props;\n\n\t\tif ( ! shippingZones.length ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (\n\t\t\t<Form\n\t\t\t\tinitialValues={ this.getInitialValues() }\n\t\t\t\tonSubmitCallback={ this.updateShippingZones }\n\t\t\t\tvalidate={ this.validate }\n\t\t\t>\n\t\t\t\t{ ( {\n\t\t\t\t\tgetInputProps,\n\t\t\t\t\thandleSubmit,\n\t\t\t\t\tsetTouched,\n\t\t\t\t\tsetValue,\n\t\t\t\t\tvalues,\n\t\t\t\t} ) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t<div className=\"woocommerce-shipping-rates\">\n\t\t\t\t\t\t\t\t{ shippingZones.map( ( zone ) => (\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName=\"woocommerce-shipping-rate\"\n\t\t\t\t\t\t\t\t\t\tkey={ zone.id }\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<div className=\"woocommerce-shipping-rate__icon\">\n\t\t\t\t\t\t\t\t\t\t\t{ zone.locations ? (\n\t\t\t\t\t\t\t\t\t\t\t\tzone.locations.map(\n\t\t\t\t\t\t\t\t\t\t\t\t\t( location ) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Flag\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize={ 24 }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcode={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlocation.code\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlocation.code\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t// Icon used for zones without locations or \"Rest of the world\".\n\t\t\t\t\t\t\t\t\t\t\t\t<i className=\"material-icons-outlined\">\n\t\t\t\t\t\t\t\t\t\t\t\t\tpublic\n\t\t\t\t\t\t\t\t\t\t\t\t</i>\n\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"woocommerce-shipping-rate__main\">\n\t\t\t\t\t\t\t\t\t\t\t{ zone.toggleable ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<label\n\t\t\t\t\t\t\t\t\t\t\t\t\thtmlFor={ `woocommerce-shipping-rate__toggle-${ zone.id }` }\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"woocommerce-shipping-rate__name\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ zone.name }\n\t\t\t\t\t\t\t\t\t\t\t\t\t<FormToggle\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid={ `woocommerce-shipping-rate__toggle-${ zone.id }` }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ ...getInputProps(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t`${ zone.id }_enabled`\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"woocommerce-shipping-rate__name\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ zone.name }\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\t{ ( ! zone.toggleable ||\n\t\t\t\t\t\t\t\t\t\t\t\tvalues[\n\t\t\t\t\t\t\t\t\t\t\t\t\t`${ zone.id }_enabled`\n\t\t\t\t\t\t\t\t\t\t\t\t] ) && (\n\t\t\t\t\t\t\t\t\t\t\t\t<TextControlWithAffixes\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={ __(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'Shipping cost',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ ...getInputProps(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t`${ zone.id }_rate`\n\t\t\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\t\t\tonBlur={ () => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetTouched(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t`${ zone.id }_rate`\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetValue(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t`${ zone.id }_rate`,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.getFormattedRate(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalues[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t`${ zone.id }_rate`\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\t\t\t\t\tprefix={ this.renderInputPrefix() }\n\t\t\t\t\t\t\t\t\t\t\t\t\tsuffix={ this.renderInputSuffix(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalues[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t`${ zone.id }_rate`\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"muriel-input-text woocommerce-shipping-rate__control-wrapper\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t) ) }\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<Button isPrimary onClick={ handleSubmit }>\n\t\t\t\t\t\t\t\t{ buttonText ||\n\t\t\t\t\t\t\t\t\t__( 'Update', 'woocommerce-admin' ) }\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t);\n\t\t\t\t} }\n\t\t\t</Form>\n\t\t);\n\t}\n}\n\nShippingRates.propTypes = {\n\t/**\n\t * Text displayed on the primary button.\n\t */\n\tbuttonText: PropTypes.string,\n\t/**\n\t * Function used to mark the step complete.\n\t */\n\tonComplete: PropTypes.func.isRequired,\n\t/**\n\t * Function to create a transient notice in the store.\n\t */\n\tcreateNotice: PropTypes.func.isRequired,\n\t/**\n\t * Array of shipping zones returned from the WC REST API with added\n\t * `methods` and `locations` properties appended from separate API calls.\n\t */\n\tshippingZones: PropTypes.array,\n};\n\nShippingRates.defaultProps = {\n\tshippingZones: [],\n};\n\nShippingRates.contextType = CurrencyContext;\n\nexport default compose(\n\twithDispatch( ( dispatch ) => {\n\t\tconst { invalidateResolutionForStoreSelector } = dispatch(\n\t\t\tONBOARDING_STORE_NAME\n\t\t);\n\n\t\treturn {\n\t\t\tclearTaskStatusCache: () =>\n\t\t\t\tinvalidateResolutionForStoreSelector( 'getTasksStatus' ),\n\t\t};\n\t} )\n)( ShippingRates );\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Button } from '@wordpress/components';\nimport { Component, Fragment } from '@wordpress/element';\nimport { Form } from '@woocommerce/components';\n\n/**\n * Internal dependencies\n */\nimport {\n\tStoreAddress,\n\tvalidateStoreAddress,\n} from '../../../dashboard/components/settings/general/store-address';\n\nexport default class StoreLocation extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\t\tthis.onSubmit = this.onSubmit.bind( this );\n\t}\n\n\tasync onSubmit( values ) {\n\t\tconst {\n\t\t\tonComplete,\n\t\t\tcreateNotice,\n\t\t\tisSettingsError,\n\t\t\tupdateAndPersistSettingsForGroup,\n\t\t\tsettings,\n\t\t} = this.props;\n\n\t\tawait updateAndPersistSettingsForGroup( 'general', {\n\t\t\tgeneral: {\n\t\t\t\t...settings,\n\t\t\t\twoocommerce_store_address: values.addressLine1,\n\t\t\t\twoocommerce_store_address_2: values.addressLine2,\n\t\t\t\twoocommerce_default_country: values.countryState,\n\t\t\t\twoocommerce_store_city: values.city,\n\t\t\t\twoocommerce_store_postcode: values.postCode,\n\t\t\t},\n\t\t} );\n\n\t\tif ( ! isSettingsError ) {\n\t\t\tonComplete( values );\n\t\t} else {\n\t\t\tcreateNotice(\n\t\t\t\t'error',\n\t\t\t\t__(\n\t\t\t\t\t'There was a problem saving your store location.',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t}\n\n\tgetInitialValues() {\n\t\tconst { settings } = this.props;\n\n\t\tconst {\n\t\t\twoocommerce_store_address: storeAddress,\n\t\t\twoocommerce_store_address_2: storeAddress2,\n\t\t\twoocommerce_store_city: storeCity,\n\t\t\twoocommerce_default_country: defaultCountry,\n\t\t\twoocommerce_store_postcode: storePostcode,\n\t\t} = settings;\n\n\t\treturn {\n\t\t\taddressLine1: storeAddress || '',\n\t\t\taddressLine2: storeAddress2 || '',\n\t\t\tcity: storeCity || '',\n\t\t\tcountryState: defaultCountry || '',\n\t\t\tpostCode: storePostcode || '',\n\t\t};\n\t}\n\n\trender() {\n\t\tconst { isSettingsRequesting } = this.props;\n\n\t\tif ( isSettingsRequesting ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (\n\t\t\t<Form\n\t\t\t\tinitialValues={ this.getInitialValues() }\n\t\t\t\tonSubmitCallback={ this.onSubmit }\n\t\t\t\tvalidate={ validateStoreAddress }\n\t\t\t>\n\t\t\t\t{ ( { getInputProps, handleSubmit, setValue } ) => (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<StoreAddress\n\t\t\t\t\t\t\tgetInputProps={ getInputProps }\n\t\t\t\t\t\t\tsetValue={ setValue }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Button isPrimary onClick={ handleSubmit }>\n\t\t\t\t\t\t\t{ __( 'Continue', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Fragment>\n\t\t\t\t) }\n\t\t\t</Form>\n\t\t);\n\t}\n}\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Button, __experimentalText as Text } from '@wordpress/components';\nimport { Component, Fragment } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport { difference, filter } from 'lodash';\nimport interpolateComponents from 'interpolate-components';\nimport { withDispatch, withSelect } from '@wordpress/data';\nimport { Card, H, Link, Stepper, Plugins } from '@woocommerce/components';\nimport { getHistory, getNewPath } from '@woocommerce/navigation';\nimport { getAdminLink } from '@woocommerce/wc-admin-settings';\nimport {\n\tONBOARDING_STORE_NAME,\n\tOPTIONS_STORE_NAME,\n\tPLUGINS_STORE_NAME,\n\tSETTINGS_STORE_NAME,\n} from '@woocommerce/data';\nimport { recordEvent, queueRecordEvent } from '@woocommerce/tracks';\n\n/**\n * Internal dependencies\n */\nimport Connect from '../../dashboard/components/connect';\nimport { createNoticesFromResponse } from '../../lib/notices';\nimport { getCountryCode } from '../../dashboard/utils';\nimport StoreLocation from './steps/location';\n\nclass Tax extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tconst { hasCompleteAddress, pluginsToActivate } = props;\n\n\t\tthis.initialState = {\n\t\t\tisPending: false,\n\t\t\tstepIndex: hasCompleteAddress ? 1 : 0,\n\t\t\t// Cache the value of pluginsToActivate so that we can\n\t\t\t// show/hide tasks based on it, but not have them update mid task.\n\t\t\tcachedPluginsToActivate: pluginsToActivate,\n\t\t};\n\t\tthis.state = this.initialState;\n\n\t\tthis.completeStep = this.completeStep.bind( this );\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.reset();\n\t}\n\n\treset() {\n\t\tthis.setState( this.initialState );\n\t}\n\n\tshouldShowSuccessScreen() {\n\t\tconst {\n\t\t\tisJetpackConnected,\n\t\t\thasCompleteAddress,\n\t\t\tpluginsToActivate,\n\t\t} = this.props;\n\n\t\treturn (\n\t\t\thasCompleteAddress &&\n\t\t\t! pluginsToActivate.length &&\n\t\t\tisJetpackConnected &&\n\t\t\tthis.isTaxJarSupported()\n\t\t);\n\t}\n\n\tisTaxJarSupported() {\n\t\tconst { countryCode, tasksStatus } = this.props;\n\t\tconst {\n\t\t\tautomatedTaxSupportedCountries = [],\n\t\t\ttaxJarActivated,\n\t\t} = tasksStatus;\n\n\t\treturn (\n\t\t\t! taxJarActivated && // WCS integration doesn't work with the official TaxJar plugin.\n\t\t\tautomatedTaxSupportedCountries.includes( countryCode )\n\t\t);\n\t}\n\n\tcompleteStep() {\n\t\tconst { stepIndex } = this.state;\n\t\tconst steps = this.getSteps();\n\t\tconst nextStep = steps[ stepIndex + 1 ];\n\n\t\tif ( nextStep ) {\n\t\t\tthis.setState( { stepIndex: stepIndex + 1 } );\n\t\t}\n\t}\n\n\tasync manuallyConfigureTaxRates() {\n\t\tconst {\n\t\t\tgeneralSettings,\n\t\t\tupdateAndPersistSettingsForGroup,\n\t\t} = this.props;\n\n\t\tif ( generalSettings.woocommerce_calc_taxes !== 'yes' ) {\n\t\t\tthis.setState( { isPending: true } );\n\t\t\tupdateAndPersistSettingsForGroup( 'general', {\n\t\t\t\tgeneral: {\n\t\t\t\t\t...generalSettings,\n\t\t\t\t\twoocommerce_calc_taxes: 'yes',\n\t\t\t\t},\n\t\t\t} )\n\t\t\t\t.then( () => this.redirectToTaxSettings() )\n\t\t\t\t.catch( ( error ) => createNoticesFromResponse( error ) );\n\t\t} else {\n\t\t\tthis.redirectToTaxSettings();\n\t\t}\n\t}\n\n\tupdateAutomatedTax( isEnabling ) {\n\t\tconst {\n\t\t\tclearTaskStatusCache,\n\t\t\tcreateNotice,\n\t\t\tupdateAndPersistSettingsForGroup,\n\t\t\tgeneralSettings,\n\t\t\ttaxSettings,\n\t\t} = this.props;\n\n\t\tPromise.all( [\n\t\t\tupdateAndPersistSettingsForGroup( 'tax', {\n\t\t\t\ttax: {\n\t\t\t\t\t...taxSettings,\n\t\t\t\t\twc_connect_taxes_enabled: isEnabling ? 'yes' : 'no',\n\t\t\t\t},\n\t\t\t} ),\n\t\t\tupdateAndPersistSettingsForGroup( 'general', {\n\t\t\t\tgeneral: {\n\t\t\t\t\t...generalSettings,\n\t\t\t\t\twoocommerce_calc_taxes: 'yes',\n\t\t\t\t},\n\t\t\t} ),\n\t\t] )\n\t\t\t.then( () => {\n\t\t\t\tclearTaskStatusCache();\n\n\t\t\t\tif ( isEnabling ) {\n\t\t\t\t\tcreateNotice(\n\t\t\t\t\t\t'success',\n\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t\"You're awesome! One less item on your to-do list \",\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t\tgetHistory().push( getNewPath( {}, '/', {} ) );\n\t\t\t\t} else {\n\t\t\t\t\tthis.redirectToTaxSettings();\n\t\t\t\t}\n\t\t\t} )\n\t\t\t.catch( () => {\n\t\t\t\tcreateNotice(\n\t\t\t\t\t'error',\n\t\t\t\t\t__(\n\t\t\t\t\t\t'There was a problem updating your tax settings.',\n\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t} );\n\t}\n\n\tredirectToTaxSettings() {\n\t\twindow.location = getAdminLink(\n\t\t\t'admin.php?page=wc-settings&tab=tax&section=standard&wc_onboarding_active_task=tax'\n\t\t);\n\t}\n\n\tdoNotChargeSalesTax() {\n\t\tconst { updateOptions } = this.props;\n\n\t\tqueueRecordEvent( 'tasklist_tax_connect_store', {\n\t\t\tconnect: false,\n\t\t\tno_tax: true,\n\t\t} );\n\n\t\tupdateOptions( {\n\t\t\twoocommerce_no_sales_tax: true,\n\t\t\twoocommerce_calc_taxes: 'no',\n\t\t} ).then( () => {\n\t\t\twindow.location = getAdminLink( 'admin.php?page=wc-admin' );\n\t\t} );\n\t}\n\n\tgetSteps() {\n\t\tconst {\n\t\t\tgeneralSettings,\n\t\t\tisJetpackConnected,\n\t\t\tisPending,\n\t\t\ttosAccepted,\n\t\t\tupdateOptions,\n\t\t} = this.props;\n\t\tconst { cachedPluginsToActivate } = this.state;\n\n\t\tconst steps = [\n\t\t\t{\n\t\t\t\tkey: 'store_location',\n\t\t\t\tlabel: __( 'Set store location', 'woocommerce-admin' ),\n\t\t\t\tdescription: __(\n\t\t\t\t\t'The address from which your business operates',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tcontent: (\n\t\t\t\t\t<StoreLocation\n\t\t\t\t\t\t{ ...this.props }\n\t\t\t\t\t\tonComplete={ ( values ) => {\n\t\t\t\t\t\t\tconst country = getCountryCode(\n\t\t\t\t\t\t\t\tvalues.countryState\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\trecordEvent( 'tasklist_tax_set_location', {\n\t\t\t\t\t\t\t\tcountry,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\tthis.completeStep();\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tisSettingsRequesting={ false }\n\t\t\t\t\t\tsettings={ generalSettings }\n\t\t\t\t\t/>\n\t\t\t\t),\n\t\t\t\tvisible: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'plugins',\n\t\t\t\tlabel: __(\n\t\t\t\t\t'Install Jetpack and WooCommerce Tax',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tdescription: __(\n\t\t\t\t\t'Jetpack and WooCommerce Tax allow you to automate sales tax calculations',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tcontent: (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<Plugins\n\t\t\t\t\t\t\tonComplete={ ( plugins, response ) => {\n\t\t\t\t\t\t\t\tcreateNoticesFromResponse( response );\n\t\t\t\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t\t\t\t'tasklist_tax_install_extensions',\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tinstall_extensions: true,\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tupdateOptions( {\n\t\t\t\t\t\t\t\t\twoocommerce_setup_jetpack_opted_in: true,\n\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\tthis.completeStep();\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tonError={ ( errors, response ) =>\n\t\t\t\t\t\t\t\tcreateNoticesFromResponse( response )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tonSkip={ () => {\n\t\t\t\t\t\t\t\tqueueRecordEvent(\n\t\t\t\t\t\t\t\t\t'tasklist_tax_install_extensions',\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tinstall_extensions: false,\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tthis.manuallyConfigureTaxRates();\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tskipText={ __(\n\t\t\t\t\t\t\t\t'Set up tax rates manually',\n\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\tonAbort={ () => this.doNotChargeSalesTax() }\n\t\t\t\t\t\t\tabortText={ __(\n\t\t\t\t\t\t\t\t\"My business doesn't charge sales tax\",\n\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{ ! tosAccepted && (\n\t\t\t\t\t\t\t<Text\n\t\t\t\t\t\t\t\tvariant=\"caption\"\n\t\t\t\t\t\t\t\tclassName=\"woocommerce-task__caption\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ interpolateComponents( {\n\t\t\t\t\t\t\t\t\tmixedString: __(\n\t\t\t\t\t\t\t\t\t\t'By installing Jetpack and WooCommerce Tax you agree to the {{link}}Terms of Service{{/link}}.',\n\t\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tcomponents: {\n\t\t\t\t\t\t\t\t\t\tlink: (\n\t\t\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\t\t\thref={\n\t\t\t\t\t\t\t\t\t\t\t\t\t'https://wordpress.com/tos/'\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"external\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t} ) }\n\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</Fragment>\n\t\t\t\t),\n\t\t\t\tvisible:\n\t\t\t\t\t( cachedPluginsToActivate.length || ! tosAccepted ) &&\n\t\t\t\t\tthis.isTaxJarSupported(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'connect',\n\t\t\t\tlabel: __( 'Connect your store', 'woocommerce-admin' ),\n\t\t\t\tdescription: __(\n\t\t\t\t\t'Connect your store to WordPress.com to enable automated sales tax calculations',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tcontent: (\n\t\t\t\t\t<Connect\n\t\t\t\t\t\t{ ...this.props }\n\t\t\t\t\t\tonConnect={ () => {\n\t\t\t\t\t\t\trecordEvent( 'tasklist_tax_connect_store', {\n\t\t\t\t\t\t\t\tconnect: true,\n\t\t\t\t\t\t\t\tno_tax: false,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tonSkip={ () => {\n\t\t\t\t\t\t\tqueueRecordEvent( 'tasklist_tax_connect_store', {\n\t\t\t\t\t\t\t\tconnect: false,\n\t\t\t\t\t\t\t\tno_tax: false,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\tthis.manuallyConfigureTaxRates();\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tskipText={ __(\n\t\t\t\t\t\t\t'Set up tax rates manually',\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tonAbort={ () => this.doNotChargeSalesTax() }\n\t\t\t\t\t\tabortText={ __(\n\t\t\t\t\t\t\t\"My business doesn't charge sales tax\",\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t) }\n\t\t\t\t\t/>\n\t\t\t\t),\n\t\t\t\tvisible: ! isJetpackConnected && this.isTaxJarSupported(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'manual_configuration',\n\t\t\t\tlabel: __( 'Configure tax rates', 'woocommerce-admin' ),\n\t\t\t\tdescription: __(\n\t\t\t\t\t'Head over to the tax rate settings screen to configure your tax rates',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tcontent: (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tdisabled={ isPending }\n\t\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\t\tisBusy={ isPending }\n\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\trecordEvent( 'tasklist_tax_config_rates' );\n\t\t\t\t\t\t\t\tthis.manuallyConfigureTaxRates();\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Configure', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t{ generalSettings.woocommerce_calc_taxes !==\n\t\t\t\t\t\t\t\t'yes' &&\n\t\t\t\t\t\t\t\tinterpolateComponents( {\n\t\t\t\t\t\t\t\t\tmixedString: __(\n\t\t\t\t\t\t\t\t\t\t/*eslint-disable max-len*/\n\t\t\t\t\t\t\t\t\t\t'By clicking \"Configure\" you\\'re enabling tax rates and calculations. More info {{link}}here{{/link}}.',\n\t\t\t\t\t\t\t\t\t\t/*eslint-enable max-len*/\n\t\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tcomponents: {\n\t\t\t\t\t\t\t\t\t\tlink: (\n\t\t\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\t\t\thref=\"https://docs.woocommerce.com/document/setting-up-taxes-in-woocommerce/#section-1\"\n\t\t\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"external\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t} ) }\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</Fragment>\n\t\t\t\t),\n\t\t\t\tvisible: ! this.isTaxJarSupported(),\n\t\t\t},\n\t\t];\n\n\t\treturn filter( steps, ( step ) => step.visible );\n\t}\n\n\trenderSuccessScreen() {\n\t\tconst { isPending } = this.props;\n\n\t\treturn (\n\t\t\t<div className=\"woocommerce-task-tax__success\">\n\t\t\t\t<span\n\t\t\t\t\tclassName=\"woocommerce-task-tax__success-icon\"\n\t\t\t\t\trole=\"img\"\n\t\t\t\t\taria-labelledby=\"woocommerce-task-tax__success-message\"\n\t\t\t\t>\n\t\t\t\t\t\n\t\t\t\t</span>\n\t\t\t\t<H id=\"woocommerce-task-tax__success-message\">\n\t\t\t\t\t{ __( 'Good news!', 'woocommerce-admin' ) }\n\t\t\t\t</H>\n\t\t\t\t<p>\n\t\t\t\t\t{ interpolateComponents( {\n\t\t\t\t\t\tmixedString: __(\n\t\t\t\t\t\t\t'{{strong}}Jetpack{{/strong}} and {{strong}}WooCommerce Tax{{/strong}} ' +\n\t\t\t\t\t\t\t\t'can automate your sales tax calculations for you.',\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t),\n\t\t\t\t\t\tcomponents: {\n\t\t\t\t\t\t\tstrong: <strong />,\n\t\t\t\t\t\t},\n\t\t\t\t\t} ) }\n\t\t\t\t</p>\n\t\t\t\t<Button\n\t\t\t\t\tdisabled={ isPending }\n\t\t\t\t\tisPrimary\n\t\t\t\t\tisBusy={ isPending }\n\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\trecordEvent( 'tasklist_tax_setup_automated_proceed', {\n\t\t\t\t\t\t\tsetup_automatically: true,\n\t\t\t\t\t\t} );\n\t\t\t\t\t\tthis.updateAutomatedTax( true );\n\t\t\t\t\t} }\n\t\t\t\t>\n\t\t\t\t\t{ __( 'Yes please', 'woocommerce-admin' ) }\n\t\t\t\t</Button>\n\t\t\t\t<Button\n\t\t\t\t\tdisabled={ isPending }\n\t\t\t\t\tisBusy={ isPending }\n\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\trecordEvent( 'tasklist_tax_setup_automated_proceed', {\n\t\t\t\t\t\t\tsetup_automatically: false,\n\t\t\t\t\t\t} );\n\t\t\t\t\t\tthis.updateAutomatedTax( false );\n\t\t\t\t\t} }\n\t\t\t\t>\n\t\t\t\t\t{ __(\n\t\t\t\t\t\t\"No thanks, I'll configure taxes manually\",\n\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t) }\n\t\t\t\t</Button>\n\t\t\t\t<Button\n\t\t\t\t\tdisabled={ isPending }\n\t\t\t\t\tisBusy={ isPending }\n\t\t\t\t\tonClick={ () => this.doNotChargeSalesTax() }\n\t\t\t\t>\n\t\t\t\t\t{ __(\n\t\t\t\t\t\t\"My business doesn't charge sales tax\",\n\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t) }\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst { stepIndex } = this.state;\n\t\tconst { isPending, isResolving } = this.props;\n\t\tconst step = this.getSteps()[ stepIndex ];\n\n\t\treturn (\n\t\t\t<div className=\"woocommerce-task-tax\">\n\t\t\t\t<Card className=\"is-narrow\">\n\t\t\t\t\t{ this.shouldShowSuccessScreen() ? (\n\t\t\t\t\t\tthis.renderSuccessScreen()\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<Stepper\n\t\t\t\t\t\t\tisPending={ isPending || isResolving }\n\t\t\t\t\t\t\tisVertical={ true }\n\t\t\t\t\t\t\tcurrentStep={ step.key }\n\t\t\t\t\t\t\tsteps={ this.getSteps() }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</Card>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst { getSettings, isUpdateSettingsRequesting } = select(\n\t\t\tSETTINGS_STORE_NAME\n\t\t);\n\t\tconst { getOption } = select( OPTIONS_STORE_NAME );\n\t\tconst {\n\t\t\tgetActivePlugins,\n\t\t\tisJetpackConnected,\n\t\t\tisPluginsRequesting,\n\t\t} = select( PLUGINS_STORE_NAME );\n\t\tconst { getTasksStatus } = select( ONBOARDING_STORE_NAME );\n\n\t\tconst { general: generalSettings = {} } = getSettings( 'general' );\n\t\tconst countryCode = getCountryCode(\n\t\t\tgeneralSettings.woocommerce_default_country\n\t\t);\n\t\tconst {\n\t\t\twoocommerce_store_address: storeAddress,\n\t\t\twoocommerce_default_country: defaultCountry,\n\t\t\twoocommerce_store_postcode: storePostCode,\n\t\t} = generalSettings;\n\t\tconst hasCompleteAddress = Boolean(\n\t\t\tstoreAddress && defaultCountry && storePostCode\n\t\t);\n\n\t\tconst { tax: taxSettings = {} } = getSettings( 'tax' );\n\t\tconst activePlugins = getActivePlugins();\n\t\tconst pluginsToActivate = difference(\n\t\t\t[ 'jetpack', 'woocommerce-services' ],\n\t\t\tactivePlugins\n\t\t);\n\t\tconst connectOptions = getOption( 'wc_connect_options' ) || {};\n\t\tconst tosAccepted =\n\t\t\tconnectOptions.tos_accepted ||\n\t\t\tgetOption( 'woocommerce_setup_jetpack_opted_in' );\n\n\t\tconst tasksStatus = getTasksStatus();\n\n\t\tconst isPending =\n\t\t\tisUpdateSettingsRequesting( 'tax' ) ||\n\t\t\tisUpdateSettingsRequesting( 'general' );\n\t\tconst isResolving = isPluginsRequesting( 'getJetpackConnectUrl' );\n\n\t\treturn {\n\t\t\tcountryCode,\n\t\t\tgeneralSettings,\n\t\t\thasCompleteAddress,\n\t\t\tisJetpackConnected: isJetpackConnected(),\n\t\t\tisPending,\n\t\t\tisResolving,\n\t\t\tpluginsToActivate,\n\t\t\ttasksStatus,\n\t\t\ttaxSettings,\n\t\t\ttosAccepted,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { createNotice } = dispatch( 'core/notices' );\n\t\tconst { updateOptions } = dispatch( OPTIONS_STORE_NAME );\n\t\tconst { updateAndPersistSettingsForGroup } = dispatch(\n\t\t\tSETTINGS_STORE_NAME\n\t\t);\n\t\tconst { invalidateResolutionForStoreSelector } = dispatch(\n\t\t\tONBOARDING_STORE_NAME\n\t\t);\n\n\t\treturn {\n\t\t\tclearTaskStatusCache: () =>\n\t\t\t\tinvalidateResolutionForStoreSelector( 'getTasksStatus' ),\n\t\t\tcreateNotice,\n\t\t\tupdateAndPersistSettingsForGroup,\n\t\t\tupdateOptions,\n\t\t};\n\t} )\n)( Tax );\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;"],"sourceRoot":""}