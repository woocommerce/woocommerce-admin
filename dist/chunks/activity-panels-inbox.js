(window.__wcAdmin_webpackJsonp=window.__wcAdmin_webpackJsonp||[]).push([[4],{515:function(e,t,c){"use strict";c.d(t,"a",(function(){return j})),c.d(t,"b",(function(){return p}));var o=c(0),a=c(6),n=c.n(a),s=c(63),i=c.n(s),r=c(9),l=c.n(r),m=c(1),d=c.n(m),b=c(21),_=c(3),u=(c(527),c(4));class O extends o.Component{render(){const{className:e,hasAction:t,hasDate:c,hasSubtitle:a,lines:s}=this.props,i=n()("woocommerce-activity-card is-loading",e);return Object(o.createElement)("div",{className:i,"aria-hidden":!0},Object(o.createElement)("span",{className:"woocommerce-activity-card__icon"},Object(o.createElement)("span",{className:"is-placeholder"})),Object(o.createElement)("div",{className:"woocommerce-activity-card__header"},Object(o.createElement)("div",{className:"woocommerce-activity-card__title is-placeholder"}),a&&Object(o.createElement)("div",{className:"woocommerce-activity-card__subtitle is-placeholder"}),c&&Object(o.createElement)("div",{className:"woocommerce-activity-card__date"},Object(o.createElement)("span",{className:"is-placeholder"}))),Object(o.createElement)("div",{className:"woocommerce-activity-card__body"},Object(u.range)(s).map(e=>Object(o.createElement)("span",{className:"is-placeholder",key:e}))),t&&Object(o.createElement)("div",{className:"woocommerce-activity-card__actions"},Object(o.createElement)("span",{className:"is-placeholder"})))}}O.propTypes={className:d.a.string,hasAction:d.a.bool,hasDate:d.a.bool,hasSubtitle:d.a.bool,lines:d.a.number},O.defaultProps={hasAction:!1,hasDate:!1,hasSubtitle:!1,lines:1};var p=O;class j extends o.Component{getCard(){const{actions:e,className:t,children:c,date:a,icon:s,subtitle:i,title:r,unread:m}=this.props,d=n()("woocommerce-activity-card",t),_=Array.isArray(e)?e:[e],u=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/.test(a)?l.a.utc(a).fromNow():a;return Object(o.createElement)("section",{className:d},m&&Object(o.createElement)("span",{className:"woocommerce-activity-card__unread"}),s&&Object(o.createElement)("span",{className:"woocommerce-activity-card__icon","aria-hidden":!0},s),r&&Object(o.createElement)("header",{className:"woocommerce-activity-card__header"},Object(o.createElement)(b.H,{className:"woocommerce-activity-card__title"},r),i&&Object(o.createElement)("div",{className:"woocommerce-activity-card__subtitle"},i),u&&Object(o.createElement)("span",{className:"woocommerce-activity-card__date"},u)),c&&Object(o.createElement)(b.Section,{className:"woocommerce-activity-card__body"},c),e&&Object(o.createElement)("footer",{className:"woocommerce-activity-card__actions"},_.map((e,t)=>Object(o.cloneElement)(e,{key:t}))))}render(){const{onClick:e}=this.props;return e?Object(o.createElement)(_.Button,{className:"woocommerce-activity-card__button",onClick:e},this.getCard()):this.getCard()}}j.propTypes={actions:d.a.oneOfType([d.a.arrayOf(d.a.element),d.a.element]),onClick:d.a.func,className:d.a.string,children:d.a.node,date:d.a.string,icon:d.a.node,subtitle:d.a.node,title:d.a.oneOfType([d.a.string,d.a.node]),unread:d.a.bool},j.defaultProps={icon:Object(o.createElement)(i.a,{size:48}),unread:!1}},520:function(e,t,c){"use strict";function o(e){return e?e.substr(1).split("&").reduce((e,t)=>{const c=t.split("="),o=c[0];let a=decodeURIComponent(c[1]);return a=isNaN(Number(a))?a:Number(a),e[o]=a,e},{}):{}}function a(){let e="";const{page:t,path:c,post_type:a}=o(window.location.search);if(t){const o="wc-admin"===t?"home_screen":t;e=c?c.replace(/\//g,"_").substring(1):o}else a&&(e=a);return e}c.d(t,"b",(function(){return o})),c.d(t,"a",(function(){return a}))},527:function(e,t,c){},528:function(e,t,c){},545:function(e,t,c){"use strict";var o=c(0),a=c(2),n=c(21),s=c(3),i=c(11),r=c(7),l=c(15),m=c(173),d=c(169),b=c(17),_=c(9),u=c.n(_),O=c(515),p=c(164),j=c(520);var w=({onClose:e})=>{const{createNotice:t}=Object(r.useDispatch)("core/notices"),{batchUpdateNotes:c,removeAllNotes:n}=Object(r.useDispatch)(i.NOTES_STORE_NAME);return Object(o.createElement)(o.Fragment,null,Object(o.createElement)(s.Modal,{title:Object(a.__)("Dismiss all messages","woocommerce-admin"),className:"woocommerce-inbox-dismiss-all-modal",onRequestClose:e},Object(o.createElement)("div",{className:"woocommerce-inbox-dismiss-all-modal__wrapper"},Object(o.createElement)("div",{className:"woocommerce-usage-modal__message"},Object(a.__)("Are you sure? Inbox messages will be dismissed forever.","woocommerce-admin")),Object(o.createElement)("div",{className:"woocommerce-usage-modal__actions"},Object(o.createElement)(s.Button,{onClick:e},Object(a.__)("Cancel","woocommerce-admin")),Object(o.createElement)(s.Button,{isPrimary:!0,onClick:()=>{(async()=>{Object(l.recordEvent)("wcadmin_inbox_action_dismissall",{});try{const e=await n({status:"unactioned"});t("success",Object(a.__)("All messages dismissed","woocommerce-admin"),{actions:[{label:Object(a.__)("Undo","woocommerce-admin"),onClick:()=>{c(e.map(e=>e.id),{is_deleted:0})}}]})}catch(c){t("error",Object(a.__)("Messages could not be dismissed","woocommerce-admin")),e()}})(),e()}},Object(a.__)("Yes, dismiss all","woocommerce-admin"))))))};c(528);const E=(e,t)=>{Object(l.recordEvent)("inbox_action_click",{note_name:e.name,note_title:e.title,note_content_inner_link:t})},N=({hasNotes:e,isBatchUpdating:t,notes:c,onDismiss:i,onNoteActionClick:r,setShowDismissAllModal:_,showHeader:u=!0})=>{if(t)return;if(!e)return Object(o.createElement)(O.a,{className:"woocommerce-empty-activity-card",title:Object(a.__)("Your inbox is empty","woocommerce-admin"),icon:!1},Object(a.__)("As things begin to happen in your store your inbox will start to fill up. You'll see things like achievements, new feature announcements, extension recommendations and more!","woocommerce-admin"));Object(l.recordEvent)("inbox_panel_view",{total:c.length});const p=Object(j.a)(),w=e=>{Object(l.recordEvent)("inbox_note_view",{note_content:e.content,note_name:e.name,note_title:e.title,note_type:e.type,screen:p})},N=Object.keys(c).map(e=>c[e]);return Object(o.createElement)(s.Card,{size:"large"},u&&Object(o.createElement)(s.CardHeader,{size:"medium"},Object(o.createElement)("div",{className:"wooocommerce-inbox-card__header"},Object(o.createElement)(b.Text,{size:"20",lineHeight:"28px",variant:"title.small"},Object(a.__)("Inbox","woocommerce-admin")),Object(o.createElement)(n.Badge,{count:N.length})),Object(o.createElement)(n.EllipsisMenu,{label:Object(a.__)("Inbox Notes Options","woocommerce-admin"),renderContent:({onToggle:e})=>Object(o.createElement)("div",{className:"woocommerce-inbox-card__section-controls"},Object(o.createElement)(s.Button,{onClick:()=>{_(!0),e()}},Object(a.__)("Dismiss all","woocommerce-admin")))})),Object(o.createElement)(m.a,{role:"menu"},N.map(e=>{const{id:t,is_deleted:c}=e;return c?null:Object(o.createElement)(d.a,{key:t,timeout:500,classNames:"woocommerce-inbox-message"},Object(o.createElement)(b.InboxNoteCard,{key:t,note:e,onDismiss:i,onNoteActionClick:r,onBodyLinkClick:E,onNoteVisible:w}))})))},h={page:1,per_page:i.QUERY_DEFAULTS.pageSize,status:"unactioned,actioned",type:i.QUERY_DEFAULTS.noteTypes,orderby:"date",order:"desc",_fields:["id","name","title","content","type","status","actions","date_created","date_created_gmt","layout","image","is_deleted","is_read","locale"]};t.a=({showHeader:e=!0})=>{const{createNotice:t}=Object(r.useDispatch)("core/notices"),{removeNote:c,updateNote:s,triggerNoteAction:m}=Object(r.useDispatch)(i.NOTES_STORE_NAME),{isError:d,isResolvingNotes:_,isBatchUpdating:O,notes:E}=Object(r.useSelect)(e=>{const{getNotes:t,getNotesError:c,isResolving:o,isNotesRequesting:a}=e(i.NOTES_STORE_NAME),n=u()("2022-01-11","YYYY-MM-DD").valueOf(),s=["en_US","en_AU","en_CA","en_GB","en_ZA"];return{notes:t(h).map(e=>{const t=u()(e.date_created_gmt,"YYYY-MM-DD").valueOf();return s.includes(e.locale)&&t>=n&&(e.content=Object(p.c)(e.content,320)),e}),isError:Boolean(c("getNotes",[h])),isResolvingNotes:o("getNotes",[h]),isBatchUpdating:a("batchUpdateNotes")}}),[g,v]=Object(o.useState)(!1);if(d){const e=Object(a.__)("There was an error getting your inbox. Please try again.","woocommerce-admin"),t=Object(a.__)("Reload","woocommerce-admin"),c=()=>{window.location.reload()};return Object(o.createElement)(n.EmptyContent,{title:e,actionLabel:t,actionURL:null,actionCallback:c})}const y=Object(p.b)(E);return Object(o.createElement)(o.Fragment,null,g&&Object(o.createElement)(w,{onClose:()=>{v(!1)}}),Object(o.createElement)("div",{className:"woocommerce-homepage-notes-wrapper"},(_||O)&&Object(o.createElement)(n.Section,null,Object(o.createElement)(b.InboxNotePlaceholder,{className:"banner message-is-unread"})),Object(o.createElement)(n.Section,null,!_&&!O&&N({hasNotes:y,isBatchUpdating:O,notes:E,onDismiss:e=>{const o=Object(j.a)();Object(l.recordEvent)("inbox_action_dismiss",{note_name:e.name,note_title:e.title,note_name_dismiss_all:!1,note_name_dismiss_confirmation:!0,screen:o});const n=e.id;try{c(n),t("success",Object(a.__)("Message dismissed","woocommerce-admin"),{actions:[{label:Object(a.__)("Undo","woocommerce-admin"),onClick:()=>{s(n,{is_deleted:0})}}]})}catch(e){t("error",Object(a._n)("Message could not be dismissed","Messages could not be dismissed",1,"woocommerce-admin"))}},onNoteActionClick:(e,t)=>{m(e.id,t.id)},setShowDismissAllModal:v,showHeader:e}))))}},602:function(e,t,c){},621:function(e,t,c){"use strict";c.r(t),c.d(t,"InboxPanel",(function(){return s}));var o=c(0),a=(c(602),c(545)),n=c(255);const s=({hasAbbreviatedNotifications:e,thingsToDoNextCount:t})=>Object(o.createElement)("div",{className:"woocommerce-notification-panels"},e&&Object(o.createElement)(n.b,{thingsToDoNextCount:t}),Object(o.createElement)(a.a,{showHeader:!1}));t.default=s},63:function(e,t,c){"use strict";var o=Object.assign||function(e){for(var t,c=1;c<arguments.length;c++)for(var o in t=arguments[c])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,c=e.size,a=void 0===c?24:c,n=e.onClick,i=(e.icon,e.className),r=function(e,t){var c={};for(var o in e)0<=t.indexOf(o)||Object.prototype.hasOwnProperty.call(e,o)&&(c[o]=e[o]);return c}(e,["size","onClick","icon","className"]),l=["gridicon","gridicons-notice-outline",i,(t=a,!(0!=t%18)&&"needs-offset"),!1,!1].filter(Boolean).join(" ");return s.default.createElement("svg",o({className:l,height:a,width:a,onClick:n},r,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),s.default.createElement("g",null,s.default.createElement("path",{d:"M12 4c4.41 0 8 3.59 8 8s-3.59 8-8 8-8-3.59-8-8 3.59-8 8-8m0-2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zm1 13h-2v2h2v-2zm-2-2h2l.5-6h-3l.5 6z"})))};var a,n=c(5),s=(a=n)&&a.__esModule?a:{default:a};e.exports=t.default}}]);