{"version":3,"sources":["webpack://wc.[modulename]/./client/analytics/components/report-error/index.js","webpack://wc.[modulename]/./client/analytics/report/index.js","webpack://wc.[modulename]/./client/analytics/report/style.scss","webpack://wc.[modulename]/./client/lib/currency-context.js"],"names":["ReportError","props","className","isError","isEmpty","title","actionLabel","actionURL","actionCallback","__","window","location","reload","getAdminLink","Component","propTypes","PropTypes","string","bool","defaultProps","getReportParam","params","path","report","replace","Report","arguments","state","hasError","error","setState","console","warn","reportParam","find","getReports","Container","component","getFilteredCurrencyInstance","getQuery","object","isRequired","compose","withSelect","select","query","search","searchWords","getSearchWords","mappedReport","filter","itemsResult","searchItemsByString","isRequesting","items","ids","Object","keys","length","join","appCurrency","CurrencyFactory","CURRENCY","config","getCurrencyConfig","filteredConfig","applyFilters","CurrencyContext","createContext"],"mappings":"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","file":"chunks/analytics-report.min.js","sourcesContent":["/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component } from '@wordpress/element';\nimport PropTypes from 'prop-types';\nimport { EmptyContent } from '@woocommerce/components';\nimport { getAdminLink } from '@woocommerce/wc-admin-settings';\n\n/**\n * Component to render when there is an error in a report component due to data\n * not being loaded or being invalid.\n */\nclass ReportError extends Component {\n\trender() {\n\t\tconst { className, isError, isEmpty } = this.props;\n\t\tlet title, actionLabel, actionURL, actionCallback;\n\n\t\tif ( isError ) {\n\t\t\ttitle = __(\n\t\t\t\t'There was an error getting your stats. Please try again.',\n\t\t\t\t'woocommerce-admin'\n\t\t\t);\n\t\t\tactionLabel = __( 'Reload', 'woocommerce-admin' );\n\t\t\tactionCallback = () => {\n\t\t\t\t// @todo Add tracking for how often an error is displayed, and the reload action is clicked.\n\t\t\t\twindow.location.reload();\n\t\t\t};\n\t\t} else if ( isEmpty ) {\n\t\t\ttitle = __(\n\t\t\t\t'No results could be found for this date range.',\n\t\t\t\t'woocommerce-admin'\n\t\t\t);\n\t\t\tactionLabel = __( 'View Orders', 'woocommerce-admin' );\n\t\t\tactionURL = getAdminLink( 'edit.php?post_type=shop_order' );\n\t\t}\n\t\treturn (\n\t\t\t<EmptyContent\n\t\t\t\tclassName={ className }\n\t\t\t\ttitle={ title }\n\t\t\t\tactionLabel={ actionLabel }\n\t\t\t\tactionURL={ actionURL }\n\t\t\t\tactionCallback={ actionCallback }\n\t\t\t/>\n\t\t);\n\t}\n}\n\nReportError.propTypes = {\n\t/**\n\t * Additional class name to style the component.\n\t */\n\tclassName: PropTypes.string,\n\t/**\n\t * Boolean representing whether there was an error.\n\t */\n\tisError: PropTypes.bool,\n\t/**\n\t * Boolean representing whether the issue is that there is no data.\n\t */\n\tisEmpty: PropTypes.bool,\n};\n\nReportError.defaultProps = {\n\tclassName: '',\n};\n\nexport default ReportError;\n","/**\n * External dependencies\n */\nimport { Component } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport { withSelect } from '@wordpress/data';\nimport PropTypes from 'prop-types';\nimport { find } from 'lodash';\nimport { getQuery, getSearchWords } from '@woocommerce/navigation';\nimport { searchItemsByString } from '@woocommerce/data';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport ReportError from '../components/report-error';\nimport {\n\tCurrencyContext,\n\tgetFilteredCurrencyInstance,\n} from '../../lib/currency-context';\nimport getReports from './get-reports';\n\n/**\n * The Customers Report will not have the `report` param supplied by the router/\n * because it no longer exists under the path `/analytics/:report`. Use `props.path`/\n * instead to determine if the Customers Report is being rendered.\n *\n * @param {Object} args\n * @param {Object} args.params - url parameters\n * @param {string} args.path\n * @return {string} - report parameter\n */\nconst getReportParam = ( { params, path } ) => {\n\treturn params.report || path.replace( /^\\/+/, '' );\n};\n\nclass Report extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.state = {\n\t\t\thasError: false,\n\t\t};\n\t}\n\n\tcomponentDidCatch( error ) {\n\t\tthis.setState( {\n\t\t\thasError: true,\n\t\t} );\n\t\t/* eslint-disable no-console */\n\t\tconsole.warn( error );\n\t\t/* eslint-enable no-console */\n\t}\n\n\trender() {\n\t\tif ( this.state.hasError ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst { isError } = this.props;\n\n\t\tif ( isError ) {\n\t\t\treturn <ReportError isError />;\n\t\t}\n\n\t\tconst reportParam = getReportParam( this.props );\n\n\t\tconst report = find( getReports(), { report: reportParam } );\n\t\tif ( ! report ) {\n\t\t\treturn null;\n\t\t}\n\t\tconst Container = report.component;\n\t\treturn (\n\t\t\t<CurrencyContext.Provider\n\t\t\t\tvalue={ getFilteredCurrencyInstance( getQuery() ) }\n\t\t\t>\n\t\t\t\t<Container { ...this.props } />\n\t\t\t</CurrencyContext.Provider>\n\t\t);\n\t}\n}\n\nReport.propTypes = {\n\tparams: PropTypes.object.isRequired,\n};\n\nexport default compose(\n\twithSelect( ( select, props ) => {\n\t\tconst query = getQuery();\n\t\tconst { search } = query;\n\n\t\tif ( ! search ) {\n\t\t\treturn {};\n\t\t}\n\n\t\tconst report = getReportParam( props );\n\t\tconst searchWords = getSearchWords( query );\n\t\t// Single Category view in Categories Report uses the products endpoint, so search must also.\n\t\tconst mappedReport =\n\t\t\treport === 'categories' && query.filter === 'single_category'\n\t\t\t\t? 'products'\n\t\t\t\t: report;\n\t\tconst itemsResult = searchItemsByString(\n\t\t\tselect,\n\t\t\tmappedReport,\n\t\t\tsearchWords\n\t\t);\n\t\tconst { isError, isRequesting, items } = itemsResult;\n\t\tconst ids = Object.keys( items );\n\t\tif ( ! ids.length ) {\n\t\t\treturn {\n\t\t\t\tisError,\n\t\t\t\tisRequesting,\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\tisError,\n\t\t\tisRequesting,\n\t\t\tquery: {\n\t\t\t\t...props.query,\n\t\t\t\t[ mappedReport ]: ids.join( ',' ),\n\t\t\t},\n\t\t};\n\t} )\n)( Report );\n","// extracted by mini-css-extract-plugin","/**\n * External dependencies\n */\nimport { createContext } from '@wordpress/element';\nimport { applyFilters } from '@wordpress/hooks';\nimport CurrencyFactory from '@woocommerce/currency';\nimport { CURRENCY } from '@woocommerce/wc-admin-settings';\n\nconst appCurrency = CurrencyFactory( CURRENCY );\n\nexport const getFilteredCurrencyInstance = ( query ) => {\n\tconst config = appCurrency.getCurrencyConfig();\n\tconst filteredConfig = applyFilters(\n\t\t'woocommerce_admin_report_currency',\n\t\tconfig,\n\t\tquery\n\t);\n\treturn CurrencyFactory( filteredConfig );\n};\n\nexport const CurrencyContext = createContext(\n\tappCurrency // default value\n);\n"],"sourceRoot":""}