(window.__wcAdmin_webpackJsonp=window.__wcAdmin_webpackJsonp||[]).push([[3],{166:function(e,t,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.size,c=void 0===t?24:t,o=e.onClick,i=(e.icon,e.className),r=function(e,t){if(null==e)return{};var c,o,n=function(e,t){if(null==e)return{};var c,o,n={},a=Object.keys(e);for(o=0;o<a.length;o++)c=a[o],0<=t.indexOf(c)||(n[c]=e[c]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)c=a[o],0<=t.indexOf(c)||Object.prototype.propertyIsEnumerable.call(e,c)&&(n[c]=e[c])}return n}(e,a),l=["gridicon","gridicons-notice-outline",i,!!function(e){return 0==e%18}(c)&&"needs-offset",!1,!1].filter(Boolean).join(" ");return n.default.createElement("svg",s({className:l,height:c,width:c,onClick:o},r,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}),n.default.createElement("g",null,n.default.createElement("path",{d:"M12 4c4.411 0 8 3.589 8 8s-3.589 8-8 8-8-3.589-8-8 3.589-8 8-8m0-2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zm1 13h-2v2h2v-2zm-2-2h2l.5-6h-3l.5 6z"})))};var o,n=(o=c(6))&&o.__esModule?o:{default:o},a=["size","onClick","icon","className"];function s(){return(s=Object.assign||function(e){for(var t,c=1;c<arguments.length;c++)for(var o in t=arguments[c])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)}},539:function(e,t,c){"use strict";function o(e){return(e||"").split(":",1)[0]}function n(e){const t=o(e);return/^woocommerce(-|_)payments$/.test(t)?"wcpay":(""+t.replace(/-/g,"_")).split(":",1)[0]}function a(e){return e?e.substr(1).split("&").reduce((e,t)=>{const c=t.split("="),o=c[0];let n=decodeURIComponent(c[1]);return n=isNaN(Number(n))?n:Number(n),e[o]=n,e},{}):{}}function s(){let e="";const{page:t,path:c,post_type:o}=a(window.location.search);if(t){const o="wc-admin"===t?"home_screen":t;e=c?c.replace(/\//g,"_").substring(1):o}else o&&(e=o);return e}c.d(t,"a",(function(){return o})),c.d(t,"b",(function(){return n})),c.d(t,"d",(function(){return a})),c.d(t,"c",(function(){return s}))},543:function(e,t,c){"use strict";c.d(t,"a",(function(){return j})),c.d(t,"b",(function(){return p}));var o=c(0),n=c(7),a=c.n(n),s=c(166),i=c.n(s),r=c(11),l=c.n(r),m=c(1),d=c.n(m),b=c(22),u=c(4),_=(c(575),c(5));class O extends o.Component{render(){const{className:e,hasAction:t,hasDate:c,hasSubtitle:n,lines:s}=this.props,i=a()("woocommerce-activity-card is-loading",e);return Object(o.createElement)("div",{className:i,"aria-hidden":!0},Object(o.createElement)("span",{className:"woocommerce-activity-card__icon"},Object(o.createElement)("span",{className:"is-placeholder"})),Object(o.createElement)("div",{className:"woocommerce-activity-card__header"},Object(o.createElement)("div",{className:"woocommerce-activity-card__title is-placeholder"}),n&&Object(o.createElement)("div",{className:"woocommerce-activity-card__subtitle is-placeholder"}),c&&Object(o.createElement)("div",{className:"woocommerce-activity-card__date"},Object(o.createElement)("span",{className:"is-placeholder"}))),Object(o.createElement)("div",{className:"woocommerce-activity-card__body"},Object(_.range)(s).map(e=>Object(o.createElement)("span",{className:"is-placeholder",key:e}))),t&&Object(o.createElement)("div",{className:"woocommerce-activity-card__actions"},Object(o.createElement)("span",{className:"is-placeholder"})))}}O.propTypes={className:d.a.string,hasAction:d.a.bool,hasDate:d.a.bool,hasSubtitle:d.a.bool,lines:d.a.number},O.defaultProps={hasAction:!1,hasDate:!1,hasSubtitle:!1,lines:1};var p=O;class j extends o.Component{getCard(){const{actions:e,className:t,children:c,date:n,icon:s,subtitle:i,title:r,unread:m}=this.props,d=a()("woocommerce-activity-card",t),u=Array.isArray(e)?e:[e],_=/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/.test(n)?l.a.utc(n).fromNow():n;return Object(o.createElement)("section",{className:d},m&&Object(o.createElement)("span",{className:"woocommerce-activity-card__unread"}),s&&Object(o.createElement)("span",{className:"woocommerce-activity-card__icon","aria-hidden":!0},s),r&&Object(o.createElement)("header",{className:"woocommerce-activity-card__header"},Object(o.createElement)(b.H,{className:"woocommerce-activity-card__title"},r),i&&Object(o.createElement)("div",{className:"woocommerce-activity-card__subtitle"},i),_&&Object(o.createElement)("span",{className:"woocommerce-activity-card__date"},_)),c&&Object(o.createElement)(b.Section,{className:"woocommerce-activity-card__body"},c),e&&Object(o.createElement)("footer",{className:"woocommerce-activity-card__actions"},u.map((e,t)=>Object(o.cloneElement)(e,{key:t}))))}render(){const{onClick:e}=this.props;return e?Object(o.createElement)(u.Button,{className:"woocommerce-activity-card__button",onClick:e},this.getCard()):this.getCard()}}j.propTypes={actions:d.a.oneOfType([d.a.arrayOf(d.a.element),d.a.element]),onClick:d.a.func,className:d.a.string,children:d.a.node,date:d.a.string,icon:d.a.node,subtitle:d.a.node,title:d.a.oneOfType([d.a.string,d.a.node]),unread:d.a.bool},j.defaultProps={icon:Object(o.createElement)(i.a,{size:48}),unread:!1}},567:function(e,t,c){"use strict";var o=c(0),n=c(2),a=c(22),s=c(4),i=c(12),r=c(8),l=c(17),m=c(171),d=c(167),b=c(18),u=c(11),_=c.n(u),O=c(543),p=c(176),j=c(539);var w=e=>{let{onClose:t}=e;const{createNotice:c}=Object(r.useDispatch)("core/notices"),{batchUpdateNotes:a,removeAllNotes:m}=Object(r.useDispatch)(i.NOTES_STORE_NAME);return Object(o.createElement)(o.Fragment,null,Object(o.createElement)(s.Modal,{title:Object(n.__)("Dismiss all messages","woocommerce-admin"),className:"woocommerce-inbox-dismiss-all-modal",onRequestClose:t},Object(o.createElement)("div",{className:"woocommerce-inbox-dismiss-all-modal__wrapper"},Object(o.createElement)("div",{className:"woocommerce-usage-modal__message"},Object(n.__)("Are you sure? Inbox messages will be dismissed forever.","woocommerce-admin")),Object(o.createElement)("div",{className:"woocommerce-usage-modal__actions"},Object(o.createElement)(s.Button,{onClick:t},Object(n.__)("Cancel","woocommerce-admin")),Object(o.createElement)(s.Button,{isPrimary:!0,onClick:()=>{(async()=>{Object(l.recordEvent)("wcadmin_inbox_action_dismissall",{});try{const e=await m({status:"unactioned"});c("success",Object(n.__)("All messages dismissed","woocommerce-admin"),{actions:[{label:Object(n.__)("Undo","woocommerce-admin"),onClick:()=>{a(e.map(e=>e.id),{is_deleted:0})}}]})}catch(e){c("error",Object(n.__)("Messages could not be dismissed","woocommerce-admin")),t()}})(),t()}},Object(n.__)("Yes, dismiss all","woocommerce-admin"))))))};c(580);const E=(e,t)=>{Object(l.recordEvent)("inbox_action_click",{note_name:e.name,note_title:e.title,note_content_inner_link:t})};let h=!1;const g=e=>{let{hasNotes:t,isBatchUpdating:c,notes:i,onDismiss:r,onNoteActionClick:u,setShowDismissAllModal:_,showHeader:p=!0}=e;if(c)return;if(!t)return Object(o.createElement)(O.a,{className:"woocommerce-empty-activity-card",title:Object(n.__)("Your inbox is empty","woocommerce-admin"),icon:!1},Object(n.__)("As things begin to happen in your store your inbox will start to fill up. You'll see things like achievements, new feature announcements, extension recommendations and more!","woocommerce-admin"));h||(Object(l.recordEvent)("inbox_panel_view",{total:i.length}),h=!0);const w=Object(j.c)(),g=e=>{Object(l.recordEvent)("inbox_note_view",{note_content:e.content,note_name:e.name,note_title:e.title,note_type:e.type,screen:w})},N=Object.keys(i).map(e=>i[e]);return Object(o.createElement)(s.Card,{size:"large"},p&&Object(o.createElement)(s.CardHeader,{size:"medium"},Object(o.createElement)("div",{className:"wooocommerce-inbox-card__header"},Object(o.createElement)(b.Text,{size:"20",lineHeight:"28px",variant:"title.small"},Object(n.__)("Inbox","woocommerce-admin")),Object(o.createElement)(a.Badge,{count:N.length})),Object(o.createElement)(a.EllipsisMenu,{label:Object(n.__)("Inbox Notes Options","woocommerce-admin"),renderContent:e=>{let{onToggle:t}=e;return Object(o.createElement)("div",{className:"woocommerce-inbox-card__section-controls"},Object(o.createElement)(s.Button,{onClick:()=>{_(!0),t()}},Object(n.__)("Dismiss all","woocommerce-admin")))}})),Object(o.createElement)(m.a,{role:"menu"},N.map(e=>{const{id:t,is_deleted:c}=e;return c?null:Object(o.createElement)(d.a,{key:t,timeout:500,classNames:"woocommerce-inbox-message"},Object(o.createElement)(b.InboxNoteCard,{key:t,note:e,onDismiss:r,onNoteActionClick:u,onBodyLinkClick:E,onNoteVisible:g}))})))},N={page:1,per_page:i.QUERY_DEFAULTS.pageSize,status:"unactioned",type:i.QUERY_DEFAULTS.noteTypes,orderby:"date",order:"desc",_fields:["id","name","title","content","type","status","actions","date_created","date_created_gmt","layout","image","is_deleted","is_read","locale"]};t.a=e=>{let{showHeader:t=!0}=e;const{createNotice:c}=Object(r.useDispatch)("core/notices"),{removeNote:s,updateNote:m,triggerNoteAction:d}=Object(r.useDispatch)(i.NOTES_STORE_NAME),{isError:u,isResolvingNotes:O,isBatchUpdating:E,notes:h}=Object(r.useSelect)(e=>{const{getNotes:t,getNotesError:c,isResolving:o,isNotesRequesting:n}=e(i.NOTES_STORE_NAME),a=_()("2022-01-11","YYYY-MM-DD").valueOf(),s=["en_US","en_AU","en_CA","en_GB","en_ZA"];return{notes:t(N).map(e=>{const t=_()(e.date_created_gmt,"YYYY-MM-DD").valueOf();return s.includes(e.locale)&&t>=a&&(e.content=Object(p.c)(e.content,320)),e}),isError:Boolean(c("getNotes",[N])),isResolvingNotes:o("getNotes",[N]),isBatchUpdating:n("batchUpdateNotes")}}),[v,y]=Object(o.useState)(!1);if(u){const e=Object(n.__)("There was an error getting your inbox. Please try again.","woocommerce-admin"),t=Object(n.__)("Reload","woocommerce-admin"),c=()=>{window.location.reload()};return Object(o.createElement)(a.EmptyContent,{title:e,actionLabel:t,actionURL:null,actionCallback:c})}const f=Object(p.b)(h);return Object(o.createElement)(o.Fragment,null,v&&Object(o.createElement)(w,{onClose:()=>{y(!1)}}),Object(o.createElement)("div",{className:"woocommerce-homepage-notes-wrapper"},(O||E)&&Object(o.createElement)(a.Section,null,Object(o.createElement)(b.InboxNotePlaceholder,{className:"banner message-is-unread"})),Object(o.createElement)(a.Section,null,!O&&!E&&g({hasNotes:f,isBatchUpdating:E,notes:h,onDismiss:e=>{const t=Object(j.c)();Object(l.recordEvent)("inbox_action_dismiss",{note_name:e.name,note_title:e.title,note_name_dismiss_all:!1,note_name_dismiss_confirmation:!0,screen:t});const o=e.id;try{s(o),c("success",Object(n.__)("Message dismissed","woocommerce-admin"),{actions:[{label:Object(n.__)("Undo","woocommerce-admin"),onClick:()=>{m(o,{is_deleted:0})}}]})}catch(e){c("error",Object(n._n)("Message could not be dismissed","Messages could not be dismissed",1,"woocommerce-admin"))}},onNoteActionClick:(e,t)=>{d(e.id,t.id)},setShowDismissAllModal:y,showHeader:t}))))}},575:function(e,t,c){},580:function(e,t,c){}}]);