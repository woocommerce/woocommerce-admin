{"version":3,"sources":["webpack://wc.[modulename]/./client/dashboard/store-performance/index.js","webpack://wc.[modulename]/./client/dashboard/store-performance/style.scss","webpack://wc.[modulename]/./client/dashboard/store-performance/utils.js"],"names":["getSetting","performanceIndicators","indicators","StorePerformance","props","hiddenBlocks","isFirst","isLast","onMove","onRemove","onTitleBlur","onTitleChange","onToggleHiddenBlock","titleInput","Controls","controls","__","onToggle","map","indicator","i","checked","includes","stat","recordEvent","status","key","label","window","wcAdminFeatures","query","primaryRequesting","secondaryRequesting","primaryError","secondaryError","primaryData","secondaryData","userIndicators","defaultDateRange","length","persistedQuery","getPersistedQuery","getDateParamsFromQuery","compare","prevLabel","context","formatAmount","getCurrencyConfig","currency","getIndicatorValues","primaryValue","secondaryValue","delta","reportUrl","reportUrlType","title","renderMenu","renderList","Component","contextType","CurrencyContext","compose","withSelect","select","filters","filter","SETTINGS_STORE_NAME","woocommerce_default_date_range","data","indicatorData","getIndicatorData","getReportUrl","href","primaryItem","getAdminLink","getNewPath","chart","find","secondaryItem","_links","report","isCurrency","format","calculateDelta","value","formatValue","REPORTS_STORE_NAME","getReportItems","getReportItemsError","isResolving","datesFromQuery","getCurrentDates","endPrimary","primary","before","endSecondary","secondary","statKeys","join","filterQuery","getFilterQuery","primaryQuery","after","appendTimestamp","isSame","moment","stats","secondaryQuery"],"mappings":"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","file":"chunks/store-performance.min.js","sourcesContent":["/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component, Fragment } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport { getPersistedQuery } from '@woocommerce/navigation';\nimport { getSetting } from '@woocommerce/wc-admin-settings';\nimport { withSelect } from '@wordpress/data';\nimport { SETTINGS_STORE_NAME } from '@woocommerce/data';\nimport {\n\tEllipsisMenu,\n\tMenuItem,\n\tMenuTitle,\n\tSectionHeader,\n\tSummaryList,\n\tSummaryListPlaceholder,\n\tSummaryNumber,\n} from '@woocommerce/components';\nimport { getDateParamsFromQuery } from '@woocommerce/date';\nimport { recordEvent } from '@woocommerce/tracks';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport { CurrencyContext } from '../../lib/currency-context';\nimport { getIndicatorData, getIndicatorValues } from './utils';\n\nconst { performanceIndicators: indicators } = getSetting( 'dataEndpoints', {\n\tperformanceIndicators: [],\n} );\n\nclass StorePerformance extends Component {\n\trenderMenu() {\n\t\tconst {\n\t\t\thiddenBlocks,\n\t\t\tisFirst,\n\t\t\tisLast,\n\t\t\tonMove,\n\t\t\tonRemove,\n\t\t\tonTitleBlur,\n\t\t\tonTitleChange,\n\t\t\tonToggleHiddenBlock,\n\t\t\ttitleInput,\n\t\t\tcontrols: Controls,\n\t\t} = this.props;\n\n\t\treturn (\n\t\t\t<EllipsisMenu\n\t\t\t\tlabel={ __(\n\t\t\t\t\t'Choose which analytics to display and the section name',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t) }\n\t\t\t\trenderContent={ ( { onToggle } ) => (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<MenuTitle>\n\t\t\t\t\t\t\t{ __( 'Display Stats:', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</MenuTitle>\n\t\t\t\t\t\t{ indicators.map( ( indicator, i ) => {\n\t\t\t\t\t\t\tconst checked = ! hiddenBlocks.includes(\n\t\t\t\t\t\t\t\tindicator.stat\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\t\t\tchecked={ checked }\n\t\t\t\t\t\t\t\t\tisCheckbox\n\t\t\t\t\t\t\t\t\tisClickable\n\t\t\t\t\t\t\t\t\tkey={ i }\n\t\t\t\t\t\t\t\t\tonInvoke={ () => {\n\t\t\t\t\t\t\t\t\t\tonToggleHiddenBlock( indicator.stat )();\n\t\t\t\t\t\t\t\t\t\trecordEvent( 'dash_indicators_toggle', {\n\t\t\t\t\t\t\t\t\t\t\tstatus: checked ? 'off' : 'on',\n\t\t\t\t\t\t\t\t\t\t\tkey: indicator.stat,\n\t\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ indicator.label }\n\t\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} ) }\n\t\t\t\t\t\t{ window.wcAdminFeatures[\n\t\t\t\t\t\t\t'analytics-dashboard/customizable'\n\t\t\t\t\t\t] && (\n\t\t\t\t\t\t\t<Controls\n\t\t\t\t\t\t\t\tonToggle={ onToggle }\n\t\t\t\t\t\t\t\tonMove={ onMove }\n\t\t\t\t\t\t\t\tonRemove={ onRemove }\n\t\t\t\t\t\t\t\tisFirst={ isFirst }\n\t\t\t\t\t\t\t\tisLast={ isLast }\n\t\t\t\t\t\t\t\tonTitleBlur={ onTitleBlur }\n\t\t\t\t\t\t\t\tonTitleChange={ onTitleChange }\n\t\t\t\t\t\t\t\ttitleInput={ titleInput }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</Fragment>\n\t\t\t\t) }\n\t\t\t/>\n\t\t);\n\t}\n\n\trenderList() {\n\t\tconst {\n\t\t\tquery,\n\t\t\tprimaryRequesting,\n\t\t\tsecondaryRequesting,\n\t\t\tprimaryError,\n\t\t\tsecondaryError,\n\t\t\tprimaryData,\n\t\t\tsecondaryData,\n\t\t\tuserIndicators,\n\t\t\tdefaultDateRange,\n\t\t} = this.props;\n\t\tif ( primaryRequesting || secondaryRequesting ) {\n\t\t\treturn (\n\t\t\t\t<SummaryListPlaceholder\n\t\t\t\t\tnumberOfItems={ userIndicators.length }\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\tif ( primaryError || secondaryError ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst persistedQuery = getPersistedQuery( query );\n\n\t\tconst { compare } = getDateParamsFromQuery( query, defaultDateRange );\n\t\tconst prevLabel =\n\t\t\tcompare === 'previous_period'\n\t\t\t\t? __( 'Previous Period:', 'woocommerce-admin' )\n\t\t\t\t: __( 'Previous Year:', 'woocommerce-admin' );\n\t\tconst { formatAmount, getCurrencyConfig } = this.context;\n\t\tconst currency = getCurrencyConfig();\n\t\treturn (\n\t\t\t<SummaryList>\n\t\t\t\t{ () =>\n\t\t\t\t\tuserIndicators.map( ( indicator, i ) => {\n\t\t\t\t\t\tconst {\n\t\t\t\t\t\t\tprimaryValue,\n\t\t\t\t\t\t\tsecondaryValue,\n\t\t\t\t\t\t\tdelta,\n\t\t\t\t\t\t\treportUrl,\n\t\t\t\t\t\t\treportUrlType,\n\t\t\t\t\t\t} = getIndicatorValues( {\n\t\t\t\t\t\t\tindicator,\n\t\t\t\t\t\t\tprimaryData,\n\t\t\t\t\t\t\tsecondaryData,\n\t\t\t\t\t\t\tcurrency,\n\t\t\t\t\t\t\tformatAmount,\n\t\t\t\t\t\t\tpersistedQuery,\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<SummaryNumber\n\t\t\t\t\t\t\t\tkey={ i }\n\t\t\t\t\t\t\t\thref={ reportUrl }\n\t\t\t\t\t\t\t\threfType={ reportUrlType }\n\t\t\t\t\t\t\t\tlabel={ indicator.label }\n\t\t\t\t\t\t\t\tvalue={ primaryValue }\n\t\t\t\t\t\t\t\tprevLabel={ prevLabel }\n\t\t\t\t\t\t\t\tprevValue={ secondaryValue }\n\t\t\t\t\t\t\t\tdelta={ delta }\n\t\t\t\t\t\t\t\tonLinkClickCallback={ () => {\n\t\t\t\t\t\t\t\t\trecordEvent( 'dash_indicators_click', {\n\t\t\t\t\t\t\t\t\t\tkey: indicator.stat,\n\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\t} )\n\t\t\t\t}\n\t\t\t</SummaryList>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst { userIndicators, title } = this.props;\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<SectionHeader\n\t\t\t\t\ttitle={\n\t\t\t\t\t\ttitle || __( 'Store Performance', 'woocommerce-admin' )\n\t\t\t\t\t}\n\t\t\t\t\tmenu={ this.renderMenu() }\n\t\t\t\t/>\n\t\t\t\t{ userIndicators.length > 0 && (\n\t\t\t\t\t<div className=\"woocommerce-dashboard__store-performance\">\n\t\t\t\t\t\t{ this.renderList() }\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n\nStorePerformance.contextType = CurrencyContext;\n\nexport default compose(\n\twithSelect( ( select, props ) => {\n\t\tconst { hiddenBlocks, query, filters } = props;\n\t\tconst userIndicators = indicators.filter(\n\t\t\t( indicator ) => ! hiddenBlocks.includes( indicator.stat )\n\t\t);\n\t\tconst { woocommerce_default_date_range: defaultDateRange } = select(\n\t\t\tSETTINGS_STORE_NAME\n\t\t).getSetting( 'wc_admin', 'wcAdminSettings' );\n\n\t\tconst data = {\n\t\t\thiddenBlocks,\n\t\t\tuserIndicators,\n\t\t\tindicators,\n\t\t\tdefaultDateRange,\n\t\t};\n\t\tif ( userIndicators.length === 0 ) {\n\t\t\treturn data;\n\t\t}\n\t\tconst indicatorData = getIndicatorData(\n\t\t\tselect,\n\t\t\tuserIndicators,\n\t\t\tquery,\n\t\t\tfilters\n\t\t);\n\n\t\treturn {\n\t\t\t...data,\n\t\t\t...indicatorData,\n\t\t};\n\t} )\n)( StorePerformance );\n","// extracted by mini-css-extract-plugin","/**\n * External dependencies\n */\nimport moment from 'moment';\nimport { find } from 'lodash';\nimport { getCurrentDates, appendTimestamp } from '@woocommerce/date';\nimport {\n\tgetFilterQuery,\n\tSETTINGS_STORE_NAME,\n\tREPORTS_STORE_NAME,\n} from '@woocommerce/data';\nimport { getNewPath } from '@woocommerce/navigation';\nimport { calculateDelta, formatValue } from '@woocommerce/number';\nimport { getAdminLink } from '@woocommerce/wc-admin-settings';\n\nfunction getReportUrl( href, persistedQuery, primaryItem ) {\n\tif ( ! href ) {\n\t\treturn '';\n\t}\n\n\tif ( href === '/jetpack' ) {\n\t\treturn getAdminLink( 'admin.php?page=jetpack#/dashboard' );\n\t}\n\n\treturn getNewPath( persistedQuery, href, {\n\t\tchart: primaryItem.chart,\n\t} );\n}\n\nexport const getIndicatorValues = ( {\n\tindicator,\n\tprimaryData,\n\tsecondaryData,\n\tcurrency,\n\tformatAmount,\n\tpersistedQuery,\n} ) => {\n\tconst primaryItem = find(\n\t\tprimaryData.data,\n\t\t( data ) => data.stat === indicator.stat\n\t);\n\tconst secondaryItem = find(\n\t\tsecondaryData.data,\n\t\t( data ) => data.stat === indicator.stat\n\t);\n\n\tif ( ! primaryItem || ! secondaryItem ) {\n\t\treturn {};\n\t}\n\n\tconst href =\n\t\t( primaryItem._links &&\n\t\t\tprimaryItem._links.report[ 0 ] &&\n\t\t\tprimaryItem._links.report[ 0 ].href ) ||\n\t\t'';\n\tconst reportUrl = getReportUrl( href, persistedQuery, primaryItem );\n\tconst reportUrlType = href === '/jetpack' ? 'wp-admin' : 'wc-admin';\n\tconst isCurrency = primaryItem.format === 'currency';\n\n\tconst delta = calculateDelta( primaryItem.value, secondaryItem.value );\n\tconst primaryValue = isCurrency\n\t\t? formatAmount( primaryItem.value )\n\t\t: formatValue( currency, primaryItem.format, primaryItem.value );\n\tconst secondaryValue = isCurrency\n\t\t? formatAmount( secondaryItem.value )\n\t\t: formatValue( currency, secondaryItem.format, secondaryItem.value );\n\treturn {\n\t\tprimaryValue,\n\t\tsecondaryValue,\n\t\tdelta,\n\t\treportUrl,\n\t\treportUrlType,\n\t};\n};\n\nexport const getIndicatorData = ( select, indicators, query, filters ) => {\n\tconst { getReportItems, getReportItemsError, isResolving } = select(\n\t\tREPORTS_STORE_NAME\n\t);\n\tconst { woocommerce_default_date_range: defaultDateRange } = select(\n\t\tSETTINGS_STORE_NAME\n\t).getSetting( 'wc_admin', 'wcAdminSettings' );\n\tconst datesFromQuery = getCurrentDates( query, defaultDateRange );\n\tconst endPrimary = datesFromQuery.primary.before;\n\tconst endSecondary = datesFromQuery.secondary.before;\n\tconst statKeys = indicators\n\t\t.map( ( indicator ) => indicator.stat )\n\t\t.join( ',' );\n\tconst filterQuery = getFilterQuery( { filters, query } );\n\tconst primaryQuery = {\n\t\t...filterQuery,\n\t\tafter: appendTimestamp( datesFromQuery.primary.after, 'start' ),\n\t\tbefore: appendTimestamp(\n\t\t\tendPrimary,\n\t\t\tendPrimary.isSame( moment(), 'day' ) ? 'now' : 'end'\n\t\t),\n\t\tstats: statKeys,\n\t};\n\n\tconst secondaryQuery = {\n\t\t...filterQuery,\n\t\tafter: appendTimestamp( datesFromQuery.secondary.after, 'start' ),\n\t\tbefore: appendTimestamp(\n\t\t\tendSecondary,\n\t\t\tendSecondary.isSame( moment(), 'day' ) ? 'now' : 'end'\n\t\t),\n\t\tstats: statKeys,\n\t};\n\n\tconst primaryData = getReportItems(\n\t\t'performance-indicators',\n\t\tprimaryQuery\n\t);\n\tconst primaryError =\n\t\tgetReportItemsError( 'performance-indicators', primaryQuery ) || null;\n\tconst primaryRequesting = isResolving( 'getReportItems', [\n\t\t'performance-indicators',\n\t\tprimaryQuery,\n\t] );\n\n\tconst secondaryData = getReportItems(\n\t\t'performance-indicators',\n\t\tsecondaryQuery\n\t);\n\tconst secondaryError =\n\t\tgetReportItemsError( 'performance-indicators', secondaryQuery ) || null;\n\tconst secondaryRequesting = isResolving( 'getReportItems', [\n\t\t'performance-indicators',\n\t\tsecondaryQuery,\n\t] );\n\n\treturn {\n\t\tprimaryData,\n\t\tprimaryError,\n\t\tprimaryRequesting,\n\t\tsecondaryData,\n\t\tsecondaryError,\n\t\tsecondaryRequesting,\n\t\tdefaultDateRange,\n\t};\n};\n"],"sourceRoot":""}