{"version":3,"sources":["webpack://wc.[modulename]/./client/dashboard/components/cart-modal.js","webpack://wc.[modulename]/./client/dashboard/task-list/index.js","webpack://wc.[modulename]/./client/dashboard/task-list/style.scss","webpack://wc.[modulename]/./client/dashboard/task-list/tasks.js","webpack://wc.[modulename]/./client/dashboard/task-list/tasks/appearance.js","webpack://wc.[modulename]/./client/dashboard/task-list/tasks/connect.js","webpack://wc.[modulename]/./client/dashboard/task-list/tasks/payments/bacs.js","webpack://wc.[modulename]/./client/dashboard/task-list/tasks/payments/images/bacs.js","webpack://wc.[modulename]/./client/dashboard/task-list/tasks/payments/images/cod.js","webpack://wc.[modulename]/./client/dashboard/task-list/tasks/payments/images/wcpay.js","webpack://wc.[modulename]/./client/dashboard/task-list/tasks/payments/index.js","webpack://wc.[modulename]/./client/dashboard/task-list/tasks/payments/klarna.js","webpack://wc.[modulename]/./client/dashboard/task-list/tasks/payments/methods.js","webpack://wc.[modulename]/./client/dashboard/task-list/tasks/payments/payfast.js","webpack://wc.[modulename]/./client/dashboard/task-list/tasks/payments/paypal.js","webpack://wc.[modulename]/./client/dashboard/task-list/tasks/payments/square.js","webpack://wc.[modulename]/./client/dashboard/task-list/tasks/payments/stripe.js","webpack://wc.[modulename]/./client/dashboard/task-list/tasks/payments/wcpay.js","webpack://wc.[modulename]/./client/dashboard/task-list/tasks/products.js","webpack://wc.[modulename]/./client/dashboard/task-list/tasks/shipping/index.js","webpack://wc.[modulename]/./client/dashboard/task-list/tasks/shipping/rates.js","webpack://wc.[modulename]/./client/dashboard/task-list/tasks/steps/location.js","webpack://wc.[modulename]/./client/dashboard/task-list/tasks/tax.js","webpack://wc.[modulename]/./client/lib/sanitize-html/index.js"],"names":["CartModal","props","state","purchaseNowButtonBusy","purchaseLaterButtonBusy","productIds","onClickPurchaseNow","setState","length","recordEvent","product_ids","purchase_install","getSetting","connectNonce","backPath","getNewPath","url","addQueryArgs","join","window","location","onClickPurchaseLater","onClose","productTypes","themes","listItems","forEach","productId","productInfo","find","productType","product","push","title","label","content","description","themeInfo","theme","id","sprintf","__","decodeEntities","price","sanitizeHTML","excerpt","renderProducts","Component","compose","withSelect","select","getProfileItems","profileItems","getProductIdsForCart","TaskDashboard","onSkipStoreSetup","completedTaskKeys","getTasks","filter","x","completed","map","key","completed_tasks_count","completed_tasks","reason","updateOptions","woocommerce_task_list_hidden","isCartModalOpen","isWelcomeModalOpen","modalDismissed","incompleteTasks","document","body","classList","add","recordTaskView","recordTaskListView","woocommerce_task_list_complete","possiblyTrackCompletedTasks","prevProps","query","prevCompletedTaskKeys","prevIncompleteTasks","prevQuery","prevTask","task","documentElement","scrollTop","isEqual","trackedCompletedTasks","woocommerce_task_list_tracked_completed_tasks","remove","taskListPayments","getAllTasks","options","toggleCartModal","bind","visible","isJetpackConnected","activePlugins","installedPlugins","wcs_installed","includes","wcs_active","jetpack_installed","jetpack_active","jetpack_connected","pluginsInformation","getPluginsInformation","task_name","getCurrentTask","tasks","number_tasks","store_connected","wccom_connected","action","woocommerce_task_list_prompt_shown","currentTask","s","promptShown","hideTaskCard","keepTaskCard","contains","woocommerce_task_list_welcome_modal_dismissed","closeWelcomeModal","inline","listTasks","className","classNames","before","icon","after","onClick","updateQueryString","cloneElement","container","renderMenu","renderPrompt","renderWelcomeModal","renderSkipActions","getOptions","PLUGINS_STORE_NAME","getActivePlugins","getInstalledPlugins","get","withDispatch","dispatch","hasPhysicalProducts","hasProducts","isAppearanceComplete","isTaxComplete","shippingZonesCount","remainingProductIds","paymentsCompleted","paymentsSkipped","items_purchased","product_types","getAdminLink","applyFilters","Appearance","hasHomepage","stepVisibility","homepage","import","isDirty","isPending","logo","stepIndex","storeNoticeText","woocommerce_demo_store_notice","completeStep","createHomepage","importProducts","updateLogo","updateNotice","themeMods","custom_logo","createNotice","errors","hasErrors","isRequesting","step","getSteps","isRequestSuccessful","wp","media","attachment","fetch","then","logoUrl","newErrors","difference","error","nextStep","getHistory","apiFetch","path","WC_ADMIN_NAMESPACE","method","result","failed","setSetting","catch","message","create_homepage","response","status","actions","edit_post_link","queueRecordEvent","stylesheet","updatedThemeMods","added_text","Boolean","woocommerce_task_list_appearance_complete","woocommerce_demo_store","steps","image","value","currentStep","getOptionsError","isUpdateOptionsRequesting","uploadLogoError","storeNoticeError","Connect","deny","errorMessage","request_token","request","finish","baseQuery","omit","page","connectResponse","connectAction","Error","data","success","updateProfileItems","isProfileItemsError","getProfileItemsError","PayFast","getInitialConfigValues","account_name","account_number","bank_name","sort_code","iban","bic","validate","values","updateSettings","woocommerce_bacs_settings","enabled","woocommerce_bacs_accounts","isOptionsRequesting","hasOptionsError","markConfigured","getInputProps","handleSubmit","Payments","arguments","methods","enabledMethods","isEnabled","recommendedMethod","completeTask","skipTask","requesting","woocommerce_task_list_payments","timestamp","Math","floor","Date","now","configured","isConfigured","skipped","payment_method","currentMethod","getCurrentMethod","plugins","pluginsToInstall","pluginNamesString","pluginSlug","pluginNames","isComplete","option","optionName","configuredMethods","installStep","getInstallStep","hasCbdIndustry","classes","classnames","isRecommended","showRecommendedRibbon","showRecommendedPill","selected","toggleMethod","e","stopPropagation","getUpdateOptionsError","countryCode","getCountryCode","woocommerce_default_country","getPaymentMethods","Klarna","continue","plugin","slug","section","link","adminUrl","helpLink","configureText","interpolateComponents","mixedString","components","renderConnectStep","stripeCountries","stripeSupportedCountries","some","industry","tosLink","tosPrompt","wcPayDocLink","wcPayDocPrompt","wcPaySettingsLink","wcPayIsConfigured","setup_client","woocommerce_woocommerce_payments_settings","wcAssetUrl","woocommerce_stripe_settings","publishable_key","secret_key","woocommerce_ppec_paypal_settings","api_username","api_password","woocommerce_kco_settings","woocommerce_klarna_payments_settings","selling_venues","wc_square_refresh_tokens","woocommerce_square_credit_card_settings","woocommerce_payfast_settings","merchant_id","merchant_key","pass_phrase","woocommerce_cod_settings","woocommerce_currency","helpText","PayPal","autoConnectFailed","connectURL","getQuery","fetchOAuthConnectURL","connectUrl","isSettingsError","help","connectStep","renderConnectButton","renderManualConfig","getConnectStep","defaultProps","manualConfig","isGetOptionsRequesting","Square","connect","newWindow","open","close","redirect","href","optionsIsRequesting","Stripe","oAuthConnectFailed","stripeSettings","isStripeConnected","completeMethod","requiresManualConfig","WCS_NAMESPACE","returnUrl","oauthUrl","match","stripeHelp","docsLink","registerLink","validateManualConfig","WCPay","subTasks","target","Products","Shipping","initialState","shippingZones","reset","countryName","zones","hasCountryZone","Promise","all","zone","name","toggleable","locations","countryLocation","code","type","reverse","prevState","fetchShippingZones","currentStepIndex","findIndex","pluginsToActivate","getPluginsToActivate","country","countryState","install","isSettingsRequesting","SETTINGS_STORE_NAME","getSettings","getSettingsError","isGetSettingsRequesting","general","settings","countries","c","updateAndPersistSettingsForGroup","ShippingRates","updateShippingZones","Array","isArray","method_id","instance_id","restOfTheWorld","shippingCost","parseFloat","shippingMethods","getShippingMethods","methodType","shippingMethod","disableShippingMethods","methodsToDisable","cost","shipping_cost","rest_world","onComplete","context","getCurrency","symbolPosition","symbol","indexOf","rate","formatDecimalString","currencyString","getFormattedRate","rates","Object","keys","field","endsWith","buttonText","getInitialValues","setTouched","setValue","renderInputPrefix","renderInputSuffix","propTypes","PropTypes","string","func","isRequired","array","contextType","CurrencyContext","StoreLocation","onSubmit","woocommerce_store_address","addressLine1","woocommerce_store_address_2","addressLine2","woocommerce_store_city","city","woocommerce_store_postcode","postCode","storeAddress","storeAddress2","storeCity","defaultCountry","storePostcode","validateStoreAddress","Tax","automatedTaxEnabled","configureTaxRates","updateAutomatedTax","setIsPending","shouldShowSuccessScreen","generalSettings","storePostCode","isCompleteAddress","isTaxJarSupported","taxSettings","isGeneralSettingsRequesting","calcTaxes","woocommerce_calc_taxes","currentStepKey","wc_connect_taxes_enabled","prevCalcTaxes","tosAccepted","automatedTaxSupportedCountries","taxJarActivated","tax","isTaxSettingsError","isGeneralSettingsError","install_extensions","isTaxSettingsRequesting","strong","setup_automatically","withWCApiSelect","connectOptions","tos_accepted","woocommerce_setup_jetpack_opted_in","ALLOWED_TAGS","ALLOWED_ATTR","html","__html","sanitize"],"mappings":"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","file":"chunks/task-list.15f93d1a07adcac8b384.min.js","sourcesContent":["/**\n * External dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport { Component } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport { Button, Modal } from '@wordpress/components';\nimport { addQueryArgs } from '@wordpress/url';\nimport { find } from 'lodash';\nimport { decodeEntities } from '@wordpress/html-entities';\n\n/**\n * WooCommerce dependencies\n */\nimport { getSetting } from '@woocommerce/wc-admin-settings';\nimport { getNewPath } from '@woocommerce/navigation';\nimport { List } from '@woocommerce/components';\n\n/**\n * Internal dependencies\n */\nimport withSelect from 'wc-api/with-select';\nimport { getProductIdsForCart } from 'dashboard/utils';\nimport sanitizeHTML from 'lib/sanitize-html';\nimport { recordEvent } from 'lib/tracks';\n\nclass CartModal extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.state = {\n\t\t\tpurchaseNowButtonBusy: false,\n\t\t\tpurchaseLaterButtonBusy: false,\n\t\t};\n\t}\n\n\tonClickPurchaseNow() {\n\t\tconst { productIds, onClickPurchaseNow } = this.props;\n\t\tthis.setState( { purchaseNowButtonBusy: true } );\n\t\tif ( ! productIds.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\trecordEvent( 'tasklist_modal_proceed_checkout', {\n\t\t\tproduct_ids: productIds,\n\t\t\tpurchase_install: true,\n\t\t} );\n\n\t\tconst { connectNonce } = getSetting( 'onboarding', {} );\n\t\tconst backPath = getNewPath( {}, '/', {} );\n\n\t\tconst url = addQueryArgs( 'https://woocommerce.com/cart', {\n\t\t\t'wccom-site': getSetting( 'siteUrl' ),\n\t\t\t'wccom-woo-version': getSetting( 'wcVersion' ),\n\t\t\t'wccom-replace-with': productIds.join( ',' ),\n\t\t\t'wccom-connect-nonce': connectNonce,\n\t\t\t'wccom-back': backPath,\n\t\t} );\n\n\t\tif ( onClickPurchaseNow ) {\n\t\t\tonClickPurchaseNow( url );\n\t\t\treturn;\n\t\t}\n\n\t\twindow.location = url;\n\t}\n\n\tonClickPurchaseLater() {\n\t\tconst { productIds } = this.props;\n\n\t\trecordEvent( 'tasklist_modal_proceed_checkout', {\n\t\t\tproduct_ids: productIds,\n\t\t\tpurchase_install: false,\n\t\t} );\n\n\t\tthis.setState( { purchaseLaterButtonBusy: true } );\n\t\tthis.props.onClickPurchaseLater();\n\t}\n\n\tonClose() {\n\t\tconst { onClose, productIds } = this.props;\n\n\t\trecordEvent( 'tasklist_modal_proceed_checkout', {\n\t\t\tproduct_ids: productIds,\n\t\t\tpurchase_install: false,\n\t\t} );\n\n\t\tonClose();\n\t}\n\n\trenderProducts() {\n\t\tconst { productIds } = this.props;\n\t\tconst { productTypes = {}, themes = [] } = getSetting(\n\t\t\t'onboarding',\n\t\t\t{}\n\t\t);\n\t\tconst listItems = [];\n\n\t\tproductIds.forEach( ( productId ) => {\n\t\t\tconst productInfo = find( productTypes, ( productType ) => {\n\t\t\t\treturn productType.product === productId;\n\t\t\t} );\n\n\t\t\tif ( productInfo ) {\n\t\t\t\tlistItems.push( {\n\t\t\t\t\ttitle: productInfo.label,\n\t\t\t\t\tcontent: productInfo.description,\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tconst themeInfo = find( themes, ( theme ) => {\n\t\t\t\treturn theme.id === productId;\n\t\t\t} );\n\n\t\t\tif ( themeInfo ) {\n\t\t\t\tlistItems.push( {\n\t\t\t\t\ttitle: sprintf(\n\t\t\t\t\t\t__( '%s  %s per year', 'woocommerce-admin' ),\n\t\t\t\t\t\tthemeInfo.title,\n\t\t\t\t\t\tdecodeEntities( themeInfo.price )\n\t\t\t\t\t),\n\t\t\t\t\tcontent: (\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tdangerouslySetInnerHTML={ sanitizeHTML(\n\t\t\t\t\t\t\t\tthemeInfo.excerpt\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t),\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\n\t\treturn <List items={ listItems } />;\n\t}\n\n\trender() {\n\t\tconst { purchaseNowButtonBusy, purchaseLaterButtonBusy } = this.state;\n\t\treturn (\n\t\t\t<Modal\n\t\t\t\ttitle={ __(\n\t\t\t\t\t'Would you like to purchase and install the following features now?',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t) }\n\t\t\t\tonRequestClose={ () => this.onClose() }\n\t\t\t\tclassName=\"woocommerce-cart-modal\"\n\t\t\t>\n\t\t\t\t{ this.renderProducts() }\n\n\t\t\t\t<p className=\"woocommerce-cart-modal__help-text\">\n\t\t\t\t\t{ __(\n\t\t\t\t\t\t\"You won't have access to this functionality until the extensions have been purchased and installed.\",\n\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t) }\n\t\t\t\t</p>\n\n\t\t\t\t<div className=\"woocommerce-cart-modal__actions\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\tisLink\n\t\t\t\t\t\tisBusy={ purchaseLaterButtonBusy }\n\t\t\t\t\t\tonClick={ () => this.onClickPurchaseLater() }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( \"I'll do it later\", 'woocommerce-admin' ) }\n\t\t\t\t\t</Button>\n\n\t\t\t\t\t<Button\n\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\tisDefault\n\t\t\t\t\t\tisBusy={ purchaseNowButtonBusy }\n\t\t\t\t\t\tonClick={ () => this.onClickPurchaseNow() }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Purchase & install now', 'woocommerce-admin' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</Modal>\n\t\t);\n\t}\n}\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst { getProfileItems } = select( 'wc-api' );\n\t\tconst profileItems = getProfileItems();\n\t\tconst productIds = getProductIdsForCart( profileItems );\n\n\t\treturn { profileItems, productIds };\n\t} )\n)( CartModal );\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component, cloneElement, Fragment } from '@wordpress/element';\nimport { get, isEqual } from 'lodash';\nimport { compose } from '@wordpress/compose';\nimport classNames from 'classnames';\nimport { Snackbar, Icon, Button, Modal } from '@wordpress/components';\nimport { withDispatch } from '@wordpress/data';\n\n/**\n * WooCommerce dependencies\n */\nimport { Card, List, MenuItem, EllipsisMenu } from '@woocommerce/components';\nimport { updateQueryString } from '@woocommerce/navigation';\nimport { PLUGINS_STORE_NAME } from '@woocommerce/data';\n\n/**\n * Internal dependencies\n */\nimport './style.scss';\nimport CartModal from '../components/cart-modal';\nimport { getAllTasks } from './tasks';\nimport { recordEvent } from 'lib/tracks';\nimport withSelect from 'wc-api/with-select';\n\nclass TaskDashboard extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.state = {\n\t\t\tisCartModalOpen: false,\n\t\t\tisWelcomeModalOpen: ! props.modalDismissed,\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tconst { incompleteTasks, updateOptions } = this.props;\n\t\tdocument.body.classList.add( 'woocommerce-onboarding' );\n\t\tdocument.body.classList.add( 'woocommerce-task-dashboard__body' );\n\n\t\tthis.recordTaskView();\n\t\tthis.recordTaskListView();\n\n\t\tif ( ! incompleteTasks.length ) {\n\t\t\tupdateOptions( {\n\t\t\t\twoocommerce_task_list_complete: true,\n\t\t\t} );\n\t\t}\n\n\t\tthis.possiblyTrackCompletedTasks();\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tconst {\n\t\t\tcompletedTaskKeys,\n\t\t\tincompleteTasks,\n\t\t\tquery,\n\t\t\tupdateOptions,\n\t\t} = this.props;\n\t\tconst {\n\t\t\tcompletedTaskKeys: prevCompletedTaskKeys,\n\t\t\tincompleteTasks: prevIncompleteTasks,\n\t\t\tquery: prevQuery,\n\t\t} = prevProps;\n\t\tconst { task: prevTask } = prevQuery;\n\t\tconst { task } = query;\n\n\t\tif ( prevTask !== task ) {\n\t\t\twindow.document.documentElement.scrollTop = 0;\n\t\t\tthis.recordTaskView();\n\t\t}\n\n\t\tif ( ! incompleteTasks.length && prevIncompleteTasks.length ) {\n\t\t\tupdateOptions( {\n\t\t\t\twoocommerce_task_list_complete: true,\n\t\t\t} );\n\t\t}\n\n\t\tif ( ! isEqual( prevCompletedTaskKeys, completedTaskKeys ) ) {\n\t\t\tthis.possiblyTrackCompletedTasks();\n\t\t}\n\t}\n\n\tpossiblyTrackCompletedTasks() {\n\t\tconst {\n\t\t\tcompletedTaskKeys,\n\t\t\ttrackedCompletedTasks,\n\t\t\tupdateOptions,\n\t\t} = this.props;\n\n\t\tif ( ! isEqual( trackedCompletedTasks, completedTaskKeys ) ) {\n\t\t\tupdateOptions( {\n\t\t\t\twoocommerce_task_list_tracked_completed_tasks: completedTaskKeys,\n\t\t\t} );\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tdocument.body.classList.remove( 'woocommerce-onboarding' );\n\t\tdocument.body.classList.remove( 'woocommerce-task-dashboard__body' );\n\t}\n\n\tgetTasks() {\n\t\tconst { profileItems, query, taskListPayments } = this.props;\n\n\t\treturn getAllTasks( {\n\t\t\tprofileItems,\n\t\t\toptions: taskListPayments,\n\t\t\tquery,\n\t\t\ttoggleCartModal: this.toggleCartModal.bind( this ),\n\t\t} ).filter( ( task ) => task.visible );\n\t}\n\n\tgetPluginsInformation() {\n\t\tconst {\n\t\t\tisJetpackConnected,\n\t\t\tactivePlugins,\n\t\t\tinstalledPlugins,\n\t\t} = this.props;\n\t\treturn {\n\t\t\twcs_installed: installedPlugins.includes( 'woocommerce-services' ),\n\t\t\twcs_active: activePlugins.includes( 'woocommerce-services' ),\n\t\t\tjetpack_installed: installedPlugins.includes( 'jetpack' ),\n\t\t\tjetpack_active: activePlugins.includes( 'jetpack' ),\n\t\t\tjetpack_connected: isJetpackConnected,\n\t\t};\n\t}\n\n\trecordTaskView() {\n\t\tconst { task } = this.props.query;\n\t\t// eslint-disable-next-line @wordpress/no-unused-vars-before-return\n\t\tconst pluginsInformation = this.getPluginsInformation();\n\n\t\tif ( ! task ) {\n\t\t\treturn;\n\t\t}\n\n\t\trecordEvent( 'task_view', {\n\t\t\ttask_name: task,\n\t\t\t...pluginsInformation,\n\t\t} );\n\t}\n\n\trecordTaskListView() {\n\t\tif ( this.getCurrentTask() ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { profileItems } = this.props;\n\t\tconst tasks = this.getTasks();\n\n\t\trecordEvent( 'tasklist_view', {\n\t\t\tnumber_tasks: tasks.length,\n\t\t\tstore_connected: profileItems.wccom_connected,\n\t\t} );\n\t}\n\n\tkeepTaskCard() {\n\t\trecordEvent( 'tasklist_completed', {\n\t\t\taction: 'keep_card',\n\t\t} );\n\n\t\tthis.props.updateOptions( {\n\t\t\twoocommerce_task_list_prompt_shown: true,\n\t\t} );\n\t}\n\n\thideTaskCard( action ) {\n\t\trecordEvent( 'tasklist_completed', {\n\t\t\taction,\n\t\t} );\n\t\tthis.props.updateOptions( {\n\t\t\twoocommerce_task_list_hidden: 'yes',\n\t\t\twoocommerce_task_list_prompt_shown: true,\n\t\t} );\n\t}\n\n\tgetCurrentTask() {\n\t\tconst { task } = this.props.query;\n\t\tconst currentTask = this.getTasks().find( ( s ) => s.key === task );\n\n\t\tif ( ! currentTask ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn currentTask;\n\t}\n\n\trenderPrompt() {\n\t\tif ( this.props.promptShown ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (\n\t\t\t<Snackbar className=\"woocommerce-task-card__prompt\">\n\t\t\t\t<div className=\"woocommerce-task-card__prompt-pointer\" />\n\t\t\t\t<div className=\"woocommerce-task-card__prompt-content\">\n\t\t\t\t\t<span>\n\t\t\t\t\t\t{ __( 'Is this card useful?', 'woocommerce-admin' ) }\n\t\t\t\t\t</span>\n\t\t\t\t\t<div className=\"woocommerce-task-card__prompt-actions\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tisLink\n\t\t\t\t\t\t\tonClick={ () => this.hideTaskCard( 'hide_card' ) }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'No, hide it', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t<Button isLink onClick={ () => this.keepTaskCard() }>\n\t\t\t\t\t\t\t{ __( 'Yes, keep it', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Snackbar>\n\t\t);\n\t}\n\n\trenderMenu() {\n\t\treturn (\n\t\t\t<EllipsisMenu\n\t\t\t\tlabel={ __( 'Task List Options', 'woocommerce-admin' ) }\n\t\t\t\trenderContent={ () => (\n\t\t\t\t\t<div className=\"woocommerce-task-card__section-controls\">\n\t\t\t\t\t\t<MenuItem\n\t\t\t\t\t\t\tisClickable\n\t\t\t\t\t\t\tonInvoke={ () =>\n\t\t\t\t\t\t\t\tthis.hideTaskCard( 'remove_card' )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\ticon={ 'trash' }\n\t\t\t\t\t\t\t\tlabel={ __( 'Remove block' ) }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t{ __( 'Remove this card', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t</div>\n\t\t\t\t) }\n\t\t\t/>\n\t\t);\n\t}\n\n\ttoggleCartModal() {\n\t\tconst { isCartModalOpen } = this.state;\n\n\t\tif ( ! isCartModalOpen ) {\n\t\t\trecordEvent( 'tasklist_purchase_extensions' );\n\t\t}\n\n\t\tthis.setState( { isCartModalOpen: ! isCartModalOpen } );\n\t}\n\n\tcloseWelcomeModal() {\n\t\t// Prevent firing this event before the modal is seen.\n\t\tif (\n\t\t\tdocument.body.classList.contains( 'woocommerce-admin-is-loading' )\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.setState( { isWelcomeModalOpen: false } );\n\t\tthis.props.updateOptions( {\n\t\t\twoocommerce_task_list_welcome_modal_dismissed: true,\n\t\t} );\n\t}\n\n\trenderWelcomeModal() {\n\t\treturn (\n\t\t\t<Modal\n\t\t\t\ttitle={\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\trole=\"img\"\n\t\t\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\t\t\tfocusable=\"false\"\n\t\t\t\t\t\t\tclassName=\"woocommerce-task-dashboard__welcome-modal-icon\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\"Woo hoo - you're almost there!\",\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t) }\n\t\t\t\t\t</Fragment>\n\t\t\t\t}\n\t\t\t\tonRequestClose={ () => this.closeWelcomeModal() }\n\t\t\t\tclassName=\"woocommerce-task-dashboard__welcome-modal\"\n\t\t\t>\n\t\t\t\t<div className=\"woocommerce-task-dashboard__welcome-modal-wrapper\">\n\t\t\t\t\t<div className=\"woocommerce-task-dashboard__welcome-modal-message\">\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t'Based on the information you provided weve prepared some final set up tasks for you to perform.',\n\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t'Once complete your store will be ready for launch - exciting!',\n\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\tisDefault\n\t\t\t\t\t\tonClick={ () => this.closeWelcomeModal() }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ __( 'Continue', 'woocommerce-admin' ) }\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</Modal>\n\t\t);\n\t}\n\n\tonSkipStoreSetup = () => {\n\t\tconst completedTaskKeys = this.getTasks()\n\t\t\t.filter( ( x ) => x.completed )\n\t\t\t.map( ( x ) => x.key );\n\n\t\trecordEvent( 'tasklist_skip', {\n\t\t\tcompleted_tasks_count: completedTaskKeys.length,\n\t\t\tcompleted_tasks: completedTaskKeys,\n\t\t\treason: 'skip',\n\t\t} );\n\n\t\tthis.props.updateOptions( {\n\t\t\twoocommerce_task_list_hidden: 'yes',\n\t\t} );\n\t};\n\n\trenderSkipActions() {\n\t\treturn (\n\t\t\t<div className=\"skip-actions\">\n\t\t\t\t<Button\n\t\t\t\t\tisLink\n\t\t\t\t\tclassName=\"is-secondary\"\n\t\t\t\t\tonClick={ this.onSkipStoreSetup }\n\t\t\t\t>\n\t\t\t\t\t{ __( 'Skip store setup', 'woocommerce-admin' ) }\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst { inline, query } = this.props;\n\t\tconst { isCartModalOpen, isWelcomeModalOpen } = this.state;\n\t\tconst currentTask = this.getCurrentTask();\n\t\tconst listTasks = this.getTasks().map( ( task ) => {\n\t\t\ttask.className = classNames(\n\t\t\t\ttask.completed ? 'is-complete' : null,\n\t\t\t\ttask.className\n\t\t\t);\n\t\t\ttask.before = task.completed ? (\n\t\t\t\t<i className=\"material-icons-outlined\">check_circle</i>\n\t\t\t) : (\n\t\t\t\t<i className=\"material-icons-outlined\">{ task.icon }</i>\n\t\t\t);\n\t\t\ttask.after = (\n\t\t\t\t<i className=\"material-icons-outlined\">chevron_right</i>\n\t\t\t);\n\n\t\t\tif ( ! task.onClick ) {\n\t\t\t\ttask.onClick = () => updateQueryString( { task: task.key } );\n\t\t\t}\n\n\t\t\treturn task;\n\t\t} );\n\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<div className=\"woocommerce-task-dashboard__container\">\n\t\t\t\t\t{ currentTask ? (\n\t\t\t\t\t\tcloneElement( currentTask.container, {\n\t\t\t\t\t\t\tquery,\n\t\t\t\t\t\t} )\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t<Card\n\t\t\t\t\t\t\t\tclassName=\"woocommerce-task-card\"\n\t\t\t\t\t\t\t\ttitle={ __(\n\t\t\t\t\t\t\t\t\t'Set up your store and start selling',\n\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\tdescription={ __(\n\t\t\t\t\t\t\t\t\t'Below youll find a list of the most important steps to get your store up and running.',\n\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\tmenu={ inline && this.renderMenu() }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<List items={ listTasks } />\n\t\t\t\t\t\t\t</Card>\n\t\t\t\t\t\t\t{ inline && this.renderPrompt() }\n\t\t\t\t\t\t\t{ isWelcomeModalOpen && this.renderWelcomeModal() }\n\t\t\t\t\t\t\t{ this.renderSkipActions() }\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t) }\n\t\t\t\t</div>\n\t\t\t\t{ isCartModalOpen && (\n\t\t\t\t\t<CartModal\n\t\t\t\t\t\tonClose={ () => this.toggleCartModal() }\n\t\t\t\t\t\tonClickPurchaseLater={ () => this.toggleCartModal() }\n\t\t\t\t\t/>\n\t\t\t\t) }\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n\nexport default compose(\n\twithSelect( ( select, props ) => {\n\t\tconst { getProfileItems, getOptions } = select(\n\t\t\t'wc-api'\n\t\t);\n\t\tconst { getActivePlugins, getInstalledPlugins, isJetpackConnected } = select(\n\t\t\tPLUGINS_STORE_NAME\n\t\t);\n\t\tconst profileItems = getProfileItems();\n\n\t\tconst options = getOptions( [\n\t\t\t'woocommerce_task_list_prompt_shown',\n\t\t\t'woocommerce_task_list_welcome_modal_dismissed',\n\t\t\t'woocommerce_task_list_hidden',\n\t\t\t'woocommerce_task_list_tracked_completed_tasks',\n\t\t] );\n\t\tconst promptShown = get(\n\t\t\toptions,\n\t\t\t[ 'woocommerce_task_list_prompt_shown' ],\n\t\t\tfalse\n\t\t);\n\t\tconst modalDismissed = get(\n\t\t\toptions,\n\t\t\t[ 'woocommerce_task_list_welcome_modal_dismissed' ],\n\t\t\tfalse\n\t\t);\n\t\tconst taskListPayments = getOptions( [\n\t\t\t'woocommerce_task_list_payments',\n\t\t] );\n\t\tconst trackedCompletedTasks = get(\n\t\t\toptions,\n\t\t\t[ 'woocommerce_task_list_tracked_completed_tasks' ],\n\t\t\t[]\n\t\t);\n\t\tconst tasks = getAllTasks( {\n\t\t\tprofileItems,\n\t\t\toptions: getOptions( [ 'woocommerce_task_list_payments' ] ),\n\t\t\tquery: props.query,\n\t\t} );\n\t\tconst completedTaskKeys = tasks\n\t\t\t.filter( ( task ) => task.completed )\n\t\t\t.map( ( task ) => task.key );\n\t\tconst incompleteTasks = tasks.filter(\n\t\t\t( task ) => task.visible && ! task.completed\n\t\t);\n\t\tconst activePlugins = getActivePlugins();\n\t\tconst installedPlugins = getInstalledPlugins();\n\n\t\treturn {\n\t\t\tmodalDismissed,\n\t\t\tprofileItems,\n\t\t\tpromptShown,\n\t\t\ttaskListPayments,\n\t\t\tisJetpackConnected: isJetpackConnected(),\n\t\t\tincompleteTasks,\n\t\t\ttrackedCompletedTasks,\n\t\t\tcompletedTaskKeys,\n\t\t\tactivePlugins,\n\t\t\tinstalledPlugins,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { updateOptions } = dispatch( 'wc-api' );\n\t\treturn {\n\t\t\tupdateOptions,\n\t\t};\n\t} )\n)( TaskDashboard );\n","// extracted by mini-css-extract-plugin","/**\n * External dependencies\n */\n\nimport { __ } from '@wordpress/i18n';\nimport { applyFilters } from '@wordpress/hooks';\nimport { get } from 'lodash';\n\n/**\n * WooCommerce dependencies\n */\nimport { getAdminLink, getSetting } from '@woocommerce/wc-admin-settings';\nimport { updateQueryString } from '@woocommerce/navigation';\n\n/**\n * Internal dependencies\n */\nimport Appearance from './tasks/appearance';\nimport Connect from './tasks/connect';\nimport { getProductIdsForCart } from 'dashboard/utils';\nimport Products from './tasks/products';\nimport Shipping from './tasks/shipping';\nimport Tax from './tasks/tax';\nimport Payments from './tasks/payments';\n\nexport function getAllTasks( {\n\tprofileItems,\n\toptions,\n\tquery,\n\ttoggleCartModal,\n} ) {\n\tconst {\n\t\thasPhysicalProducts,\n\t\thasProducts,\n\t\tisAppearanceComplete,\n\t\tisTaxComplete,\n\t\tshippingZonesCount,\n\t} = getSetting( 'onboarding', {\n\t\thasPhysicalProducts: false,\n\t\thasProducts: false,\n\t\tisAppearanceComplete: false,\n\t\tisTaxComplete: false,\n\t\tshippingZonesCount: 0,\n\t} );\n\n\tconst productIds = getProductIdsForCart( profileItems, true );\n\tconst remainingProductIds = getProductIdsForCart( profileItems );\n\n\tconst paymentsCompleted = get(\n\t\toptions,\n\t\t[ 'woocommerce_task_list_payments', 'completed' ],\n\t\tfalse\n\t);\n\tconst paymentsSkipped = get(\n\t\toptions,\n\t\t[ 'woocommerce_task_list_payments', 'skipped' ],\n\t\tfalse\n\t);\n\n\tconst tasks = [\n\t\t{\n\t\t\tkey: 'purchase',\n\t\t\ttitle: __( 'Purchase & install extensions', 'woocommerce-admin' ),\n\t\t\tcontent: __(\n\t\t\t\t'Purchase, install, and manage your extensions directly from your dashboard',\n\t\t\t\t'wooocommerce-admin'\n\t\t\t),\n\t\t\ticon: 'extension',\n\t\t\tcontainer: null,\n\t\t\tonClick: () =>\n\t\t\t\tremainingProductIds.length ? toggleCartModal() : null,\n\t\t\tvisible: productIds.length,\n\t\t\tcompleted: ! remainingProductIds.length,\n\t\t},\n\t\t{\n\t\t\tkey: 'connect',\n\t\t\ttitle: __(\n\t\t\t\t'Connect your store to WooCommerce.com',\n\t\t\t\t'woocommerce-admin'\n\t\t\t),\n\t\t\tcontent: __(\n\t\t\t\t'Install and manage your extensions directly from your Dashboard',\n\t\t\t\t'wooocommerce-admin'\n\t\t\t),\n\t\t\ticon: 'extension',\n\t\t\tcontainer: <Connect query={ query } />,\n\t\t\tvisible:\n\t\t\t\tprofileItems.items_purchased && ! profileItems.wccom_connected,\n\t\t\tcompleted: profileItems.wccom_connected,\n\t\t},\n\t\t{\n\t\t\tkey: 'products',\n\t\t\ttitle: __( 'Add your first product', 'woocommerce-admin' ),\n\t\t\tcontent: __(\n\t\t\t\t'Add products manually, import from a sheet or migrate from another platform',\n\t\t\t\t'wooocommerce-admin'\n\t\t\t),\n\t\t\ticon: 'add_box',\n\t\t\tcontainer: <Products />,\n\t\t\tcompleted: hasProducts,\n\t\t\tvisible: true,\n\t\t},\n\t\t{\n\t\t\tkey: 'appearance',\n\t\t\ttitle: __( 'Personalize your store', 'woocommerce-admin' ),\n\t\t\tcontent: __(\n\t\t\t\t'Create a custom homepage and upload your logo',\n\t\t\t\t'wooocommerce-admin'\n\t\t\t),\n\t\t\ticon: 'palette',\n\t\t\tcontainer: <Appearance />,\n\t\t\tcompleted: isAppearanceComplete,\n\t\t\tvisible: true,\n\t\t},\n\t\t{\n\t\t\tkey: 'shipping',\n\t\t\ttitle: __( 'Set up shipping', 'woocommerce-admin' ),\n\t\t\tcontent: __(\n\t\t\t\t'Configure some basic shipping rates to get started',\n\t\t\t\t'wooocommerce-admin'\n\t\t\t),\n\t\t\ticon: 'local_shipping',\n\t\t\tcontainer: <Shipping />,\n\t\t\tcompleted: shippingZonesCount > 0,\n\t\t\tvisible:\n\t\t\t\t( profileItems.product_types &&\n\t\t\t\t\tprofileItems.product_types.includes( 'physical' ) ) ||\n\t\t\t\thasPhysicalProducts,\n\t\t},\n\t\t{\n\t\t\tkey: 'tax',\n\t\t\ttitle: __( 'Set up tax', 'woocommerce-admin' ),\n\t\t\tcontent: __(\n\t\t\t\t'Choose how to configure tax rates - manually or automatically',\n\t\t\t\t'wooocommerce-admin'\n\t\t\t),\n\t\t\ticon: 'account_balance',\n\t\t\tcontainer: <Tax />,\n\t\t\tcompleted: isTaxComplete,\n\t\t\tvisible: true,\n\t\t},\n\t\t{\n\t\t\tkey: 'payments',\n\t\t\ttitle: __( 'Set up payments', 'woocommerce-admin' ),\n\t\t\tcontent: __(\n\t\t\t\t'Select which payment providers youd like to use and configure them',\n\t\t\t\t'wooocommerce-admin'\n\t\t\t),\n\t\t\ticon: 'payment',\n\t\t\tcontainer: <Payments />,\n\t\t\tcompleted: paymentsCompleted || paymentsSkipped,\n\t\t\tonClick: () => {\n\t\t\t\tif ( paymentsCompleted || paymentsSkipped ) {\n\t\t\t\t\twindow.location = getAdminLink(\n\t\t\t\t\t\t'admin.php?page=wc-settings&tab=checkout'\n\t\t\t\t\t);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tupdateQueryString( { task: 'payments' } );\n\t\t\t},\n\t\t\tvisible: true,\n\t\t},\n\t];\n\n\treturn applyFilters(\n\t\t'woocommerce_admin_onboarding_task_list',\n\t\ttasks,\n\t\tquery\n\t);\n}\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport apiFetch from '@wordpress/api-fetch';\nimport { Button } from '@wordpress/components';\nimport { Component, Fragment } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport { difference, filter } from 'lodash';\nimport { withDispatch } from '@wordpress/data';\n\n/**\n * WooCommerce dependencies\n */\nimport {\n\tCard,\n\tStepper,\n\tTextControl,\n\tImageUpload,\n} from '@woocommerce/components';\nimport { getHistory, getNewPath } from '@woocommerce/navigation';\nimport { getSetting, setSetting } from '@woocommerce/wc-admin-settings';\n\n/**\n * Internal dependencies\n */\nimport { queueRecordEvent, recordEvent } from 'lib/tracks';\nimport { WC_ADMIN_NAMESPACE } from 'wc-api/constants';\nimport withSelect from 'wc-api/with-select';\n\nclass Appearance extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tconst { hasHomepage, hasProducts } = getSetting( 'onboarding', {} );\n\n\t\tthis.stepVisibility = {\n\t\t\thomepage: ! hasHomepage,\n\t\t\timport: ! hasProducts,\n\t\t};\n\n\t\tthis.state = {\n\t\t\tisDirty: false,\n\t\t\tisPending: false,\n\t\t\tlogo: null,\n\t\t\tstepIndex: 0,\n\t\t\tstoreNoticeText: props.options.woocommerce_demo_store_notice || '',\n\t\t};\n\n\t\tthis.completeStep = this.completeStep.bind( this );\n\t\tthis.createHomepage = this.createHomepage.bind( this );\n\t\tthis.importProducts = this.importProducts.bind( this );\n\t\tthis.updateLogo = this.updateLogo.bind( this );\n\t\tthis.updateNotice = this.updateNotice.bind( this );\n\t}\n\n\tcomponentDidMount() {\n\t\tconst { themeMods } = getSetting( 'onboarding', {} );\n\n\t\tif ( themeMods.custom_logo ) {\n\t\t\t/* eslint-disable react/no-did-mount-set-state */\n\t\t\tthis.setState( { logo: { id: themeMods.custom_logo } } );\n\t\t\t/* eslint-enable react/no-did-mount-set-state */\n\t\t}\n\t}\n\n\tasync componentDidUpdate( prevProps ) {\n\t\tconst { isPending, logo, stepIndex } = this.state;\n\t\tconst {\n\t\t\tcreateNotice,\n\t\t\terrors,\n\t\t\thasErrors,\n\t\t\tisRequesting,\n\t\t\toptions,\n\t\t} = this.props;\n\t\tconst step = this.getSteps()[ stepIndex ].key;\n\t\tconst isRequestSuccessful =\n\t\t\t! isRequesting && prevProps.isRequesting && ! hasErrors;\n\n\t\tif ( logo && ! logo.url && ! isPending ) {\n\t\t\t/* eslint-disable react/no-did-update-set-state */\n\t\t\tthis.setState( { isPending: true } );\n\t\t\twp.media\n\t\t\t\t.attachment( logo.id )\n\t\t\t\t.fetch()\n\t\t\t\t.then( () => {\n\t\t\t\t\tconst logoUrl = wp.media.attachment( logo.id ).get( 'url' );\n\t\t\t\t\tthis.setState( {\n\t\t\t\t\t\tisPending: false,\n\t\t\t\t\t\tlogo: { id: logo.id, url: logoUrl },\n\t\t\t\t\t} );\n\t\t\t\t} );\n\t\t\t/* eslint-enable react/no-did-update-set-state */\n\t\t}\n\n\t\tif (\n\t\t\toptions.woocommerce_demo_store_notice &&\n\t\t\tprevProps.options.woocommerce_demo_store_notice !==\n\t\t\t\toptions.woocommerce_demo_store_notice\n\t\t) {\n\t\t\t/* eslint-disable react/no-did-update-set-state */\n\t\t\tthis.setState( {\n\t\t\t\tstoreNoticeText: options.woocommerce_demo_store_notice,\n\t\t\t} );\n\t\t\t/* eslint-enable react/no-did-update-set-state */\n\t\t}\n\n\t\tif ( step === 'logo' && isRequestSuccessful ) {\n\t\t\tcreateNotice(\n\t\t\t\t'success',\n\t\t\t\t__( 'Store logo updated sucessfully.', 'woocommerce-admin' )\n\t\t\t);\n\t\t\tthis.completeStep();\n\t\t}\n\n\t\tif ( step === 'notice' && isRequestSuccessful ) {\n\t\t\tcreateNotice(\n\t\t\t\t'success',\n\t\t\t\t__(\n\t\t\t\t\t\" Your store is looking great! Don't forget to continue personalizing it.\",\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t)\n\t\t\t);\n\t\t\tthis.completeStep();\n\t\t}\n\n\t\tconst newErrors = difference( errors, prevProps.errors );\n\t\tnewErrors.map( ( error ) => createNotice( 'error', error ) );\n\t}\n\n\tcompleteStep() {\n\t\tconst { stepIndex } = this.state;\n\t\tconst nextStep = this.getSteps()[ stepIndex + 1 ];\n\n\t\tif ( nextStep ) {\n\t\t\tthis.setState( { stepIndex: stepIndex + 1 } );\n\t\t} else {\n\t\t\tgetHistory().push( getNewPath( {}, '/', {} ) );\n\t\t}\n\t}\n\n\timportProducts() {\n\t\tconst { createNotice } = this.props;\n\t\tthis.setState( { isPending: true } );\n\n\t\trecordEvent( 'tasklist_appearance_import_demo', {} );\n\n\t\tapiFetch( {\n\t\t\tpath: `${ WC_ADMIN_NAMESPACE }/onboarding/tasks/import_sample_products`,\n\t\t\tmethod: 'POST',\n\t\t} )\n\t\t\t.then( ( result ) => {\n\t\t\t\tif ( result.failed && result.failed.length ) {\n\t\t\t\t\tcreateNotice(\n\t\t\t\t\t\t'error',\n\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t'There was an error importing some of the sample products.',\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tcreateNotice(\n\t\t\t\t\t\t'success',\n\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t'All sample products have been imported.',\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t\tsetSetting( 'onboarding', {\n\t\t\t\t\t\t...getSetting( 'onboarding', {} ),\n\t\t\t\t\t\thasProducts: true,\n\t\t\t\t\t} );\n\t\t\t\t}\n\n\t\t\t\tthis.setState( { isPending: false } );\n\t\t\t\tthis.completeStep();\n\t\t\t} )\n\t\t\t.catch( ( error ) => {\n\t\t\t\tcreateNotice( 'error', error.message );\n\t\t\t\tthis.setState( { isPending: false } );\n\t\t\t} );\n\t}\n\n\tcreateHomepage() {\n\t\tconst { createNotice } = this.props;\n\t\tthis.setState( { isPending: true } );\n\n\t\trecordEvent( 'tasklist_appearance_create_homepage', {\n\t\t\tcreate_homepage: true,\n\t\t} );\n\n\t\tapiFetch( {\n\t\t\tpath: '/wc-admin/onboarding/tasks/create_homepage',\n\t\t\tmethod: 'POST',\n\t\t} )\n\t\t\t.then( response => {\n\t\t\t\tcreateNotice( response.status, response.message, {\n\t\t\t\t\tactions: response.edit_post_link\n\t\t\t\t\t\t? [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tlabel: __( 'Customize', 'woocommerce-admin' ),\n\t\t\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\t\t\tqueueRecordEvent( 'tasklist_appearance_customize_homepage', {} );\n\t\t\t\t\t\t\t\t\t\twindow.location = `${\n\t\t\t\t\t\t\t\t\t\t\tresponse.edit_post_link\n\t\t\t\t\t\t\t\t\t\t}&wc_onboarding_active_task=homepage`;\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t: null,\n\t\t\t\t} );\n\n\t\t\t\tthis.setState( { isPending: false } );\n\t\t\t\tthis.completeStep();\n\t\t\t} )\n\t\t\t.catch( ( error ) => {\n\t\t\t\tcreateNotice( 'error', error.message );\n\t\t\t\tthis.setState( { isPending: false } );\n\t\t\t} );\n\t}\n\n\tupdateLogo() {\n\t\tconst { updateOptions } = this.props;\n\t\tconst { logo } = this.state;\n\t\tconst { stylesheet, themeMods } = getSetting( 'onboarding', {} );\n\t\tconst updatedThemeMods = {\n\t\t\t...themeMods,\n\t\t\tcustom_logo: logo ? logo.id : null,\n\t\t};\n\n\t\trecordEvent( 'tasklist_appearance_upload_logo' );\n\n\t\tsetSetting( 'onboarding', {\n\t\t\t...getSetting( 'onboarding', {} ),\n\t\t\tthemeMods: updatedThemeMods,\n\t\t} );\n\n\t\tupdateOptions( {\n\t\t\t[ `theme_mods_${ stylesheet }` ]: updatedThemeMods,\n\t\t} );\n\t}\n\n\tupdateNotice() {\n\t\tconst { updateOptions } = this.props;\n\t\tconst { storeNoticeText } = this.state;\n\n\t\trecordEvent( 'tasklist_appearance_set_store_notice', {\n\t\t\tadded_text: Boolean( storeNoticeText.length ),\n\t\t} );\n\n\t\tsetSetting( 'onboarding', {\n\t\t\t...getSetting( 'onboarding', {} ),\n\t\t\tisAppearanceComplete: true,\n\t\t} );\n\n\t\tupdateOptions( {\n\t\t\twoocommerce_task_list_appearance_complete: true,\n\t\t\twoocommerce_demo_store: storeNoticeText.length ? 'yes' : 'no',\n\t\t\twoocommerce_demo_store_notice: storeNoticeText,\n\t\t} );\n\t}\n\n\tgetSteps() {\n\t\tconst { isDirty, isPending, logo, storeNoticeText } = this.state;\n\t\tconst { isRequesting } = this.props;\n\n\t\tconst steps = [\n\t\t\t{\n\t\t\t\tkey: 'import',\n\t\t\t\tlabel: __( 'Import sample products', 'woocommerce-admin' ),\n\t\t\t\tdescription: __(\n\t\t\t\t\t'Well add some products that will make it easier to see what your store looks like',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tcontent: (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={ this.importProducts }\n\t\t\t\t\t\t\tisBusy={ isPending }\n\t\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Import products', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button onClick={ () => this.completeStep() }>\n\t\t\t\t\t\t\t{ __( 'Skip', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Fragment>\n\t\t\t\t),\n\t\t\t\tvisible: this.stepVisibility.import,\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'homepage',\n\t\t\t\tlabel: __( 'Create a custom homepage', 'woocommerce-admin' ),\n\t\t\t\tdescription: __(\n\t\t\t\t\t'Create a new homepage and customize it to suit your needs',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tcontent: (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<Button isPrimary isBusy={ isPending } onClick={ this.createHomepage }>\n\t\t\t\t\t\t\t{ __( 'Create homepage', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t\t\t\t'tasklist_appearance_create_homepage',\n\t\t\t\t\t\t\t\t\t{ create_homepage: false }\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tthis.completeStep();\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Skip', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Fragment>\n\t\t\t\t),\n\t\t\t\tvisible: this.stepVisibility.homepage,\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'logo',\n\t\t\t\tlabel: __( 'Upload a logo', 'woocommerce-admin' ),\n\t\t\t\tdescription: __(\n\t\t\t\t\t'Ensure your store is on-brand by adding your logo',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tcontent: isPending ? null : (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<ImageUpload\n\t\t\t\t\t\t\timage={ logo }\n\t\t\t\t\t\t\tonChange={ ( image ) =>\n\t\t\t\t\t\t\t\tthis.setState( { isDirty: true, logo: image } )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tdisabled={ ! logo && ! isDirty }\n\t\t\t\t\t\t\tonClick={ this.updateLogo }\n\t\t\t\t\t\t\tisBusy={ isRequesting }\n\t\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Proceed', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button onClick={ () => this.completeStep() }>\n\t\t\t\t\t\t\t{ __( 'Skip', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Fragment>\n\t\t\t\t),\n\t\t\t\tvisible: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'notice',\n\t\t\t\tlabel: __( 'Set a store notice', 'woocommerce-admin' ),\n\t\t\t\tdescription: __(\n\t\t\t\t\t'Optionally display a prominent notice across all pages of your store',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tcontent: (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\tlabel={ __(\n\t\t\t\t\t\t\t\t'Store notice text',\n\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\tplaceholder={ __(\n\t\t\t\t\t\t\t\t'Store notice text',\n\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\tvalue={ storeNoticeText }\n\t\t\t\t\t\t\tonChange={ ( value ) =>\n\t\t\t\t\t\t\t\tthis.setState( { storeNoticeText: value } )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Button onClick={ this.updateNotice } isPrimary>\n\t\t\t\t\t\t\t{ __( 'Complete task', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Fragment>\n\t\t\t\t),\n\t\t\t\tvisible: true,\n\t\t\t},\n\t\t];\n\n\t\treturn filter( steps, ( step ) => step.visible );\n\t}\n\n\trender() {\n\t\tconst { isPending, stepIndex } = this.state;\n\t\tconst { isRequesting, hasErrors } = this.props;\n\t\tconst currentStep = this.getSteps()[ stepIndex ].key;\n\n\t\treturn (\n\t\t\t<div className=\"woocommerce-task-appearance\">\n\t\t\t\t<Card className=\"is-narrow\">\n\t\t\t\t\t<Stepper\n\t\t\t\t\t\tisPending={\n\t\t\t\t\t\t\t( isRequesting && ! hasErrors ) || isPending\n\t\t\t\t\t\t}\n\t\t\t\t\t\tisVertical\n\t\t\t\t\t\tcurrentStep={ currentStep }\n\t\t\t\t\t\tsteps={ this.getSteps() }\n\t\t\t\t\t/>\n\t\t\t\t</Card>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetOptions,\n\t\t\tgetOptionsError,\n\t\t\tisUpdateOptionsRequesting,\n\t\t} = select( 'wc-api' );\n\t\tconst { stylesheet } = getSetting( 'onboarding', {} );\n\n\t\tconst options = getOptions( [\n\t\t\t'woocommerce_demo_store',\n\t\t\t'woocommerce_demo_store_notice',\n\t\t] );\n\t\tconst errors = [];\n\t\tconst uploadLogoError = getOptionsError( [\n\t\t\t`theme_mods_${ stylesheet }`,\n\t\t] );\n\t\tconst storeNoticeError = getOptionsError( [\n\t\t\t'woocommerce_demo_store',\n\t\t\t'woocommerce_demo_store_notice',\n\t\t] );\n\t\tif ( uploadLogoError ) {\n\t\t\terrors.push( uploadLogoError.message );\n\t\t}\n\t\tif ( storeNoticeError ) {\n\t\t\terrors.push( storeNoticeError.message );\n\t\t}\n\t\tconst hasErrors = Boolean( errors.length );\n\t\tconst isRequesting =\n\t\t\tBoolean(\n\t\t\t\tisUpdateOptionsRequesting( [ `theme_mods_${ stylesheet }` ] )\n\t\t\t) ||\n\t\t\tBoolean(\n\t\t\t\tisUpdateOptionsRequesting( [\n\t\t\t\t\t'woocommerce_task_list_appearance_complete',\n\t\t\t\t\t'woocommerce_demo_store',\n\t\t\t\t\t'woocommerce_demo_store_notice',\n\t\t\t\t] )\n\t\t\t);\n\n\t\treturn { errors, getOptionsError, hasErrors, isRequesting, options };\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { createNotice } = dispatch( 'core/notices' );\n\t\tconst { updateOptions } = dispatch( 'wc-api' );\n\n\t\treturn {\n\t\t\tcreateNotice,\n\t\t\tupdateOptions,\n\t\t};\n\t} )\n)( Appearance );\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport apiFetch from '@wordpress/api-fetch';\nimport { withDispatch } from '@wordpress/data';\nimport { omit } from 'lodash';\n\n/**\n * WooCommerce dependencies\n */\nimport { getHistory, getNewPath } from '@woocommerce/navigation';\n\n/**\n * Internal dependencies\n */\nimport { WC_ADMIN_NAMESPACE } from 'wc-api/constants';\nimport withSelect from 'wc-api/with-select';\n\nclass Connect extends Component {\n\tcomponentDidMount() {\n\t\tdocument.body.classList.add( 'woocommerce-admin-is-loading' );\n\t\tconst { query } = this.props;\n\n\t\tif ( query.deny === '1' ) {\n\t\t\tthis.errorMessage(\n\t\t\t\t__(\n\t\t\t\t\t'You must click approve to install your extensions and connect to WooCommerce.com.',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t)\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tif ( ! query[ 'wccom-connected' ] || ! query.request_token ) {\n\t\t\tthis.request();\n\t\t\treturn;\n\t\t}\n\t\tthis.finish();\n\t}\n\n\tbaseQuery() {\n\t\tconst { query } = this.props;\n\t\tconst baseQuery = omit( { ...query, page: 'wc-admin' }, [\n\t\t\t'task',\n\t\t\t'wccom-connected',\n\t\t\t'request_token',\n\t\t\t'deny',\n\t\t] );\n\t\treturn getNewPath( {}, '/', baseQuery );\n\t}\n\n\terrorMessage(\n\t\tmessage = __(\n\t\t\t'There was an error connecting to WooCommerce.com. Please try again.',\n\t\t\t'woocommerce-admin'\n\t\t)\n\t) {\n\t\tdocument.body.classList.remove( 'woocommerce-admin-is-loading' );\n\t\tgetHistory().push( this.baseQuery() );\n\t\tthis.props.createNotice( 'error', message );\n\t}\n\n\tasync request() {\n\t\ttry {\n\t\t\tconst connectResponse = await apiFetch( {\n\t\t\t\tpath: `${ WC_ADMIN_NAMESPACE }/plugins/request-wccom-connect`,\n\t\t\t\tmethod: 'POST',\n\t\t\t} );\n\t\t\tif ( connectResponse && connectResponse.connectAction ) {\n\t\t\t\twindow.location = connectResponse.connectAction;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthrow new Error();\n\t\t} catch ( err ) {\n\t\t\tthis.errorMessage();\n\t\t}\n\t}\n\n\tasync finish() {\n\t\tconst { query } = this.props;\n\t\ttry {\n\t\t\tconst connectResponse = await apiFetch( {\n\t\t\t\tpath: `${ WC_ADMIN_NAMESPACE }/plugins/finish-wccom-connect`,\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata: {\n\t\t\t\t\trequest_token: query.request_token,\n\t\t\t\t},\n\t\t\t} );\n\t\t\tif ( connectResponse && connectResponse.success ) {\n\t\t\t\tawait this.props.updateProfileItems( {\n\t\t\t\t\twccom_connected: true,\n\t\t\t\t} );\n\t\t\t\tif ( ! this.props.isProfileItemsError ) {\n\t\t\t\t\tthis.props.createNotice(\n\t\t\t\t\t\t'success',\n\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t'Store connected to WooCommerce.com and extensions are being installed.',\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\n\t\t\t\t\t// @todo Show a notice for when extensions are correctly installed.\n\n\t\t\t\t\tdocument.body.classList.remove(\n\t\t\t\t\t\t'woocommerce-admin-is-loading'\n\t\t\t\t\t);\n\t\t\t\t\tgetHistory().push( this.baseQuery() );\n\t\t\t\t} else {\n\t\t\t\t\tthis.errorMessage();\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthrow new Error();\n\t\t} catch ( err ) {\n\t\t\tthis.errorMessage();\n\t\t}\n\t}\n\n\trender() {\n\t\treturn null;\n\t}\n}\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst { getProfileItemsError } = select( 'wc-api' );\n\n\t\tconst isProfileItemsError = Boolean( getProfileItemsError() );\n\n\t\treturn { isProfileItemsError };\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { createNotice } = dispatch( 'core/notices' );\n\t\tconst { updateProfileItems } = dispatch( 'wc-api' );\n\t\treturn {\n\t\t\tcreateNotice,\n\t\t\tupdateProfileItems,\n\t\t};\n\t} )\n)( Connect );\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component, Fragment } from '@wordpress/element';\nimport { Button } from '@wordpress/components';\nimport { compose } from '@wordpress/compose';\nimport { withDispatch } from '@wordpress/data';\n\n/**\n * WooCommerce dependencies\n */\nimport { Form, H, TextControl } from '@woocommerce/components';\n\n/**\n * Internal dependencies\n */\nimport withSelect from 'wc-api/with-select';\n\nclass PayFast extends Component {\n\tgetInitialConfigValues = () => {\n\t\treturn {\n\t\t\taccount_name: '',\n\t\t\taccount_number: '',\n\t\t\tbank_name: '',\n\t\t\tsort_code: '',\n\t\t\tiban: '',\n\t\t\tbic: '',\n\t\t};\n\t};\n\n\tvalidate = ( values ) => {\n\t\tconst errors = {};\n\n\t\tif ( ! values.account_number && ! values.iban ) {\n\t\t\terrors.account_number = errors.iban = __(\n\t\t\t\t'Please enter an account number or IBAN',\n\t\t\t\t'woocommerce-admin'\n\t\t\t);\n\t\t}\n\n\t\treturn errors;\n\t};\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tconst {\n\t\t\tcreateNotice,\n\t\t\tisOptionsRequesting,\n\t\t\thasOptionsError,\n\t\t\tmarkConfigured,\n\t\t} = this.props;\n\n\t\tif ( prevProps.isOptionsRequesting && ! isOptionsRequesting ) {\n\t\t\tif ( ! hasOptionsError ) {\n\t\t\t\tmarkConfigured( 'bacs' );\n\t\t\t\tcreateNotice(\n\t\t\t\t\t'success',\n\t\t\t\t\t__(\n\t\t\t\t\t\t'Direct bank transfer details added successfully',\n\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tcreateNotice(\n\t\t\t\t\t'error',\n\t\t\t\t\t__(\n\t\t\t\t\t\t'There was a problem saving your payment setings',\n\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateSettings = ( values ) => {\n\t\tconst { updateOptions } = this.props;\n\n\t\tupdateOptions( {\n\t\t\twoocommerce_bacs_settings: {\n\t\t\t\tenabled: 'yes',\n\t\t\t},\n\t\t\twoocommerce_bacs_accounts: [ values ],\n\t\t} );\n\t};\n\n\trender() {\n\t\tconst { isOptionsRequesting } = this.props;\n\n\t\treturn (\n\t\t\t<Form\n\t\t\t\tinitialValues={ this.getInitialConfigValues() }\n\t\t\t\tonSubmitCallback={ this.updateSettings }\n\t\t\t\tvalidate={ this.validate }\n\t\t\t>\n\t\t\t\t{ ( { getInputProps, handleSubmit } ) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t<H>\n\t\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t\t'Add your bank details',\n\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</H>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t\t'These details are required to receive payments via bank transfer',\n\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<div className=\"woocommerce-task-payment-method__fields\">\n\t\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\t\tlabel={ __(\n\t\t\t\t\t\t\t\t\t\t'Account name',\n\t\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t{ ...getInputProps( 'account_name' ) }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\t\tlabel={ __(\n\t\t\t\t\t\t\t\t\t\t'Account number',\n\t\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t{ ...getInputProps( 'account_number' ) }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\t\tlabel={ __(\n\t\t\t\t\t\t\t\t\t\t'Bank name',\n\t\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t{ ...getInputProps( 'bank_name' ) }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\t\tlabel={ __(\n\t\t\t\t\t\t\t\t\t\t'Sort code',\n\t\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t{ ...getInputProps( 'sort_code' ) }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\t\tlabel={ __( 'IBAN', 'woocommerce-admin' ) }\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t{ ...getInputProps( 'iban' ) }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\t\tlabel={ __(\n\t\t\t\t\t\t\t\t\t\t'BIC / Swift',\n\t\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t{ ...getInputProps( 'bic' ) }\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\t\t\tisBusy={ isOptionsRequesting }\n\t\t\t\t\t\t\t\tonClick={ handleSubmit }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ __( 'Save', 'woocommerce-admin' ) }\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t);\n\t\t\t\t} }\n\t\t\t</Form>\n\t\t);\n\t}\n}\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst { getOptionsError, isUpdateOptionsRequesting } = select(\n\t\t\t'wc-api'\n\t\t);\n\t\tconst isOptionsRequesting = Boolean(\n\t\t\tisUpdateOptionsRequesting( [\n\t\t\t\t'woocommerce_bacs_settings',\n\t\t\t\t'woocommerce_bacs_accounts',\n\t\t\t] )\n\t\t);\n\t\tconst hasOptionsError = getOptionsError( [\n\t\t\t'woocommerce_bacs_settings',\n\t\t\t'woocommerce_bacs_accounts',\n\t\t] );\n\n\t\treturn {\n\t\t\thasOptionsError,\n\t\t\tisOptionsRequesting,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { createNotice } = dispatch( 'core/notices' );\n\t\tconst { updateOptions } = dispatch( 'wc-api' );\n\n\t\treturn {\n\t\t\tcreateNotice,\n\t\t\tupdateOptions,\n\t\t};\n\t} )\n)( PayFast );\n","export default () =>  (\n\t<svg width=\"96\" height=\"32\" viewBox=\"0 0 96 32\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<rect width=\"32\" height=\"32\" rx=\"16\" fill=\"#8E9196\" />\n\t\t<mask id=\"bacs0\" mask-type=\"alpha\" maskUnits=\"userSpaceOnUse\" x=\"8\" y=\"8\" width=\"16\" height=\"16\">\n\t\t\t<path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M8.875 12.25L16 8.5L23.125 12.25V13.75H8.875V12.25ZM16 10.195L19.9075 12.25H12.0925L16 10.195ZM10.75 15.25H12.25V20.5H10.75V15.25ZM15.25 20.5V15.25H16.75V20.5H15.25ZM23.125 23.5V22H8.875V23.5H23.125ZM19.75 15.25H21.25V20.5H19.75V15.25Z\" fill=\"white\" />\n\t\t</mask>\n\t\t<g mask=\"url(#bacs0)\">\n\t\t\t<rect x=\"7\" y=\"7\" width=\"18\" height=\"18\" fill=\"white\" />\n\t\t</g>\n\t\t<mask id=\"bacs1\" mask-type=\"alpha\" maskUnits=\"userSpaceOnUse\" x=\"39\" y=\"10\" width=\"18\" height=\"12\">\n\t\t\t<path d=\"M39 17L53.17 17L49.59 20.59L51 22L57 16L51 10L49.59 11.41L53.17 15L39 15L39 17Z\" fill=\"white\" />\n\t\t</mask>\n\t\t<g mask=\"url(#bacs1)\">\n\t\t\t<rect x=\"60\" y=\"28\" width=\"24\" height=\"24\" transform=\"rotate(-180 60 28)\" fill=\"#8E9196\" />\n\t\t</g>\n\t\t<rect x=\"64\" width=\"32\" height=\"32\" rx=\"16\" fill=\"#8E9196\" />\n\t\t<mask id=\"bacs2\" mask-type=\"alpha\" maskUnits=\"userSpaceOnUse\" x=\"72\" y=\"8\" width=\"16\" height=\"16\">\n\t\t\t<path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M72.875 12.25L80 8.5L87.125 12.25V13.75H72.875V12.25ZM80 10.195L83.9075 12.25H76.0925L80 10.195ZM74.75 15.25H76.25V20.5H74.75V15.25ZM79.25 20.5V15.25H80.75V20.5H79.25ZM87.125 23.5V22H72.875V23.5H87.125ZM83.75 15.25H85.25V20.5H83.75V15.25Z\" fill=\"white\" />\n\t\t</mask>\n\t\t<g mask=\"url(#bacs2)\">\n\t\t\t<rect x=\"71\" y=\"7\" width=\"18\" height=\"18\" fill=\"white\" />\n\t\t</g>\n\t</svg>\n);\n","export default () => (\n\t<svg width=\"96\" height=\"32\" viewBox=\"0 0 96 32\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t<rect width=\"32\" height=\"32\" rx=\"16\" fill=\"#8E9196\" />\n\t\t<mask id=\"cod-mask-0\" mask-type=\"alpha\" maskUnits=\"userSpaceOnUse\" x=\"7\" y=\"10\" width=\"18\" height=\"12\">\n\t\t\t<path fillRule=\"evenodd\" clipRule=\"evenodd\" d=\"M22 13H19.75V10H9.25C8.425 10 7.75 10.675 7.75 11.5V19.75H9.25C9.25 20.995 10.255 22 11.5 22C12.745 22 13.75 20.995 13.75 19.75H18.25C18.25 20.995 19.255 22 20.5 22C21.745 22 22.75 20.995 22.75 19.75H24.25V16L22 13ZM21.625 14.125L23.095 16H19.75V14.125H21.625ZM10.75 19.75C10.75 20.1625 11.0875 20.5 11.5 20.5C11.9125 20.5 12.25 20.1625 12.25 19.75C12.25 19.3375 11.9125 19 11.5 19C11.0875 19 10.75 19.3375 10.75 19.75ZM13.165 18.25C12.7525 17.7925 12.1675 17.5 11.5 17.5C10.8325 17.5 10.2475 17.7925 9.835 18.25H9.25V11.5H18.25V18.25H13.165ZM19.75 19.75C19.75 20.1625 20.0875 20.5 20.5 20.5C20.9125 20.5 21.25 20.1625 21.25 19.75C21.25 19.3375 20.9125 19 20.5 19C20.0875 19 19.75 19.3375 19.75 19.75Z\" fill=\"white\" />\n\t\t</mask>\n\t\t<g mask=\"url(#cod-mask-0)\">\n\t\t\t<rect x=\"7\" y=\"7\" width=\"18\" height=\"18\" fill=\"white\" />\n\t\t</g>\n\t\t<mask id=\"cod-mask-1\" mask-type=\"alpha\" maskUnits=\"userSpaceOnUse\" x=\"39\" y=\"10\" width=\"18\" height=\"12\">\n\t\t\t<path d=\"M39 17L53.17 17L49.59 20.59L51 22L57 16L51 10L49.59 11.41L53.17 15L39 15L39 17Z\" fill=\"white\" />\n\t\t</mask>\n\t\t<g mask=\"url(#cod-mask-1)\">\n\t\t\t<rect x=\"60\" y=\"28\" width=\"24\" height=\"24\" transform=\"rotate(-180 60 28)\" fill=\"#8E9196\" />\n\t\t</g>\n\t\t<rect x=\"64\" width=\"32\" height=\"32\" rx=\"16\" fill=\"#8E9196\" />\n\t\t<mask id=\"cod-mask-2\" mask-type=\"alpha\" maskUnits=\"userSpaceOnUse\" x=\"76\" y=\"9\" width=\"8\" height=\"14\">\n\t\t\t<path d=\"M80.2926 15.175C78.5901 14.7325 78.0426 14.275 78.0426 13.5625C78.0426 12.745 78.8001 12.175 80.0676 12.175C81.4026 12.175 81.8976 12.8125 81.9426 13.75H83.6001C83.5476 12.46 82.7601 11.275 81.1926 10.8925V9.25H78.9426V10.87C77.4876 11.185 76.3176 12.13 76.3176 13.5775C76.3176 15.31 77.7501 16.1725 79.8426 16.675C81.7176 17.125 82.0926 17.785 82.0926 18.4825C82.0926 19 81.7251 19.825 80.0676 19.825C78.5226 19.825 77.9151 19.135 77.8326 18.25H76.1826C76.2726 19.8925 77.5026 20.815 78.9426 21.1225V22.75H81.1926V21.1375C82.6551 20.86 83.8176 20.0125 83.8176 18.475C83.8176 16.345 81.9951 15.6175 80.2926 15.175Z\" fill=\"white\" />\n\t\t</mask>\n\t\t<g mask=\"url(#cod-mask-2)\">\n\t\t\t<rect x=\"71\" y=\"7\" width=\"18\" height=\"18\" fill=\"white\" />\n\t\t</g>\n\t</svg>\n);\n","export default () => (\n\t<svg\n\t\twidth=\"100\"\n\t\theight=\"64\"\n\t\tviewBox=\"-10 0 120 64\"\n\t\tfill=\"none\"\n\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t>\n\t\t<path\n\t\t\tfillRule=\"evenodd\"\n\t\t\tclipRule=\"evenodd\"\n\t\t\td=\"M9.78073 0.5H91.1787C96.3299 0.5 100.5 4.77335 100.5 10.0522V41.8929C100.5 47.1717 96.3299 51.4451 91.1787 51.4451H61.9883L65.9948 61.5L48.3742 51.4451H9.82161C4.67036 51.4451 0.500298 47.1717 0.500298 41.8929V10.0522C0.459415 4.81524 4.62947 0.5 9.78073 0.5Z\"\n\t\t\tfill=\"#7F54B3\"\n\t\t/>\n\t\t<path\n\t\t\td=\"M5.48791 9.1725C6.06028 8.37648 6.91882 7.95752 8.06354 7.87373C10.1486 7.70615 11.3342 8.71165 11.6204 10.8902C12.8877 19.6464 14.2778 27.0619 15.7495 33.1368L24.7029 15.6663C25.5206 14.0743 26.5426 13.2364 27.7691 13.1526C29.568 13.0269 30.6718 14.2 31.1215 16.6718C32.1436 22.2439 33.4519 26.9781 35.0054 31.0001C36.0684 20.3586 37.8672 12.6917 40.402 7.95753C41.0152 6.78445 41.9146 6.19791 43.1002 6.11412C44.0405 6.03033 44.8991 6.3236 45.6759 6.95203C46.4526 7.58047 46.8615 8.37648 46.9432 9.34008C46.9841 10.0942 46.8615 10.7226 46.5344 11.3511C44.94 14.3676 43.6317 19.4369 42.5688 26.4754C41.5467 33.3044 41.1787 38.6251 41.424 42.4376C41.5058 43.485 41.3423 44.4067 40.9334 45.2027C40.4428 46.1244 39.707 46.6272 38.7666 46.711C37.7037 46.7948 36.5998 46.292 35.5369 45.1608C31.7348 41.1807 28.7094 35.2316 26.5018 27.3133C23.8444 32.6759 21.882 36.6979 20.6146 39.3792C18.2025 44.1134 16.1584 46.5434 14.4413 46.6691C13.3374 46.7529 12.3971 45.7893 11.5795 43.7783C9.49445 38.2899 7.24589 27.6904 4.83379 11.9795C4.71114 10.8902 4.91555 9.92662 5.48791 9.1725Z\"\n\t\t\tfill=\"white\"\n\t\t/>\n\t\t<path\n\t\t\td=\"M93.3864 15.7499C91.9146 13.1105 89.7478 11.5185 86.8451 10.89C86.0683 10.7225 85.3324 10.6387 84.6374 10.6387C80.7127 10.6387 77.5238 12.7335 75.0299 16.923C72.904 20.4841 71.8411 24.4223 71.8411 28.7376C71.8411 31.9635 72.4952 34.7286 73.8034 37.0329C75.2752 39.6723 77.442 41.2644 80.3447 41.8928C81.1215 42.0604 81.8574 42.1442 82.5524 42.1442C86.518 42.1442 89.7069 40.0494 92.1599 35.8598C94.2858 32.2568 95.3488 28.3186 95.3488 24.0034C95.3488 20.7355 94.6946 18.0123 93.3864 15.7499ZM88.2351 27.355C87.6628 30.1201 86.6407 32.173 85.128 33.5556C83.9424 34.6449 82.8386 35.1057 81.8165 34.8962C80.8353 34.6868 80.0177 33.8069 79.4044 32.173C78.9138 30.8742 78.6685 29.5755 78.6685 28.3605C78.6685 27.3131 78.7503 26.2657 78.9547 25.3021C79.3226 23.5844 80.0177 21.9086 81.1215 20.3166C82.4706 18.2637 83.9015 17.4258 85.3733 17.719C86.3545 17.9285 87.1722 18.8083 87.7854 20.4422C88.276 21.741 88.5213 23.0398 88.5213 24.2547C88.5213 25.344 88.3987 26.3914 88.2351 27.355Z\"\n\t\t\tfill=\"white\"\n\t\t/>\n\t\t<path\n\t\t\td=\"M67.7528 15.7499C66.281 13.1105 64.0734 11.5185 61.2116 10.89C60.4348 10.7225 59.6989 10.6387 59.0039 10.6387C55.0791 10.6387 51.8903 12.7335 49.3964 16.923C47.2705 20.4841 46.2075 24.4223 46.2075 28.7376C46.2075 31.9635 46.8616 34.7286 48.1699 37.0329C49.6417 39.6723 51.8085 41.2644 54.7112 41.8928C55.488 42.0604 56.2238 42.1442 56.9189 42.1442C60.8845 42.1442 64.0734 40.0494 66.5263 35.8598C68.6523 32.2568 69.7152 28.3186 69.7152 24.0034C69.7152 20.7355 69.0611 18.0123 67.7528 15.7499ZM62.6016 27.355C62.0292 30.1201 61.0071 32.173 59.4945 33.5556C58.3089 34.6449 57.205 35.1057 56.183 34.8962C55.2018 34.6868 54.3841 33.8069 53.7709 32.173C53.2803 30.8742 53.035 29.5755 53.035 28.3605C53.035 27.3131 53.1167 26.2657 53.3212 25.3021C53.6891 23.5844 54.3841 21.9086 55.4879 20.3166C56.8371 18.2637 58.268 17.4258 59.7398 17.719C60.721 17.9285 61.5386 18.8083 62.1519 20.4422C62.6425 21.741 62.8878 23.0398 62.8878 24.2547C62.8878 25.344 62.806 26.3914 62.6016 27.355Z\"\n\t\t\tfill=\"white\"\n\t\t/>\n\t</svg>\n);\n","/**\n * External dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport classnames from 'classnames';\nimport { cloneElement, Component } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport { Button, FormToggle } from '@wordpress/components';\nimport { withDispatch } from '@wordpress/data';\n\n/**\n * WooCommerce dependencies\n */\nimport { Card, H, Plugins } from '@woocommerce/components';\nimport {\n\tgetHistory,\n\tgetNewPath,\n\tupdateQueryString,\n} from '@woocommerce/navigation';\nimport { PLUGINS_STORE_NAME } from '@woocommerce/data';\n\n/**\n * Internal dependencies\n */\nimport { recordEvent } from 'lib/tracks';\nimport { getCountryCode } from 'dashboard/utils';\nimport withSelect from 'wc-api/with-select';\nimport { pluginNames } from 'wc-api/onboarding/constants';\nimport { getPaymentMethods } from './methods';\n\nclass Payments extends Component {\n\tconstructor( props ) {\n\t\tsuper( ...arguments );\n\t\tconst { methods } = props;\n\n\t\tconst enabledMethods = {};\n\t\tmethods.forEach(\n\t\t\t( method ) => ( enabledMethods[ method.key ] = method.isEnabled )\n\t\t);\n\t\tthis.state = {\n\t\t\tenabledMethods,\n\t\t};\n\n\t\tthis.recommendedMethod = 'stripe';\n\t\tmethods.forEach( ( method ) => {\n\t\t\tif ( method.key === 'wcpay' && method.visible ) {\n\t\t\t\tthis.recommendedMethod = 'wcpay';\n\t\t\t}\n\t\t} );\n\n\t\tthis.completeTask = this.completeTask.bind( this );\n\t\tthis.markConfigured = this.markConfigured.bind( this );\n\t\tthis.skipTask = this.skipTask.bind( this );\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tconst { createNotice, errors, methods, requesting } = this.props;\n\n\t\tmethods.forEach( ( method ) => {\n\t\t\tconst { key, title } = method;\n\t\t\tif (\n\t\t\t\tprevProps.requesting[ key ] &&\n\t\t\t\t! requesting[ key ] &&\n\t\t\t\terrors[ key ]\n\t\t\t) {\n\t\t\t\tcreateNotice(\n\t\t\t\t\t'error',\n\t\t\t\t\tsprintf(\n\t\t\t\t\t\t__(\n\t\t\t\t\t\t\t'There was a problem updating settings for %s',\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t),\n\t\t\t\t\t\ttitle\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\t\t} );\n\t}\n\n\tcompleteTask() {\n\t\tconst { createNotice, methods, updateOptions } = this.props;\n\n\t\tupdateOptions( {\n\t\t\twoocommerce_task_list_payments: {\n\t\t\t\tcompleted: 1,\n\t\t\t\ttimestamp: Math.floor( Date.now() / 1000 ),\n\t\t\t},\n\t\t} );\n\n\t\trecordEvent( 'tasklist_payment_done', {\n\t\t\tconfigured: methods\n\t\t\t\t.filter( ( method ) => method.isConfigured )\n\t\t\t\t.map( ( method ) => method.key ),\n\t\t} );\n\n\t\tcreateNotice(\n\t\t\t'success',\n\t\t\t__(\n\t\t\t\t' Ka-ching! Your store can now accept payments ',\n\t\t\t\t'woocommerce-admin'\n\t\t\t)\n\t\t);\n\n\t\tgetHistory().push( getNewPath( {}, '/', {} ) );\n\t}\n\n\tskipTask() {\n\t\tconst { methods, updateOptions } = this.props;\n\n\t\tupdateOptions( {\n\t\t\twoocommerce_task_list_payments: {\n\t\t\t\tskipped: 1,\n\t\t\t\ttimestamp: Math.floor( Date.now() / 1000 ),\n\t\t\t},\n\t\t} );\n\n\t\trecordEvent( 'tasklist_payment_skip_task', {\n\t\t\toptions: methods.map( ( method ) => method.key ),\n\t\t} );\n\n\t\tgetHistory().push( getNewPath( {}, '/', {} ) );\n\t}\n\n\tmarkConfigured( method ) {\n\t\tconst { enabledMethods } = this.state;\n\n\t\tthis.setState( {\n\t\t\tenabledMethods: {\n\t\t\t\t...enabledMethods,\n\t\t\t\t[ method ]: true,\n\t\t\t},\n\t\t} );\n\n\t\tgetHistory().push( getNewPath( { task: 'payments' }, '/', {} ) );\n\n\t\trecordEvent( 'tasklist_payment_connect_method', {\n\t\t\tpayment_method: method,\n\t\t} );\n\t}\n\n\tgetCurrentMethod() {\n\t\tconst { methods, query } = this.props;\n\n\t\tif ( ! query.method ) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn methods.find( ( method ) => method.key === query.method );\n\t}\n\n\tgetInstallStep() {\n\t\tconst currentMethod = this.getCurrentMethod();\n\n\t\tif ( ! currentMethod.plugins || ! currentMethod.plugins.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { activePlugins } = this.props;\n\t\tconst pluginsToInstall = currentMethod.plugins.filter(\n\t\t\t( method ) => ! activePlugins.includes( method )\n\t\t);\n\t\tconst pluginNamesString = currentMethod.plugins\n\t\t\t.map( ( pluginSlug ) => pluginNames[ pluginSlug ] )\n\t\t\t.join( ' ' + __( 'and', 'woocommerce-admin' ) + ' ' );\n\n\t\treturn {\n\t\t\tkey: 'install',\n\t\t\tlabel: sprintf(\n\t\t\t\t__( 'Install %s', 'woocommerce-admin' ),\n\t\t\t\tpluginNamesString\n\t\t\t),\n\t\t\tcontent: (\n\t\t\t\t<Plugins\n\t\t\t\t\tonComplete={ () => {\n\t\t\t\t\t\trecordEvent( 'tasklist_payment_install_method', {\n\t\t\t\t\t\t\tplugins: currentMethod.plugins,\n\t\t\t\t\t\t} );\n\t\t\t\t\t} }\n\t\t\t\t\tautoInstall\n\t\t\t\t\tpluginSlugs={ currentMethod.plugins }\n\t\t\t\t/>\n\t\t\t),\n\t\t\tisComplete: ! pluginsToInstall.length,\n\t\t};\n\t}\n\n\ttoggleMethod( key ) {\n\t\tconst { methods, options, updateOptions } = this.props;\n\t\tconst { enabledMethods } = this.state;\n\t\tconst method = methods.find( ( option ) => option.key === key );\n\n\t\tenabledMethods[ key ] = ! enabledMethods[ key ];\n\t\tthis.setState( { enabledMethods } );\n\n\t\trecordEvent( 'tasklist_payment_toggle', {\n\t\t\tenabled: ! method.isEnabled,\n\t\t\tpayment_method: key,\n\t\t} );\n\n\t\tupdateOptions( {\n\t\t\t[ method.optionName ]: {\n\t\t\t\t...options[ method.optionName ],\n\t\t\t\tenabled: method.isEnabled ? 'no' : 'yes',\n\t\t\t},\n\t\t} );\n\t}\n\n\trender() {\n\t\tconst currentMethod = this.getCurrentMethod();\n\t\tconst { methods, query } = this.props;\n\t\tconst { enabledMethods } = this.state;\n\t\tconst configuredMethods = methods.filter(\n\t\t\t( method ) => method.isConfigured\n\t\t).length;\n\n\t\tif ( currentMethod ) {\n\t\t\treturn (\n\t\t\t\t<Card className=\"woocommerce-task-payment-method is-narrow\">\n\t\t\t\t\t{ cloneElement( currentMethod.container, {\n\t\t\t\t\t\tquery,\n\t\t\t\t\t\tinstallStep: this.getInstallStep(),\n\t\t\t\t\t\tmarkConfigured: this.markConfigured,\n\t\t\t\t\t\thasCbdIndustry: currentMethod.hasCbdIndustry,\n\t\t\t\t\t} ) }\n\t\t\t\t</Card>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"woocommerce-task-payments\">\n\t\t\t\t{ methods.map( ( method ) => {\n\t\t\t\t\tconst {\n\t\t\t\t\t\tbefore,\n\t\t\t\t\t\tcontainer,\n\t\t\t\t\t\tcontent,\n\t\t\t\t\t\tisConfigured,\n\t\t\t\t\t\tkey,\n\t\t\t\t\t\ttitle,\n\t\t\t\t\t\tvisible,\n\t\t\t\t\t} = method;\n\n\t\t\t\t\tif ( ! visible ) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst classes = classnames(\n\t\t\t\t\t\t'woocommerce-task-payment',\n\t\t\t\t\t\t'is-narrow',\n\t\t\t\t\t\t! isConfigured &&\n\t\t\t\t\t\t\t'woocommerce-task-payment-not-configured',\n\t\t\t\t\t\t'woocommerce-task-payment-' + key\n\t\t\t\t\t);\n\n\t\t\t\t\tconst isRecommended =\n\t\t\t\t\t\tkey === this.recommendedMethod && ! isConfigured;\n\t\t\t\t\tconst showRecommendedRibbon =\n\t\t\t\t\t\tisRecommended && this.recommendedMethod !== 'wcpay';\n\t\t\t\t\tconst showRecommendedPill =\n\t\t\t\t\t\tisRecommended && this.recommendedMethod === 'wcpay';\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Card key={ key } className={ classes }>\n\t\t\t\t\t\t\t<div className=\"woocommerce-task-payment__before\">\n\t\t\t\t\t\t\t\t{ showRecommendedRibbon && (\n\t\t\t\t\t\t\t\t\t<div className=\"woocommerce-task-payment__recommended-ribbon\">\n\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t\t\t\t\t'Recommended',\n\t\t\t\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t{ before }\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"woocommerce-task-payment__text\">\n\t\t\t\t\t\t\t\t<H className=\"woocommerce-task-payment__title\">\n\t\t\t\t\t\t\t\t\t{ title }\n\t\t\t\t\t\t\t\t\t{ showRecommendedPill && (\n\t\t\t\t\t\t\t\t\t\t<span className=\"woocommerce-task-payment__recommended-pill\">\n\t\t\t\t\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t\t\t\t\t'Recommended',\n\t\t\t\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t</H>\n\t\t\t\t\t\t\t\t<div className=\"woocommerce-task-payment__content\">\n\t\t\t\t\t\t\t\t\t{ content }\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"woocommerce-task-payment__after\">\n\t\t\t\t\t\t\t\t{ container && ! isConfigured ? (\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tisPrimary={\n\t\t\t\t\t\t\t\t\t\t\tkey === this.recommendedMethod\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tisDefault={\n\t\t\t\t\t\t\t\t\t\t\tkey !== this.recommendedMethod\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t\t\t\t\t\t\t'tasklist_payment_setup',\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\toptions: methods.map(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t( option ) => option.key\n\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\tselected: key,\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\tupdateQueryString( {\n\t\t\t\t\t\t\t\t\t\t\t\tmethod: key,\n\t\t\t\t\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{ __( 'Set up', 'woocommerce-admin' ) }\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<FormToggle\n\t\t\t\t\t\t\t\t\t\tchecked={ enabledMethods[ key ] }\n\t\t\t\t\t\t\t\t\t\tonChange={ () =>\n\t\t\t\t\t\t\t\t\t\t\tthis.toggleMethod( key )\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tonClick={ ( e ) => e.stopPropagation() }\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Card>\n\t\t\t\t\t);\n\t\t\t\t} ) }\n\t\t\t\t<div className=\"woocommerce-task-payments__actions\">\n\t\t\t\t\t{ configuredMethods.length === 0 ? (\n\t\t\t\t\t\t<Button isLink onClick={ this.skipTask }>\n\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t'My store doesnt take payments',\n\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<Button isPrimary onClick={ this.completeTask }>\n\t\t\t\t\t\t\t{ __( 'Done', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t) }\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetProfileItems,\n\t\t\tgetOptions,\n\t\t\tgetUpdateOptionsError,\n\t\t\tisUpdateOptionsRequesting,\n\t\t} = select( 'wc-api' );\n\n\t\tconst { getActivePlugins, isJetpackConnected } = select(\n\t\t\tPLUGINS_STORE_NAME\n\t\t);\n\t\tconst activePlugins = getActivePlugins();\n\t\tconst profileItems = getProfileItems();\n\t\tconst options = getOptions( [\n\t\t\t'woocommerce_default_country',\n\t\t\t'woocommerce_woocommerce_payments_settings',\n\t\t\t'woocommerce_stripe_settings',\n\t\t\t'woocommerce_ppec_paypal_settings',\n\t\t\t'woocommerce_payfast_settings',\n\t\t\t'woocommerce_square_credit_card_settings',\n\t\t\t'woocommerce_klarna_payments_settings',\n\t\t\t'woocommerce_kco_settings',\n\t\t\t'wc_square_refresh_tokens',\n\t\t\t'woocommerce_cod_settings',\n\t\t\t'woocommerce_bacs_settings',\n\t\t\t'woocommerce_bacs_accounts',\n\t\t] );\n\t\tconst countryCode = getCountryCode(\n\t\t\toptions.woocommerce_default_country\n\t\t);\n\n\t\tconst methods = getPaymentMethods( {\n\t\t\tactivePlugins,\n\t\t\tcountryCode,\n\t\t\tisJetpackConnected: isJetpackConnected(),\n\t\t\toptions,\n\t\t\tprofileItems,\n\t\t} );\n\n\t\tconst errors = {};\n\t\tconst requesting = {};\n\t\tmethods.forEach( ( method ) => {\n\t\t\terrors[ method.key ] = Boolean(\n\t\t\t\tgetUpdateOptionsError( [ method.optionName ] )\n\t\t\t);\n\t\t\trequesting[ method.key ] = Boolean(\n\t\t\t\tisUpdateOptionsRequesting( [ method.optionName ] )\n\t\t\t);\n\t\t} );\n\n\t\treturn {\n\t\t\tcountryCode,\n\t\t\terrors,\n\t\t\tprofileItems,\n\t\t\tactivePlugins,\n\t\t\toptions,\n\t\t\tmethods,\n\t\t\trequesting,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { createNotice } = dispatch( 'core/notices' );\n\t\tconst { updateOptions } = dispatch( 'wc-api' );\n\t\treturn {\n\t\t\tcreateNotice,\n\t\t\tupdateOptions,\n\t\t};\n\t} )\n)( Payments );\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component, Fragment } from '@wordpress/element';\nimport { Button } from '@wordpress/components';\nimport interpolateComponents from 'interpolate-components';\n\n/**\n * WooCommerce dependencies\n */\nimport { ADMIN_URL as adminUrl } from '@woocommerce/wc-admin-settings';\nimport { Link, Stepper } from '@woocommerce/components';\n\nclass Klarna extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.continue = this.continue.bind( this );\n\t}\n\n\tcontinue() {\n\t\tconst { markConfigured, plugin } = this.props;\n\n\t\tconst slug =\n\t\t\tplugin === 'checkout' ? 'klarna-checkout' : 'klarna-payments';\n\n\t\tmarkConfigured( slug );\n\t}\n\n\trenderConnectStep() {\n\t\tconst { plugin } = this.props;\n\n\t\tconst slug =\n\t\t\tplugin === 'checkout' ? 'klarna-checkout' : 'klarna-payments';\n\t\tconst section = plugin === 'checkout' ? 'kco' : 'klarna_payments';\n\n\t\tconst link = (\n\t\t\t<Link\n\t\t\t\thref={\n\t\t\t\t\tadminUrl +\n\t\t\t\t\t'admin.php?page=wc-settings&tab=checkout&section=' +\n\t\t\t\t\tsection\n\t\t\t\t}\n\t\t\t\ttarget=\"_blank\"\n\t\t\t\ttype=\"external\"\n\t\t\t/>\n\t\t);\n\n\t\tconst helpLink = (\n\t\t\t<Link\n\t\t\t\thref={\n\t\t\t\t\t'https://docs.woocommerce.com/document/' +\n\t\t\t\t\tslug +\n\t\t\t\t\t'/#section-3'\n\t\t\t\t}\n\t\t\t\ttarget=\"_blank\"\n\t\t\t\ttype=\"external\"\n\t\t\t/>\n\t\t);\n\n\t\tconst configureText = interpolateComponents( {\n\t\t\tmixedString: __(\n\t\t\t\t'Klarna can be configured under your {{link}}store settings{{/link}}. Figure out {{helpLink}}what you need{{/helpLink}}.',\n\t\t\t\t'woocommerce-admin'\n\t\t\t),\n\t\t\tcomponents: {\n\t\t\t\tlink,\n\t\t\t\thelpLink,\n\t\t\t},\n\t\t} );\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<p>{ configureText }</p>\n\t\t\t\t<Button isPrimary isDefault onClick={ this.continue }>\n\t\t\t\t\t{ __( 'Continue', 'woocommerce-admin' ) }\n\t\t\t\t</Button>\n\t\t\t</Fragment>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst { installStep } = this.props;\n\n\t\treturn (\n\t\t\t<Stepper\n\t\t\t\tisVertical\n\t\t\t\tisPending={ ! installStep.isComplete }\n\t\t\t\tcurrentStep={ installStep.isComplete ? 'connect' : 'install' }\n\t\t\t\tsteps={ [\n\t\t\t\t\tinstallStep,\n\t\t\t\t\t{\n\t\t\t\t\t\tkey: 'connect',\n\t\t\t\t\t\tlabel: __(\n\t\t\t\t\t\t\t'Connect your Klarna account',\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t),\n\t\t\t\t\t\tcontent: this.renderConnectStep(),\n\t\t\t\t\t},\n\t\t\t\t] }\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default Klarna;\n","/**\n * External dependencies\n */\n\nimport { __ } from '@wordpress/i18n';\nimport { Fragment } from '@wordpress/element';\nimport { filter, some } from 'lodash';\nimport interpolateComponents from 'interpolate-components';\n\n/**\n * WooCommerce dependencies\n */\nimport {\n\tgetSetting,\n\tWC_ASSET_URL as wcAssetUrl,\n} from '@woocommerce/wc-admin-settings';\nimport { Link } from '@woocommerce/components';\n\n/**\n * Internal dependencies\n */\nimport Bacs from './bacs';\nimport BacsIcon from './images/bacs';\nimport CodIcon from './images/cod';\nimport Stripe from './stripe';\nimport Square from './square';\nimport WCPay from './wcpay';\nimport WCPayIcon from './images/wcpay';\nimport PayPal from './paypal';\nimport Klarna from './klarna';\nimport PayFast from './payfast';\n\nexport function getPaymentMethods( {\n\tactivePlugins,\n\tcountryCode,\n\tisJetpackConnected,\n\toptions,\n\tprofileItems,\n} ) {\n\tconst stripeCountries = getSetting( 'onboarding', {\n\t\tstripeSupportedCountries: [],\n\t} ).stripeSupportedCountries;\n\n\tconst hasCbdIndustry =\n\t\tsome( profileItems.industry, {\n\t\t\tslug: 'cbd-other-hemp-derived-products',\n\t\t} ) || false;\n\n\tconst methods = [];\n\n\tif ( window.wcAdminFeatures.wcpay ) {\n\t\tconst tosLink = (\n\t\t\t<Link\n\t\t\t\thref={ 'https://wordpress.com/tos/' }\n\t\t\t\ttarget=\"_blank\"\n\t\t\t\ttype=\"external\"\n\t\t\t/>\n\t\t);\n\n\t\tconst tosPrompt = interpolateComponents( {\n\t\t\tmixedString: __(\n\t\t\t\t'By clicking \"Set up,\" you agree to the {{link}}Terms of Service{{/link}}',\n\t\t\t\t'woocommerce-admin'\n\t\t\t),\n\t\t\tcomponents: {\n\t\t\t\tlink: tosLink,\n\t\t\t},\n\t\t} );\n\n\t\tconst wcPayDocLink = (\n\t\t\t<Link\n\t\t\t\thref={\n\t\t\t\t\t'https://docs.woocommerce.com/document/payments/testing/dev-mode/'\n\t\t\t\t}\n\t\t\t\ttarget=\"_blank\"\n\t\t\t\ttype=\"external\"\n\t\t\t/>\n\t\t);\n\n\t\tconst wcPayDocPrompt = interpolateComponents( {\n\t\t\tmixedString: __(\n\t\t\t\t'Setting up a store for a client? {{link}}Start here{{/link}}',\n\t\t\t\t'woocommerce-admin'\n\t\t\t),\n\t\t\tcomponents: {\n\t\t\t\tlink: wcPayDocLink,\n\t\t\t},\n\t\t} );\n\n\t\tconst wcPaySettingsLink = (\n\t\t\t<Link\n\t\t\t\thref={\n\t\t\t\t\t'/wp-admin/admin.php?page=wc-settings&tab=checkout&section=woocommerce_payments'\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t{ __( 'Settings', 'woocommerce-admin' ) }\n\t\t\t</Link>\n\t\t);\n\n\t\t// @todo This should check actual connection information.\n\t\tconst wcPayIsConfigured = activePlugins.includes(\n\t\t\t'woocommerce-payments'\n\t\t);\n\n\t\tmethods.push( {\n\t\t\tkey: 'wcpay',\n\t\t\ttitle: __( 'WooCommerce Payments', 'woocommerce-admin' ),\n\t\t\tcontent: (\n\t\t\t\t<Fragment>\n\t\t\t\t\t{ __(\n\t\t\t\t\t\t'Accept credit card payments the easy way! No setup fees. No ' +\n\t\t\t\t\t\t\t'monthly fees. Just 2.9% + $0.30 per transaction ' +\n\t\t\t\t\t\t\t'on U.S. issued cards. ',\n\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t) }\n\t\t\t\t\t{ wcPayIsConfigured && wcPaySettingsLink }\n\t\t\t\t\t{ ! wcPayIsConfigured && <p>{ tosPrompt }</p> }\n\t\t\t\t\t{ profileItems.setup_client && <p>{ wcPayDocPrompt }</p> }\n\t\t\t\t</Fragment>\n\t\t\t),\n\t\t\tbefore: <WCPayIcon />,\n\t\t\tvisible:\n\t\t\t\t[ 'US' ].includes( countryCode ) &&\n\t\t\t\t! hasCbdIndustry &&\n\t\t\t\tisJetpackConnected,\n\t\t\tplugins: [ 'woocommerce-payments' ],\n\t\t\tcontainer: <WCPay />,\n\t\t\tisConfigured: wcPayIsConfigured,\n\t\t\tisEnabled:\n\t\t\t\toptions.woocommerce_woocommerce_payments_settings &&\n\t\t\t\toptions.woocommerce_woocommerce_payments_settings.enabled ===\n\t\t\t\t\t'yes',\n\t\t\toptionName: 'woocommerce_woocommerce_payments_settings',\n\t\t} );\n\t}\n\n\tmethods.push(\n\t\t{\n\t\t\tkey: 'stripe',\n\t\t\ttitle: __(\n\t\t\t\t'Credit cards - powered by Stripe',\n\t\t\t\t'woocommerce-admin'\n\t\t\t),\n\t\t\tcontent: (\n\t\t\t\t<Fragment>\n\t\t\t\t\t{ __(\n\t\t\t\t\t\t'Accept debit and credit cards in 135+ currencies, methods such as Alipay, ' +\n\t\t\t\t\t\t\t'and one-touch checkout with Apple Pay.',\n\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t) }\n\t\t\t\t</Fragment>\n\t\t\t),\n\t\t\tbefore: <img src={ wcAssetUrl + 'images/stripe.png' } alt=\"\" />,\n\t\t\tvisible:\n\t\t\t\tstripeCountries.includes( countryCode ) && ! hasCbdIndustry,\n\t\t\tplugins: [ 'woocommerce-gateway-stripe' ],\n\t\t\tcontainer: <Stripe />,\n\t\t\tisConfigured:\n\t\t\t\toptions.woocommerce_stripe_settings &&\n\t\t\t\toptions.woocommerce_stripe_settings.publishable_key &&\n\t\t\t\toptions.woocommerce_stripe_settings.secret_key,\n\t\t\tisEnabled:\n\t\t\t\toptions.woocommerce_stripe_settings &&\n\t\t\t\toptions.woocommerce_stripe_settings.enabled === 'yes',\n\t\t\toptionName: 'woocommerce_stripe_settings',\n\t\t},\n\t\t{\n\t\t\tkey: 'paypal',\n\t\t\ttitle: __( 'PayPal Checkout', 'woocommerce-admin' ),\n\t\t\tcontent: (\n\t\t\t\t<Fragment>\n\t\t\t\t\t{ __(\n\t\t\t\t\t\t\"Safe and secure payments using credit cards or your customer's PayPal account.\",\n\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t) }\n\t\t\t\t</Fragment>\n\t\t\t),\n\t\t\tbefore: <img src={ wcAssetUrl + 'images/paypal.png' } alt=\"\" />,\n\t\t\tvisible: ! hasCbdIndustry,\n\t\t\tplugins: [ 'woocommerce-gateway-paypal-express-checkout' ],\n\t\t\tcontainer: <PayPal />,\n\t\t\tisConfigured:\n\t\t\t\toptions.woocommerce_ppec_paypal_settings &&\n\t\t\t\toptions.woocommerce_ppec_paypal_settings.api_username &&\n\t\t\t\toptions.woocommerce_ppec_paypal_settings.api_password,\n\t\t\tisEnabled:\n\t\t\t\toptions.woocommerce_ppec_paypal_settings &&\n\t\t\t\toptions.woocommerce_ppec_paypal_settings.enabled === 'yes',\n\t\t\toptionName: 'woocommerce_ppec_paypal_settings',\n\t\t},\n\t\t{\n\t\t\tkey: 'klarna_checkout',\n\t\t\ttitle: __( 'Klarna Checkout', 'woocommerce-admin' ),\n\t\t\tcontent: __(\n\t\t\t\t'Choose the payment that you want, pay now, pay later or slice it. No credit card numbers, no passwords, no worries.',\n\t\t\t\t'woocommerce-admin'\n\t\t\t),\n\t\t\tbefore: (\n\t\t\t\t<img src={ wcAssetUrl + 'images/klarna-black.png' } alt=\"\" />\n\t\t\t),\n\t\t\tvisible:\n\t\t\t\t[ 'SE', 'FI', 'NO', 'NL' ].includes( countryCode ) &&\n\t\t\t\t! hasCbdIndustry,\n\t\t\tplugins: [ 'klarna-checkout-for-woocommerce' ],\n\t\t\tcontainer: <Klarna plugin={ 'checkout' } />,\n\t\t\t// @todo This should check actual Klarna connection information.\n\t\t\tisConfigured: activePlugins.includes(\n\t\t\t\t'klarna-checkout-for-woocommerce'\n\t\t\t),\n\t\t\tisEnabled:\n\t\t\t\toptions.woocommerce_kco_settings &&\n\t\t\t\toptions.woocommerce_kco_settings.enabled === 'yes',\n\t\t\toptionName: 'woocommerce_kco_settings',\n\t\t},\n\t\t{\n\t\t\tkey: 'klarna_payments',\n\t\t\ttitle: __( 'Klarna Payments', 'woocommerce-admin' ),\n\t\t\tcontent: __(\n\t\t\t\t'Choose the payment that you want, pay now, pay later or slice it. No credit card numbers, no passwords, no worries.',\n\t\t\t\t'woocommerce-admin'\n\t\t\t),\n\t\t\tbefore: (\n\t\t\t\t<img src={ wcAssetUrl + 'images/klarna-black.png' } alt=\"\" />\n\t\t\t),\n\t\t\tvisible:\n\t\t\t\t[ 'DK', 'DE', 'AT' ].includes( countryCode ) &&\n\t\t\t\t! hasCbdIndustry,\n\t\t\tplugins: [ 'klarna-payments-for-woocommerce' ],\n\t\t\tcontainer: <Klarna plugin={ 'payments' } />,\n\t\t\t// @todo This should check actual Klarna connection information.\n\t\t\tisConfigured: activePlugins.includes(\n\t\t\t\t'klarna-payments-for-woocommerce'\n\t\t\t),\n\t\t\tisEnabled:\n\t\t\t\toptions.woocommerce_klarna_payments_settings &&\n\t\t\t\toptions.woocommerce_klarna_payments_settings.enabled === 'yes',\n\t\t\toptionName: 'woocommerce_klarna_payments_settings',\n\t\t},\n\t\t{\n\t\t\tkey: 'square',\n\t\t\ttitle: __( 'Square', 'woocommerce-admin' ),\n\t\t\tcontent: (\n\t\t\t\t<Fragment>\n\t\t\t\t\t{ __(\n\t\t\t\t\t\t'Securely accept credit and debit cards with one low rate, no surprise fees (custom rates available). ' +\n\t\t\t\t\t\t\t'Sell online and in store and track sales and inventory in one place.',\n\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t) }\n\t\t\t\t\t{ hasCbdIndustry && (\n\t\t\t\t\t\t<span className=\"text-style-strong\">\n\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t' Selling CBD products is only supported by Square.',\n\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</span>\n\t\t\t\t\t) }\n\t\t\t\t</Fragment>\n\t\t\t),\n\t\t\tbefore: (\n\t\t\t\t<img src={ wcAssetUrl + 'images/square-black.png' } alt=\"\" />\n\t\t\t),\n\t\t\tvisible:\n\t\t\t\t( hasCbdIndustry && [ 'US' ].includes( countryCode ) ) ||\n\t\t\t\t( [ 'brick-mortar', 'brick-mortar-other' ].includes(\n\t\t\t\t\tprofileItems.selling_venues\n\t\t\t\t) &&\n\t\t\t\t\t[ 'US', 'CA', 'JP', 'GB', 'AU' ].includes( countryCode ) ),\n\t\t\tplugins: [ 'woocommerce-square' ],\n\t\t\tcontainer: <Square />,\n\t\t\tisConfigured:\n\t\t\t\toptions.wc_square_refresh_tokens &&\n\t\t\t\toptions.wc_square_refresh_tokens.length,\n\t\t\tisEnabled:\n\t\t\t\toptions.woocommerce_square_credit_card_settings &&\n\t\t\t\toptions.woocommerce_square_credit_card_settings.enabled ===\n\t\t\t\t\t'yes',\n\t\t\toptionName: 'woocommerce_square_credit_card_settings',\n\t\t\thasCbdIndustry,\n\t\t},\n\t\t{\n\t\t\tkey: 'payfast',\n\t\t\ttitle: __( 'PayFast', 'woocommerce-admin' ),\n\t\t\tcontent: (\n\t\t\t\t<Fragment>\n\t\t\t\t\t{ __(\n\t\t\t\t\t\t'The PayFast extension for WooCommerce enables you to accept payments by Credit Card and EFT via one of South Africas most popular payment gateways. No setup fees or monthly subscription costs.',\n\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t) }\n\t\t\t\t\t<p>\n\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t'Selecting this extension will configure your store to use South African rands as the selected currency.',\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t) }\n\t\t\t\t\t</p>\n\t\t\t\t</Fragment>\n\t\t\t),\n\t\t\tbefore: (\n\t\t\t\t<img\n\t\t\t\t\tsrc={ wcAssetUrl + 'images/payfast.png' }\n\t\t\t\t\talt=\"PayFast logo\"\n\t\t\t\t/>\n\t\t\t),\n\t\t\tvisible: [ 'ZA' ].includes( countryCode ) && ! hasCbdIndustry,\n\t\t\tplugins: [ 'woocommerce-payfast-gateway' ],\n\t\t\tcontainer: <PayFast />,\n\t\t\tisConfigured:\n\t\t\t\toptions.woocommerce_payfast_settings &&\n\t\t\t\toptions.woocommerce_payfast_settings.merchant_id &&\n\t\t\t\toptions.woocommerce_payfast_settings.merchant_key &&\n\t\t\t\toptions.woocommerce_payfast_settings.pass_phrase,\n\t\t\tisEnabled:\n\t\t\t\toptions.woocommerce_payfast_settings &&\n\t\t\t\toptions.woocommerce_payfast_settings.enabled === 'yes',\n\t\t\toptionName: 'woocommerce_payfast_settings',\n\t\t},\n\t\t{\n\t\t\tkey: 'cod',\n\t\t\ttitle: __( 'Cash on delivery', 'woocommerce-admin' ),\n\t\t\tcontent: __(\n\t\t\t\t'Take payments in cash upon delivery.',\n\t\t\t\t'woocommerce-admin'\n\t\t\t),\n\t\t\tbefore: <CodIcon />,\n\t\t\tvisible: ! hasCbdIndustry,\n\t\t\tisEnabled:\n\t\t\t\toptions.woocommerce_cod_settings &&\n\t\t\t\toptions.woocommerce_cod_settings.enabled === 'yes',\n\t\t\toptionName: 'woocommerce_cod_settings',\n\t\t},\n\t\t{\n\t\t\tkey: 'bacs',\n\t\t\ttitle: __( 'Direct bank transfer', 'woocommerce-admin' ),\n\t\t\tcontent: __(\n\t\t\t\t'Take payments via bank transfer.',\n\t\t\t\t'woocommerce-admin'\n\t\t\t),\n\t\t\tbefore: <BacsIcon />,\n\t\t\tvisible: ! hasCbdIndustry,\n\t\t\tcontainer: <Bacs />,\n\t\t\tisConfigured:\n\t\t\t\toptions.woocommerce_bacs_accounts &&\n\t\t\t\toptions.woocommerce_bacs_accounts.length,\n\t\t\tisEnabled:\n\t\t\t\toptions.woocommerce_bacs_settings &&\n\t\t\t\toptions.woocommerce_bacs_settings.enabled === 'yes',\n\t\t\toptionName: 'woocommerce_bacs_settings',\n\t\t}\n\t);\n\n\treturn filter( methods, ( method ) => method.visible );\n}\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component, Fragment } from '@wordpress/element';\nimport { Button } from '@wordpress/components';\nimport interpolateComponents from 'interpolate-components';\nimport { compose } from '@wordpress/compose';\nimport { withDispatch } from '@wordpress/data';\n\n/**\n * WooCommerce dependencies\n */\nimport { Form, Link, Stepper, TextControl } from '@woocommerce/components';\n\n/**\n * Internal dependencies\n */\nimport withSelect from 'wc-api/with-select';\n\nclass PayFast extends Component {\n\tgetInitialConfigValues = () => {\n\t\treturn {\n\t\t\tmerchant_id: '',\n\t\t\tmerchant_key: '',\n\t\t\tpass_phrase: '',\n\t\t};\n\t};\n\n\tvalidate = ( values ) => {\n\t\tconst errors = {};\n\n\t\tif ( ! values.merchant_id ) {\n\t\t\terrors.merchant_id = __(\n\t\t\t\t'Please enter your merchant ID',\n\t\t\t\t'woocommerce-admin'\n\t\t\t);\n\t\t}\n\n\t\tif ( ! values.merchant_key ) {\n\t\t\terrors.merchant_key = __(\n\t\t\t\t'Please enter your merchant key',\n\t\t\t\t'woocommerce-admin'\n\t\t\t);\n\t\t}\n\n\t\tif ( ! values.pass_phrase ) {\n\t\t\terrors.pass_phrase = __(\n\t\t\t\t'Please enter your passphrase',\n\t\t\t\t'woocommerce-admin'\n\t\t\t);\n\t\t}\n\n\t\treturn errors;\n\t};\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tconst {\n\t\t\tcreateNotice,\n\t\t\tisOptionsRequesting,\n\t\t\thasOptionsError,\n\t\t\tmarkConfigured,\n\t\t} = this.props;\n\n\t\tif ( prevProps.isOptionsRequesting && ! isOptionsRequesting ) {\n\t\t\tif ( ! hasOptionsError ) {\n\t\t\t\tmarkConfigured( 'payfast' );\n\t\t\t\tcreateNotice(\n\t\t\t\t\t'success',\n\t\t\t\t\t__( 'PayFast connected successfully', 'woocommerce-admin' )\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tcreateNotice(\n\t\t\t\t\t'error',\n\t\t\t\t\t__(\n\t\t\t\t\t\t'There was a problem saving your payment setings',\n\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateSettings = ( values ) => {\n\t\tconst { updateOptions } = this.props;\n\n\t\t// Because the PayFast extension only works with the South African Rand\n\t\t// currency, force the store to use it while setting the PayFast settings\n\t\tupdateOptions( {\n\t\t\twoocommerce_currency: 'ZAR',\n\t\t\twoocommerce_payfast_settings: {\n\t\t\t\tmerchant_id: values.merchant_id,\n\t\t\t\tmerchant_key: values.merchant_key,\n\t\t\t\tpass_phrase: values.pass_phrase,\n\t\t\t\tenabled: 'yes',\n\t\t\t},\n\t\t} );\n\t};\n\n\trenderConnectStep() {\n\t\tconst { isOptionsRequesting } = this.props;\n\t\tconst helpText = interpolateComponents( {\n\t\t\tmixedString: __(\n\t\t\t\t'Your API details can be obtained from your {{link}}PayFast account{{/link}}',\n\t\t\t\t'woocommerce-admin'\n\t\t\t),\n\t\t\tcomponents: {\n\t\t\t\tlink: (\n\t\t\t\t\t<Link\n\t\t\t\t\t\thref=\"https://www.payfast.co.za/\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\ttype=\"external\"\n\t\t\t\t\t/>\n\t\t\t\t),\n\t\t\t},\n\t\t} );\n\n\t\treturn (\n\t\t\t<Form\n\t\t\t\tinitialValues={ this.getInitialConfigValues() }\n\t\t\t\tonSubmitCallback={ this.updateSettings }\n\t\t\t\tvalidate={ this.validate }\n\t\t\t>\n\t\t\t\t{ ( { getInputProps, handleSubmit } ) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\tlabel={ __(\n\t\t\t\t\t\t\t\t\t'Merchant ID',\n\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t{ ...getInputProps( 'merchant_id' ) }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\tlabel={ __(\n\t\t\t\t\t\t\t\t\t'Merchant Key',\n\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t{ ...getInputProps( 'merchant_key' ) }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\tlabel={ __(\n\t\t\t\t\t\t\t\t\t'Passphrase',\n\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t{ ...getInputProps( 'pass_phrase' ) }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\t\t\tisBusy={ isOptionsRequesting }\n\t\t\t\t\t\t\t\tonClick={ handleSubmit }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ __( 'Proceed', 'woocommerce-admin' ) }\n\t\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t\t<p>{ helpText }</p>\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t);\n\t\t\t\t} }\n\t\t\t</Form>\n\t\t);\n\t}\n\n\trender() {\n\t\tconst { installStep, isOptionsRequesting } = this.props;\n\n\t\treturn (\n\t\t\t<Stepper\n\t\t\t\tisVertical\n\t\t\t\tisPending={ ! installStep.isComplete || isOptionsRequesting }\n\t\t\t\tcurrentStep={ installStep.isComplete ? 'connect' : 'install' }\n\t\t\t\tsteps={ [\n\t\t\t\t\tinstallStep,\n\t\t\t\t\t{\n\t\t\t\t\t\tkey: 'connect',\n\t\t\t\t\t\tlabel: __(\n\t\t\t\t\t\t\t'Connect your PayFast account',\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t),\n\t\t\t\t\t\tcontent: this.renderConnectStep(),\n\t\t\t\t\t},\n\t\t\t\t] }\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst { getOptionsError, isUpdateOptionsRequesting } = select(\n\t\t\t'wc-api'\n\t\t);\n\t\tconst isOptionsRequesting = Boolean(\n\t\t\tisUpdateOptionsRequesting( [\n\t\t\t\t'woocommerce_currency',\n\t\t\t\t'woocommerce_payfast_settings',\n\t\t\t] )\n\t\t);\n\t\tconst hasOptionsError = getOptionsError( [\n\t\t\t'woocommerce_currency',\n\t\t\t'woocommerce_payfast_settings',\n\t\t] );\n\n\t\treturn {\n\t\t\thasOptionsError,\n\t\t\tisOptionsRequesting,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { createNotice } = dispatch( 'core/notices' );\n\t\tconst { updateOptions } = dispatch( 'wc-api' );\n\n\t\treturn {\n\t\t\tcreateNotice,\n\t\t\tupdateOptions,\n\t\t};\n\t} )\n)( PayFast );\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport apiFetch from '@wordpress/api-fetch';\nimport { Button } from '@wordpress/components';\nimport { Component, Fragment } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport interpolateComponents from 'interpolate-components';\nimport { withDispatch } from '@wordpress/data';\n\n/**\n * WooCommerce dependencies\n */\nimport { Form, Link, Stepper, TextControl } from '@woocommerce/components';\nimport { getQuery } from '@woocommerce/navigation';\nimport { WC_ADMIN_NAMESPACE } from 'wc-api/constants';\nimport withSelect from 'wc-api/with-select';\nimport { PLUGINS_STORE_NAME } from '@woocommerce/data';\n\nclass PayPal extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.state = {\n\t\t\tautoConnectFailed: false,\n\t\t\tconnectURL: '',\n\t\t\tisPending: false,\n\t\t};\n\n\t\tthis.updateSettings = this.updateSettings.bind( this );\n\t}\n\n\tcomponentDidMount() {\n\t\tconst { createNotice, markConfigured } = this.props;\n\n\t\tconst query = getQuery();\n\t\t// Handle redirect back from PayPal\n\t\tif ( query[ 'paypal-connect' ] ) {\n\t\t\tif ( query[ 'paypal-connect' ] === '1' ) {\n\t\t\t\tcreateNotice(\n\t\t\t\t\t'success',\n\t\t\t\t\t__( 'PayPal connected successfully.', 'woocommerce-admin' )\n\t\t\t\t);\n\t\t\t\tmarkConfigured( 'paypal' );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t/* eslint-disable react/no-did-mount-set-state */\n\t\t\tthis.setState( {\n\t\t\t\tautoConnectFailed: true,\n\t\t\t} );\n\t\t\t/* eslint-enable react/no-did-mount-set-state */\n\t\t\treturn;\n\t\t}\n\n\t\tthis.fetchOAuthConnectURL();\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tconst { activePlugins } = this.props;\n\n\t\tif (\n\t\t\t! prevProps.activePlugins.includes(\n\t\t\t\t'woocommerce-gateway-paypal-express-checkout'\n\t\t\t) &&\n\t\t\tactivePlugins.includes(\n\t\t\t\t'woocommerce-gateway-paypal-express-checkout'\n\t\t\t)\n\t\t) {\n\t\t\tthis.fetchOAuthConnectURL();\n\t\t}\n\t}\n\n\tasync fetchOAuthConnectURL() {\n\t\tconst { activePlugins } = this.props;\n\n\t\tif (\n\t\t\t! activePlugins.includes(\n\t\t\t\t'woocommerce-gateway-paypal-express-checkout'\n\t\t\t)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.setState( { isPending: true } );\n\t\ttry {\n\t\t\tconst result = await apiFetch( {\n\t\t\t\tpath: WC_ADMIN_NAMESPACE + '/plugins/connect-paypal',\n\t\t\t\tmethod: 'POST',\n\t\t\t} );\n\t\t\tif ( ! result || ! result.connectUrl ) {\n\t\t\t\tthis.setState( {\n\t\t\t\t\tautoConnectFailed: true,\n\t\t\t\t} );\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.setState( {\n\t\t\t\tconnectURL: result.connectUrl,\n\t\t\t\tisPending: false,\n\t\t\t} );\n\t\t} catch ( error ) {\n\t\t\tthis.setState( {\n\t\t\t\tautoConnectFailed: true,\n\t\t\t\tisPending: false,\n\t\t\t} );\n\t\t}\n\t}\n\n\trenderConnectButton() {\n\t\tconst { connectURL } = this.state;\n\t\treturn (\n\t\t\t<Button isPrimary isDefault href={ connectURL }>\n\t\t\t\t{ __( 'Connect', 'woocommerce-admin' ) }\n\t\t\t</Button>\n\t\t);\n\t}\n\n\tasync updateSettings( values ) {\n\t\tconst {\n\t\t\tcreateNotice,\n\t\t\tisSettingsError,\n\t\t\toptions,\n\t\t\tupdateOptions,\n\t\t\tmarkConfigured,\n\t\t} = this.props;\n\n\t\tawait updateOptions( {\n\t\t\twoocommerce_ppec_paypal_settings: {\n\t\t\t\t...options.woocommerce_ppec_paypal_settings,\n\t\t\t\tapi_username: values.api_username,\n\t\t\t\tapi_password: values.api_password,\n\t\t\t\tenabled: 'yes',\n\t\t\t},\n\t\t} );\n\n\t\tif ( ! isSettingsError ) {\n\t\t\tcreateNotice(\n\t\t\t\t'success',\n\t\t\t\t__( 'PayPal connected successfully.', 'woocommerce-admin' )\n\t\t\t);\n\t\t\tmarkConfigured( 'paypal' );\n\t\t} else {\n\t\t\tcreateNotice(\n\t\t\t\t'error',\n\t\t\t\t__(\n\t\t\t\t\t'There was a problem saving your payment settings.',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t}\n\n\tgetInitialConfigValues() {\n\t\treturn {\n\t\t\tapi_username: '',\n\t\t\tapi_password: '',\n\t\t};\n\t}\n\n\tvalidate( values ) {\n\t\tconst errors = {};\n\n\t\tif ( ! values.api_username ) {\n\t\t\terrors.api_username = __(\n\t\t\t\t'Please enter your API username',\n\t\t\t\t'woocommerce-admin'\n\t\t\t);\n\t\t}\n\t\tif ( ! values.api_password ) {\n\t\t\terrors.api_password = __(\n\t\t\t\t'Please enter your API password',\n\t\t\t\t'woocommerce-admin'\n\t\t\t);\n\t\t}\n\n\t\treturn errors;\n\t}\n\n\trenderManualConfig() {\n\t\tconst { isOptionsRequesting } = this.props;\n\t\tconst link = (\n\t\t\t<Link\n\t\t\t\thref=\"https://docs.woocommerce.com/document/paypal-express-checkout/#section-8\"\n\t\t\t\ttarget=\"_blank\"\n\t\t\t\ttype=\"external\"\n\t\t\t/>\n\t\t);\n\t\tconst help = interpolateComponents( {\n\t\t\tmixedString: __(\n\t\t\t\t'Your API details can be obtained from your {{link}}PayPal account{{/link}}',\n\t\t\t\t'woocommerce-admin'\n\t\t\t),\n\t\t\tcomponents: {\n\t\t\t\tlink,\n\t\t\t},\n\t\t} );\n\n\t\treturn (\n\t\t\t<Form\n\t\t\t\tinitialValues={ this.getInitialConfigValues() }\n\t\t\t\tonSubmitCallback={ this.updateSettings }\n\t\t\t\tvalidate={ this.validate }\n\t\t\t>\n\t\t\t\t{ ( { getInputProps, handleSubmit } ) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\tlabel={ __(\n\t\t\t\t\t\t\t\t\t'API Username',\n\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t{ ...getInputProps( 'api_username' ) }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\tlabel={ __(\n\t\t\t\t\t\t\t\t\t'API Password',\n\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t{ ...getInputProps( 'api_password' ) }\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tonClick={ handleSubmit }\n\t\t\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\t\t\tdisabled={ isOptionsRequesting }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ __( 'Proceed', 'woocommerce-admin' ) }\n\t\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t\t<p>{ help }</p>\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t);\n\t\t\t\t} }\n\t\t\t</Form>\n\t\t);\n\t}\n\n\tgetConnectStep() {\n\t\tconst { autoConnectFailed, connectURL, isPending } = this.state;\n\t\tconst connectStep = {\n\t\t\tkey: 'connect',\n\t\t\tlabel: __( 'Connect your PayPal account', 'woocommerce-admin' ),\n\t\t};\n\n\t\tif ( isPending ) {\n\t\t\treturn connectStep;\n\t\t}\n\n\t\tif ( ! autoConnectFailed && connectURL ) {\n\t\t\treturn {\n\t\t\t\t...connectStep,\n\t\t\t\tdescription: __(\n\t\t\t\t\t'A Paypal account is required to process payments. You will be redirected to the Paypal website to create the connection.',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tcontent: this.renderConnectButton(),\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\t...connectStep,\n\t\t\tdescription: __(\n\t\t\t\t'Connect your store to your PayPal account. Dont have a PayPal account? Create one.',\n\t\t\t\t'woocommerce-admin'\n\t\t\t),\n\t\t\tcontent: this.renderManualConfig(),\n\t\t};\n\t}\n\n\trender() {\n\t\tconst { installStep } = this.props;\n\t\tconst { isPending } = this.state;\n\n\t\treturn (\n\t\t\t<Stepper\n\t\t\t\tisVertical\n\t\t\t\tisPending={ ! installStep.isComplete || isPending }\n\t\t\t\tcurrentStep={ installStep.isComplete ? 'connect' : 'install' }\n\t\t\t\tsteps={ [ installStep, this.getConnectStep() ] }\n\t\t\t/>\n\t\t);\n\t}\n}\n\nPayPal.defaultProps = {\n\tmanualConfig: false, // WCS is not required for the PayPal OAuth flow, so we can default to smooth connection.\n};\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst { getOptions, isGetOptionsRequesting } = select( 'wc-api' );\n\t\tconst { getActivePlugins } = select( PLUGINS_STORE_NAME );\n\t\tconst options = getOptions( [ 'woocommerce_ppec_paypal_settings' ] );\n\t\tconst isOptionsRequesting = Boolean(\n\t\t\tisGetOptionsRequesting( [ 'woocommerce_ppec_paypal_settings' ] )\n\t\t);\n\t\tconst activePlugins = getActivePlugins();\n\n\t\treturn {\n\t\t\tactivePlugins,\n\t\t\toptions,\n\t\t\tisOptionsRequesting,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { createNotice } = dispatch( 'core/notices' );\n\t\tconst { updateOptions } = dispatch( 'wc-api' );\n\t\treturn {\n\t\t\tcreateNotice,\n\t\t\tupdateOptions,\n\t\t};\n\t} )\n)( PayPal );\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component, Fragment } from '@wordpress/element';\nimport apiFetch from '@wordpress/api-fetch';\nimport { Button } from '@wordpress/components';\nimport { withDispatch } from '@wordpress/data';\nimport { compose } from '@wordpress/compose';\n\n/**\n * WooCommerce dependencies\n */\nimport { getQuery } from '@woocommerce/navigation';\nimport { WC_ADMIN_NAMESPACE } from 'wc-api/constants';\nimport withSelect from 'wc-api/with-select';\nimport { Stepper } from '@woocommerce/components';\nimport { getAdminLink } from '@woocommerce/wc-admin-settings';\n\nclass Square extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.state = {\n\t\t\tisPending: false,\n\t\t};\n\n\t\tthis.connect = this.connect.bind( this );\n\t}\n\n\tcomponentDidMount() {\n\t\tconst { createNotice, markConfigured } = this.props;\n\t\tconst query = getQuery();\n\t\t// Handle redirect back from Square\n\t\tif ( query[ 'square-connect' ] ) {\n\t\t\tif ( query[ 'square-connect' ] === '1' ) {\n\t\t\t\tcreateNotice(\n\t\t\t\t\t'success',\n\t\t\t\t\t__( 'Square connected successfully.', 'woocommerce-admin' )\n\t\t\t\t);\n\t\t\t\tmarkConfigured( 'square' );\n\t\t\t}\n\t\t}\n\t}\n\n\tasync connect() {\n\t\tconst {\n\t\t\tcreateNotice,\n\t\t\thasCbdIndustry,\n\t\t\toptions,\n\t\t\tupdateOptions,\n\t\t} = this.props;\n\t\tthis.setState( { isPending: true } );\n\n\t\tupdateOptions( {\n\t\t\twoocommerce_square_credit_card_settings: {\n\t\t\t\t...options.woocommerce_square_credit_card_settings,\n\t\t\t\tenabled: 'yes',\n\t\t\t},\n\t\t} );\n\n\t\tconst errorMessage = __(\n\t\t\t'There was an error connecting to Square. Please try again or skip to connect later in store settings.',\n\t\t\t'woocommerce-admin'\n\t\t);\n\n\t\ttry {\n\t\t\tlet newWindow = null;\n\t\t\tif ( hasCbdIndustry ) {\n\t\t\t\t// It's necessary to declare the new tab before the async call,\n\t\t\t\t// otherwise, it won't be possible to open it.\n\t\t\t\tnewWindow = window.open( '/', '_blank' );\n\t\t\t}\n\n\t\t\tconst result = await apiFetch( {\n\t\t\t\tpath: WC_ADMIN_NAMESPACE + '/plugins/connect-square',\n\t\t\t\tmethod: 'POST',\n\t\t\t} );\n\n\t\t\tif ( ! result || ! result.connectUrl ) {\n\t\t\t\tthis.setState( { isPending: false } );\n\t\t\t\tcreateNotice( 'error', errorMessage );\n\t\t\t\tif ( hasCbdIndustry ) {\n\t\t\t\t\tnewWindow.close();\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.setState( { isPending: true } );\n\t\t\tthis.redirect( result.connectUrl, newWindow );\n\t\t} catch ( error ) {\n\t\t\tthis.setState( { isPending: false } );\n\t\t\tcreateNotice( 'error', errorMessage );\n\t\t}\n\t}\n\n\tredirect( connectUrl, newWindow ) {\n\t\tif ( newWindow ) {\n\t\t\tnewWindow.location.href = connectUrl;\n\t\t\twindow.location = getAdminLink( 'admin.php?page=wc-admin' );\n\t\t} else {\n\t\t\twindow.location = connectUrl;\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { installStep } = this.props;\n\t\tconst { isPending } = this.state;\n\n\t\treturn (\n\t\t\t<Stepper\n\t\t\t\tisVertical\n\t\t\t\tisPending={ ! installStep.isComplete || isPending }\n\t\t\t\tcurrentStep={ installStep.isComplete ? 'connect' : 'install' }\n\t\t\t\tsteps={ [\n\t\t\t\t\tinstallStep,\n\t\t\t\t\t{\n\t\t\t\t\t\tkey: 'connect',\n\t\t\t\t\t\tlabel: __(\n\t\t\t\t\t\t\t'Connect your Square account',\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t),\n\t\t\t\t\t\tdescription: __(\n\t\t\t\t\t\t\t'A Square account is required to process payments. You will be redirected to the Square website to create the connection.',\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t),\n\t\t\t\t\t\tcontent: (\n\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\t\t\t\tisDefault\n\t\t\t\t\t\t\t\t\tisBusy={ isPending }\n\t\t\t\t\t\t\t\t\tonClick={ this.connect }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ __( 'Connect', 'woocommerce-admin' ) }\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t] }\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst { getOptions, isGetOptionsRequesting } = select( 'wc-api' );\n\t\tconst options = getOptions( [\n\t\t\t'woocommerce_square_credit_card_settings',\n\t\t] );\n\t\tconst optionsIsRequesting = Boolean(\n\t\t\tisGetOptionsRequesting( [\n\t\t\t\t'woocommerce_square_credit_card_settings',\n\t\t\t] )\n\t\t);\n\n\t\treturn {\n\t\t\toptions,\n\t\t\toptionsIsRequesting,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { createNotice } = dispatch( 'core/notices' );\n\t\tconst { updateOptions } = dispatch( 'wc-api' );\n\t\treturn {\n\t\t\tcreateNotice,\n\t\t\tupdateOptions,\n\t\t};\n\t} )\n)( Square );\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component, Fragment } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport apiFetch from '@wordpress/api-fetch';\nimport { withDispatch } from '@wordpress/data';\nimport interpolateComponents from 'interpolate-components';\nimport { Button } from '@wordpress/components';\nimport { get } from 'lodash';\n\n/**\n * WooCommerce dependencies\n */\nimport { Form, Link, Stepper, TextControl } from '@woocommerce/components';\nimport { getAdminLink } from '@woocommerce/wc-admin-settings';\nimport { getQuery } from '@woocommerce/navigation';\nimport { WCS_NAMESPACE } from 'wc-api/constants';\nimport withSelect from 'wc-api/with-select';\nimport { PLUGINS_STORE_NAME } from '@woocommerce/data';\n\nclass Stripe extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.state = {\n\t\t\toAuthConnectFailed: false,\n\t\t\tconnectURL: null,\n\t\t\tisPending: false,\n\t\t};\n\n\t\tthis.updateSettings = this.updateSettings.bind( this );\n\t}\n\n\tcomponentDidMount() {\n\t\tconst { stripeSettings } = this.props;\n\t\tconst query = getQuery();\n\n\t\t// Handle redirect back from Stripe.\n\t\tif ( query[ 'stripe-connect' ] && query[ 'stripe-connect' ] === '1' ) {\n\t\t\tconst isStripeConnected =\n\t\t\t\tstripeSettings.publishable_key && stripeSettings.secret_key;\n\n\t\t\tif ( isStripeConnected ) {\n\t\t\t\tthis.completeMethod();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif ( ! this.requiresManualConfig() ) {\n\t\t\tthis.fetchOAuthConnectURL();\n\t\t}\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tconst {\n\t\t\tactivePlugins,\n\t\t\tcreateNotice,\n\t\t\tisOptionsRequesting,\n\t\t\thasOptionsError,\n\t\t} = this.props;\n\n\t\tif ( prevProps.isOptionsRequesting && ! isOptionsRequesting ) {\n\t\t\tif ( ! hasOptionsError ) {\n\t\t\t\tthis.completeMethod();\n\t\t\t} else {\n\t\t\t\tcreateNotice(\n\t\t\t\t\t'error',\n\t\t\t\t\t__(\n\t\t\t\t\t\t'There was a problem saving your payment setings',\n\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tif (\n\t\t\t! prevProps.activePlugins.includes(\n\t\t\t\t'woocommerce-gateway-stripe'\n\t\t\t) &&\n\t\t\tactivePlugins.includes( 'woocommerce-gateway-stripe' )\n\t\t) {\n\t\t\tthis.fetchOAuthConnectURL();\n\t\t}\n\t}\n\n\trequiresManualConfig() {\n\t\tconst { activePlugins, isJetpackConnected } = this.props;\n\t\tconst { oAuthConnectFailed } = this.state;\n\n\t\treturn (\n\t\t\t! isJetpackConnected ||\n\t\t\t! activePlugins.includes( 'woocommerce-services' ) ||\n\t\t\toAuthConnectFailed\n\t\t);\n\t}\n\n\tcompleteMethod() {\n\t\tconst { createNotice, markConfigured } = this.props;\n\n\t\tthis.setState( { isPending: false } );\n\n\t\tcreateNotice(\n\t\t\t'success',\n\t\t\t__( 'Stripe connected successfully.', 'woocommerce-admin' )\n\t\t);\n\n\t\tmarkConfigured( 'stripe' );\n\t}\n\n\tasync fetchOAuthConnectURL() {\n\t\tconst { activePlugins } = this.props;\n\t\tif ( ! activePlugins.includes( 'woocommerce-gateway-stripe' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tthis.setState( { isPending: true } );\n\t\t\tconst result = await apiFetch( {\n\t\t\t\tpath: WCS_NAMESPACE + '/connect/stripe/oauth/init',\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata: {\n\t\t\t\t\treturnUrl: getAdminLink(\n\t\t\t\t\t\t'admin.php?page=wc-admin&task=payments&method=stripe&stripe-connect=1'\n\t\t\t\t\t),\n\t\t\t\t},\n\t\t\t} );\n\t\t\tif ( ! result || ! result.oauthUrl ) {\n\t\t\t\tthis.setState( {\n\t\t\t\t\toAuthConnectFailed: true,\n\t\t\t\t\tisPending: false,\n\t\t\t\t} );\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.setState( {\n\t\t\t\tconnectURL: result.oauthUrl,\n\t\t\t\tisPending: false,\n\t\t\t} );\n\t\t} catch ( error ) {\n\t\t\tthis.setState( {\n\t\t\t\toAuthConnectFailed: true,\n\t\t\t\tisPending: false,\n\t\t\t} );\n\t\t}\n\t}\n\n\trenderConnectButton() {\n\t\tconst { connectURL } = this.state;\n\t\treturn (\n\t\t\t<Button isPrimary isDefault href={ connectURL }>\n\t\t\t\t{ __( 'Connect', 'woocommerce-admin' ) }\n\t\t\t</Button>\n\t\t);\n\t}\n\n\tupdateSettings( values ) {\n\t\tconst { updateOptions, stripeSettings } = this.props;\n\n\t\tupdateOptions( {\n\t\t\twoocommerce_stripe_settings: {\n\t\t\t\t...stripeSettings,\n\t\t\t\tpublishable_key: values.publishable_key,\n\t\t\t\tsecret_key: values.secret_key,\n\t\t\t\tenabled: 'yes',\n\t\t\t},\n\t\t} );\n\t}\n\n\tgetInitialConfigValues() {\n\t\treturn {\n\t\t\tpublishable_key: '',\n\t\t\tsecret_key: '',\n\t\t};\n\t}\n\n\tvalidateManualConfig( values ) {\n\t\tconst errors = {};\n\n\t\tif ( values.publishable_key.match( /^pk_live_/ ) === null ) {\n\t\t\terrors.publishable_key = __(\n\t\t\t\t'Please enter a valid publishable key. Valid keys start with \"pk_live\".',\n\t\t\t\t'woocommerce-admin'\n\t\t\t);\n\t\t}\n\t\tif ( values.secret_key.match( /^[rs]k_live_/ ) === null ) {\n\t\t\terrors.secret_key = __(\n\t\t\t\t'Please enter a valid secret key. Valid keys start with \"sk_live\" or \"rk_live\".',\n\t\t\t\t'woocommerce-admin'\n\t\t\t);\n\t\t}\n\n\t\treturn errors;\n\t}\n\n\trenderManualConfig() {\n\t\tconst { isOptionsRequesting } = this.props;\n\t\tconst stripeHelp = interpolateComponents( {\n\t\t\tmixedString: __(\n\t\t\t\t'Your API details can be obtained from your {{docsLink}}Stripe account{{/docsLink}}.  Dont have a Stripe account? {{registerLink}}Create one.{{/registerLink}}',\n\t\t\t\t'woocommerce-admin'\n\t\t\t),\n\t\t\tcomponents: {\n\t\t\t\tdocsLink: (\n\t\t\t\t\t<Link\n\t\t\t\t\t\thref=\"https://stripe.com/docs/keys\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\ttype=\"external\"\n\t\t\t\t\t/>\n\t\t\t\t),\n\t\t\t\tregisterLink: (\n\t\t\t\t\t<Link\n\t\t\t\t\t\thref=\"https://dashboard.stripe.com/register\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\ttype=\"external\"\n\t\t\t\t\t/>\n\t\t\t\t),\n\t\t\t},\n\t\t} );\n\n\t\treturn (\n\t\t\t<Form\n\t\t\t\tinitialValues={ this.getInitialConfigValues() }\n\t\t\t\tonSubmitCallback={ this.updateSettings }\n\t\t\t\tvalidate={ this.validateManualConfig }\n\t\t\t>\n\t\t\t\t{ ( { getInputProps, handleSubmit } ) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\tlabel={ __(\n\t\t\t\t\t\t\t\t\t'Live Publishable Key',\n\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t{ ...getInputProps( 'publishable_key' ) }\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\tlabel={ __(\n\t\t\t\t\t\t\t\t\t'Live Secret Key',\n\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t{ ...getInputProps( 'secret_key' ) }\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\t\t\tisBusy={ isOptionsRequesting }\n\t\t\t\t\t\t\t\tonClick={ handleSubmit }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ __( 'Proceed', 'woocommerce-admin' ) }\n\t\t\t\t\t\t\t</Button>\n\n\t\t\t\t\t\t\t<p>{ stripeHelp }</p>\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t);\n\t\t\t\t} }\n\t\t\t</Form>\n\t\t);\n\t}\n\n\tgetConnectStep() {\n\t\tconst { connectURL, isPending, oAuthConnectFailed } = this.state;\n\n\t\tconst connectStep = {\n\t\t\tkey: 'connect',\n\t\t\tlabel: __( 'Connect your Stripe account', 'woocommerce-admin' ),\n\t\t};\n\n\t\tif ( isPending ) {\n\t\t\treturn connectStep;\n\t\t}\n\n\t\tif ( ! oAuthConnectFailed && connectURL ) {\n\t\t\treturn {\n\t\t\t\t...connectStep,\n\t\t\t\tdescription: __(\n\t\t\t\t\t'A Stripe account is required to process payments.',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tcontent: this.renderConnectButton(),\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\t...connectStep,\n\t\t\tdescription: __(\n\t\t\t\t'Connect your store to your Stripe account. Dont have a Stripe account? Create one.',\n\t\t\t\t'woocommerce-admin'\n\t\t\t),\n\t\t\tcontent: this.renderManualConfig(),\n\t\t};\n\t}\n\n\trender() {\n\t\tconst { installStep, isOptionsRequesting } = this.props;\n\t\tconst { isPending } = this.state;\n\n\t\treturn (\n\t\t\t<Stepper\n\t\t\t\tisVertical\n\t\t\t\tisPending={\n\t\t\t\t\t! installStep.isComplete || isOptionsRequesting || isPending\n\t\t\t\t}\n\t\t\t\tcurrentStep={ installStep.isComplete ? 'connect' : 'install' }\n\t\t\t\tsteps={ [ installStep, this.getConnectStep() ] }\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetOptions,\n\t\t\tgetOptionsError,\n\t\t\tisUpdateOptionsRequesting,\n\t\t} = select( 'wc-api' );\n\t\tconst { getActivePlugins, isJetpackConnected } = select(\n\t\t\tPLUGINS_STORE_NAME\n\t\t);\n\t\tconst options = getOptions( [ 'woocommerce_stripe_settings' ] );\n\t\tconst stripeSettings = get(\n\t\t\toptions,\n\t\t\t[ 'woocommerce_stripe_settings' ],\n\t\t\t[]\n\t\t);\n\t\tconst isOptionsRequesting = Boolean(\n\t\t\tisUpdateOptionsRequesting( [ 'woocommerce_stripe_settings' ] )\n\t\t);\n\t\tconst hasOptionsError = getOptionsError( [\n\t\t\t'woocommerce_stripe_settings',\n\t\t] );\n\n\t\treturn {\n\t\t\tactivePlugins: getActivePlugins(),\n\t\t\thasOptionsError,\n\t\t\tisJetpackConnected: isJetpackConnected(),\n\t\t\tisOptionsRequesting,\n\t\t\tstripeSettings,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { createNotice } = dispatch( 'core/notices' );\n\t\tconst { updateOptions } = dispatch( 'wc-api' );\n\t\treturn {\n\t\t\tcreateNotice,\n\t\t\tupdateOptions,\n\t\t};\n\t} )\n)( Stripe );\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component, Fragment } from '@wordpress/element';\nimport apiFetch from '@wordpress/api-fetch';\nimport { Button } from '@wordpress/components';\nimport { withDispatch } from '@wordpress/data';\nimport { compose } from '@wordpress/compose';\n\n/**\n * WooCommerce dependencies\n */\nimport { getQuery } from '@woocommerce/navigation';\nimport { WC_ADMIN_NAMESPACE } from 'wc-api/constants';\nimport withSelect from 'wc-api/with-select';\nimport { Stepper } from '@woocommerce/components';\n\nclass WCPay extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.state = {\n\t\t\tisPending: false,\n\t\t};\n\n\t\tthis.connect = this.connect.bind( this );\n\t}\n\n\tcomponentDidMount() {\n\t\tconst { createNotice, markConfigured } = this.props;\n\t\tconst query = getQuery();\n\t\t// Handle redirect back from WCPay on-boarding\n\t\tif ( query[ 'wcpay-connect' ] ) {\n\t\t\tif ( query[ 'wcpay-connect' ] === '1' ) {\n\t\t\t\tcreateNotice(\n\t\t\t\t\t'success',\n\t\t\t\t\t__(\n\t\t\t\t\t\t'WooCommerce Payments connected successfully.',\n\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t\tmarkConfigured( 'wcpay' );\n\t\t\t}\n\t\t}\n\t}\n\n\tasync connect() {\n\t\tconst { createNotice, options, updateOptions } = this.props;\n\t\tthis.setState( { isPending: true } );\n\n\t\tupdateOptions( {\n\t\t\twoocommerce_woocommerce_payments_settings: {\n\t\t\t\t...options.woocommerce_woocommerce_payments_settings,\n\t\t\t\tenabled: 'yes',\n\t\t\t},\n\t\t} );\n\n\t\tconst errorMessage = __(\n\t\t\t'There was an error connecting to WooCommerce Payments. Please try again or skip to connect later in store settings.',\n\t\t\t'woocommerce-admin'\n\t\t);\n\n\t\ttry {\n\t\t\t// Fetch the business verification (connect) URL (Stripe KYC) from the backend\n\t\t\tconst result = await apiFetch( {\n\t\t\t\tpath: WC_ADMIN_NAMESPACE + '/plugins/connect-wcpay',\n\t\t\t\tmethod: 'POST',\n\t\t\t} );\n\n\t\t\tif ( ! result || ! result.connectUrl ) {\n\t\t\t\tthis.setState( { isPending: false } );\n\t\t\t\tcreateNotice( 'error', errorMessage );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.setState( { isPending: true } );\n\t\t\twindow.location = result.connectUrl;\n\t\t} catch ( error ) {\n\t\t\tthis.setState( { isPending: false } );\n\t\t\tcreateNotice( 'error', errorMessage );\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { installStep } = this.props;\n\t\tconst { isPending } = this.state;\n\n\t\treturn (\n\t\t\t<Stepper\n\t\t\t\tisVertical\n\t\t\t\tisPending={ ! installStep.isComplete || isPending }\n\t\t\t\tcurrentStep={ installStep.isComplete ? 'connect' : 'install' }\n\t\t\t\tsteps={ [\n\t\t\t\t\tinstallStep,\n\t\t\t\t\t{\n\t\t\t\t\t\tkey: 'connect',\n\t\t\t\t\t\tlabel: __(\n\t\t\t\t\t\t\t'Verify business details',\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t),\n\t\t\t\t\t\tdescription: __(\n\t\t\t\t\t\t\t'Verify your business details with our payment partner, Stripe.',\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t),\n\t\t\t\t\t\tcontent: (\n\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\t\t\t\tisDefault\n\t\t\t\t\t\t\t\t\tisBusy={ isPending }\n\t\t\t\t\t\t\t\t\tonClick={ this.connect }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t\t\t'Verify details',\n\t\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t] }\n\t\t\t/>\n\t\t);\n\t}\n}\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst { getOptions, isGetOptionsRequesting } = select( 'wc-api' );\n\t\tconst options = getOptions( [\n\t\t\t'woocommerce_woocommerce_payments_settings',\n\t\t] );\n\t\tconst optionsIsRequesting = Boolean(\n\t\t\tisGetOptionsRequesting( [\n\t\t\t\t'woocommerce_woocommerce_payments_settings',\n\t\t\t] )\n\t\t);\n\n\t\treturn {\n\t\t\toptions,\n\t\t\toptionsIsRequesting,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { createNotice } = dispatch( 'core/notices' );\n\t\tconst { updateOptions } = dispatch( 'wc-api' );\n\t\treturn {\n\t\t\tcreateNotice,\n\t\t\tupdateOptions,\n\t\t};\n\t} )\n)( WCPay );\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Component, Fragment } from '@wordpress/element';\n\n/**\n * WooCommerce dependencies\n */\nimport { Card, List } from '@woocommerce/components';\nimport { getAdminLink } from '@woocommerce/wc-admin-settings';\n\n/**\n * Internal dependencies\n */\nimport { recordEvent } from 'lib/tracks';\n\nconst subTasks = [\n\t{\n\t\ttitle: __( 'Add manually (recommended)', 'woocommerce-admin' ),\n\t\tcontent: __(\n\t\t\t'For small stores we recommend adding products manually',\n\t\t\t'woocommerce-admin'\n\t\t),\n\t\tbefore: <i className=\"material-icons-outlined\">add_box</i>,\n\t\tafter: <i className=\"material-icons-outlined\">chevron_right</i>,\n\t\tonClick: () =>\n\t\t\trecordEvent( 'tasklist_add_product', { method: 'manually' } ),\n\t\thref: getAdminLink(\n\t\t\t'post-new.php?post_type=product&wc_onboarding_active_task=products&tutorial=true'\n\t\t),\n\t},\n\t{\n\t\ttitle: __( 'Import', 'woocommerce-admin' ),\n\t\tcontent: __(\n\t\t\t'For larger stores we recommend importing all products at once via CSV file',\n\t\t\t'woocommerce-admin'\n\t\t),\n\t\tbefore: <i className=\"material-icons-outlined\">import_export</i>,\n\t\tafter: <i className=\"material-icons-outlined\">chevron_right</i>,\n\t\tonClick: () =>\n\t\t\trecordEvent( 'tasklist_add_product', { method: 'import' } ),\n\t\thref: getAdminLink(\n\t\t\t'edit.php?post_type=product&page=product_importer&wc_onboarding_active_task=product-import'\n\t\t),\n\t},\n\t{\n\t\ttitle: __( 'Migrate', 'woocommerce-admin' ),\n\t\tcontent: __(\n\t\t\t'For stores currently selling elsewhere we suggest using a product migration service',\n\t\t\t'woocommerce-admin'\n\t\t),\n\t\tbefore: <i className=\"material-icons-outlined\">cloud_download</i>,\n\t\tafter: <i className=\"material-icons-outlined\">chevron_right</i>,\n\t\tonClick: () =>\n\t\t\trecordEvent( 'tasklist_add_product', { method: 'migrate' } ),\n\t\t// @todo This should be replaced with the in-app purchase iframe when ready.\n\t\thref: 'https://woocommerce.com/products/cart2cart/',\n\t\ttarget: '_blank',\n\t},\n];\n\nexport default class Products extends Component {\n\trender() {\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<Card className=\"woocommerce-task-card\">\n\t\t\t\t\t<List items={ subTasks } />\n\t\t\t\t</Card>\n\t\t\t</Fragment>\n\t\t);\n\t}\n}\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport apiFetch from '@wordpress/api-fetch';\nimport { Component } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport { difference, filter } from 'lodash';\nimport interpolateComponents from 'interpolate-components';\nimport { withDispatch, withSelect } from '@wordpress/data';\n\n/**\n * WooCommerce dependencies\n */\nimport { Card, Link, Stepper, Plugins } from '@woocommerce/components';\nimport { getAdminLink, getSetting } from '@woocommerce/wc-admin-settings';\nimport { getHistory, getNewPath } from '@woocommerce/navigation';\nimport { SETTINGS_STORE_NAME, PLUGINS_STORE_NAME } from '@woocommerce/data';\n\n/**\n * Internal dependencies\n */\nimport Connect from 'dashboard/components/connect';\nimport { getCountryCode } from 'dashboard/utils';\nimport StoreLocation from '../steps/location';\nimport ShippingRates from './rates';\nimport { recordEvent } from 'lib/tracks';\n\nclass Shipping extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.initialState = {\n\t\t\tisPending: false,\n\t\t\tstep: 'store_location',\n\t\t\tshippingZones: [],\n\t\t};\n\n\t\t// Cache active plugins to prevent removal mid-step.\n\t\tthis.activePlugins = props.activePlugins;\n\t\tthis.state = this.initialState;\n\t\tthis.completeStep = this.completeStep.bind( this );\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.reset();\n\t}\n\n\treset() {\n\t\tthis.setState( this.initialState );\n\t}\n\n\tasync fetchShippingZones() {\n\t\tthis.setState( { isPending: true } );\n\t\tconst { countryCode, countryName } = this.props;\n\n\t\t// @todo The following fetches for shipping information should be moved into\n\t\t// the wc-api to make these methods and states more readily available.\n\t\tconst shippingZones = [];\n\t\tconst zones = await apiFetch( { path: '/wc/v3/shipping/zones' } );\n\t\tlet hasCountryZone = false;\n\n\t\tawait Promise.all(\n\t\t\tzones.map( async ( zone ) => {\n\t\t\t\t// \"Rest of the world zone\"\n\t\t\t\tif ( zone.id === 0 ) {\n\t\t\t\t\tzone.methods = await apiFetch( {\n\t\t\t\t\t\tpath: `/wc/v3/shipping/zones/${ zone.id }/methods`,\n\t\t\t\t\t} );\n\t\t\t\t\tzone.name = __( 'Rest of the world', 'woocommerce-admin' );\n\t\t\t\t\tzone.toggleable = true;\n\t\t\t\t\tshippingZones.push( zone );\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Return any zone with a single location matching the country zone.\n\t\t\t\tzone.locations = await apiFetch( {\n\t\t\t\t\tpath: `/wc/v3/shipping/zones/${ zone.id }/locations`,\n\t\t\t\t} );\n\t\t\t\tconst countryLocation = zone.locations.find(\n\t\t\t\t\t( location ) => countryCode === location.code\n\t\t\t\t);\n\t\t\t\tif ( countryLocation ) {\n\t\t\t\t\tzone.methods = await apiFetch( {\n\t\t\t\t\t\tpath: `/wc/v3/shipping/zones/${ zone.id }/methods`,\n\t\t\t\t\t} );\n\t\t\t\t\tshippingZones.push( zone );\n\t\t\t\t\thasCountryZone = true;\n\t\t\t\t}\n\t\t\t} )\n\t\t);\n\n\t\t// Create the default store country zone if it doesn't exist.\n\t\tif ( ! hasCountryZone ) {\n\t\t\tconst zone = await apiFetch( {\n\t\t\t\tmethod: 'POST',\n\t\t\t\tpath: '/wc/v3/shipping/zones',\n\t\t\t\tdata: { name: countryName },\n\t\t\t} );\n\t\t\tzone.locations = await apiFetch( {\n\t\t\t\tmethod: 'POST',\n\t\t\t\tpath: `/wc/v3/shipping/zones/${ zone.id }/locations`,\n\t\t\t\tdata: [ { code: countryCode, type: 'country' } ],\n\t\t\t} );\n\t\t\tshippingZones.push( zone );\n\t\t}\n\n\t\tshippingZones.reverse();\n\n\t\tthis.setState( { isPending: false, shippingZones } );\n\t}\n\n\tcomponentDidUpdate( prevProps, prevState ) {\n\t\tconst { countryCode } = this.props;\n\t\tconst { step } = this.state;\n\n\t\tif (\n\t\t\tstep === 'rates' &&\n\t\t\t( prevProps.countryCode !== countryCode ||\n\t\t\t\tprevState.step !== 'rates' )\n\t\t) {\n\t\t\tthis.fetchShippingZones();\n\t\t}\n\t}\n\n\tcompleteStep() {\n\t\tconst { createNotice } = this.props;\n\t\tconst { step } = this.state;\n\t\tconst steps = this.getSteps();\n\t\tconst currentStepIndex = steps.findIndex( ( s ) => s.key === step );\n\t\tconst nextStep = steps[ currentStepIndex + 1 ];\n\n\t\tif ( nextStep ) {\n\t\t\tthis.setState( { step: nextStep.key } );\n\t\t} else {\n\t\t\tcreateNotice(\n\t\t\t\t'success',\n\t\t\t\t__(\n\t\t\t\t\t\" Shipping is done! Don't worry, you can always change it later.\",\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t)\n\t\t\t);\n\t\t\tgetHistory().push( getNewPath( {}, '/', {} ) );\n\t\t}\n\t}\n\n\tgetPluginsToActivate() {\n\t\tconst { countryCode, isJetpackConnected } = this.props;\n\n\t\tconst plugins = [];\n\t\tif ( [ 'GB', 'CA', 'AU' ].includes( countryCode ) ) {\n\t\t\tplugins.push( 'woocommerce-shipstation-integration' );\n\t\t} else if ( countryCode === 'US' ) {\n\t\t\tplugins.push( 'woocommerce-services' );\n\n\t\t\tif ( ! isJetpackConnected ) {\n\t\t\t\tplugins.push( 'jetpack' );\n\t\t\t}\n\t\t}\n\t\treturn difference( plugins, this.activePlugins );\n\t}\n\n\tgetSteps() {\n\t\tconst pluginsToActivate = this.getPluginsToActivate();\n\n\t\tconst steps = [\n\t\t\t{\n\t\t\t\tkey: 'store_location',\n\t\t\t\tlabel: __( 'Set store location', 'woocommerce-admin' ),\n\t\t\t\tdescription: __(\n\t\t\t\t\t'The address from which your business operates',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tcontent: (\n\t\t\t\t\t<StoreLocation\n\t\t\t\t\t\t{ ...this.props }\n\t\t\t\t\t\tonComplete={ ( values ) => {\n\t\t\t\t\t\t\tconst country = getCountryCode(\n\t\t\t\t\t\t\t\tvalues.countryState\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\trecordEvent( 'tasklist_shipping_set_location', {\n\t\t\t\t\t\t\t\tcountry,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\tthis.completeStep();\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t),\n\t\t\t\tvisible: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'rates',\n\t\t\t\tlabel: __( 'Set shipping costs', 'woocommerce-admin' ),\n\t\t\t\tdescription: __(\n\t\t\t\t\t'Define how much customers pay to ship to different destinations',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tcontent: (\n\t\t\t\t\t<ShippingRates\n\t\t\t\t\t\tbuttonText={\n\t\t\t\t\t\t\tpluginsToActivate.length\n\t\t\t\t\t\t\t\t? __( 'Proceed', 'woocommerce-admin' )\n\t\t\t\t\t\t\t\t: __( 'Complete task', 'woocommerce-admin' )\n\t\t\t\t\t\t}\n\t\t\t\t\t\tshippingZones={ this.state.shippingZones }\n\t\t\t\t\t\tonComplete={ this.completeStep }\n\t\t\t\t\t\t{ ...this.props }\n\t\t\t\t\t/>\n\t\t\t\t),\n\t\t\t\tvisible: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'label_printing',\n\t\t\t\tlabel: __(\n\t\t\t\t\t'Enable shipping label printing',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tdescription: pluginsToActivate.includes(\n\t\t\t\t\t'woocommerce-shipstation-integration'\n\t\t\t\t)\n\t\t\t\t\t? interpolateComponents( {\n\t\t\t\t\t\t\tmixedString: __(\n\t\t\t\t\t\t\t\t'We recommend using ShipStation to save time at the post office by printing your shipping ' +\n\t\t\t\t\t\t\t\t\t'labels at home. Try ShipStation free for 30 days. {{link}}Learn more{{/link}}.',\n\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tcomponents: {\n\t\t\t\t\t\t\t\tlink: (\n\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\thref=\"https://woocommerce.com/products/shipstation-integration\"\n\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\t\ttype=\"external\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t  } )\n\t\t\t\t\t: __(\n\t\t\t\t\t\t\t'With WooCommerce Services and Jetpack you can save time at the ' +\n\t\t\t\t\t\t\t\t'Post Office by printing your shipping labels at home',\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t  ),\n\t\t\t\tcontent: (\n\t\t\t\t\t<Plugins\n\t\t\t\t\t\tonComplete={ () => {\n\t\t\t\t\t\t\trecordEvent( 'tasklist_shipping_label_printing', {\n\t\t\t\t\t\t\t\tinstall: true,\n\t\t\t\t\t\t\t\tpluginsToActivate,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\tthis.completeStep();\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tonSkip={ () => {\n\t\t\t\t\t\t\trecordEvent( 'tasklist_shipping_label_printing', {\n\t\t\t\t\t\t\t\tinstall: false,\n\t\t\t\t\t\t\t\tpluginsToActivate,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\tgetHistory().push( getNewPath( {}, '/', {} ) );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tpluginSlugs={ pluginsToActivate }\n\t\t\t\t\t\t{ ...this.props }\n\t\t\t\t\t/>\n\t\t\t\t),\n\t\t\t\tvisible: pluginsToActivate.length,\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'connect',\n\t\t\t\tlabel: __( 'Connect your store', 'woocommerce-admin' ),\n\t\t\t\tdescription: __(\n\t\t\t\t\t'Connect your store to WordPress.com to enable label printing',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tcontent: (\n\t\t\t\t\t<Connect\n\t\t\t\t\t\tredirectUrl={ getAdminLink(\n\t\t\t\t\t\t\t'admin.php?page=wc-admin'\n\t\t\t\t\t\t) }\n\t\t\t\t\t\tcompleteStep={ this.completeStep }\n\t\t\t\t\t\t{ ...this.props }\n\t\t\t\t\t\tonConnect={ () => {\n\t\t\t\t\t\t\trecordEvent( 'tasklist_shipping_connect_store' );\n\t\t\t\t\t\t} }\n\t\t\t\t\t/>\n\t\t\t\t),\n\t\t\t\tvisible: pluginsToActivate.includes( 'jetpack' ),\n\t\t\t},\n\t\t];\n\n\t\treturn filter( steps, ( step ) => step.visible );\n\t}\n\n\trender() {\n\t\tconst { isPending, step } = this.state;\n\t\tconst { isSettingsRequesting } = this.props;\n\n\t\treturn (\n\t\t\t<div className=\"woocommerce-task-shipping\">\n\t\t\t\t<Card className=\"is-narrow\">\n\t\t\t\t\t<Stepper\n\t\t\t\t\t\tisPending={ isPending || isSettingsRequesting }\n\t\t\t\t\t\tisVertical\n\t\t\t\t\t\tcurrentStep={ step }\n\t\t\t\t\t\tsteps={ this.getSteps() }\n\t\t\t\t\t/>\n\t\t\t\t</Card>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default compose(\n\twithSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetSettings,\n\t\t\tgetSettingsError,\n\t\t\tisGetSettingsRequesting,\n\t\t} = select( SETTINGS_STORE_NAME );\n\t\tconst { getActivePlugins, isJetpackConnected } = select(\n\t\t\tPLUGINS_STORE_NAME\n\t\t);\n\n\t\tconst { general: settings = {} } = getSettings( 'general' );\n\t\tconst isSettingsError = Boolean( getSettingsError( 'general' ) );\n\t\tconst isSettingsRequesting = isGetSettingsRequesting( 'general' );\n\n\t\tconst countryCode = getCountryCode(\n\t\t\tsettings.woocommerce_default_country\n\t\t);\n\n\t\tconst { countries = [] } = getSetting( 'dataEndpoints', {} );\n\t\tconst country = countryCode\n\t\t\t? countries.find( ( c ) => c.code === countryCode )\n\t\t\t: null;\n\t\tconst countryName = country ? country.name : null;\n\t\tconst activePlugins = getActivePlugins();\n\n\t\treturn {\n\t\t\tcountryCode,\n\t\t\tcountryName,\n\t\t\tisSettingsError,\n\t\t\tisSettingsRequesting,\n\t\t\tsettings,\n\t\t\tactivePlugins,\n\t\t\tisJetpackConnected: isJetpackConnected(),\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { createNotice } = dispatch( 'core/notices' );\n\t\tconst { updateAndPersistSettingsForGroup } = dispatch(\n\t\t\tSETTINGS_STORE_NAME\n\t\t);\n\n\t\treturn {\n\t\t\tcreateNotice,\n\t\t\tupdateAndPersistSettingsForGroup,\n\t\t};\n\t} )\n)( Shipping );\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport apiFetch from '@wordpress/api-fetch';\nimport { Component, Fragment } from '@wordpress/element';\nimport { Button, FormToggle } from '@wordpress/components';\nimport PropTypes from 'prop-types';\n\n/**\n * WooCommerce dependencies\n */\nimport { Flag, Form, TextControlWithAffixes } from '@woocommerce/components';\nimport { getSetting, setSetting } from '@woocommerce/wc-admin-settings';\n\n/**\n * Internal dependencies\n */\nimport { recordEvent } from 'lib/tracks';\nimport { CurrencyContext } from 'lib/currency-context';\n\nclass ShippingRates extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\n\t\tthis.updateShippingZones = this.updateShippingZones.bind( this );\n\t}\n\n\tgetShippingMethods( zone, type = null ) {\n\t\t// Sometimes the wc/v3/shipping/zones response does not include a methods attribute, return early if so.\n\t\tif ( ! zone || ! zone.methods || ! Array.isArray( zone.methods ) ) {\n\t\t\treturn [];\n\t\t}\n\n\t\tif ( ! type ) {\n\t\t\treturn zone.methods;\n\t\t}\n\n\t\treturn zone.methods\n\t\t\t? zone.methods.filter( ( method ) => method.method_id === type )\n\t\t\t: [];\n\t}\n\n\tdisableShippingMethods( zone, methods ) {\n\t\tif ( ! methods.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tmethods.forEach( ( method ) => {\n\t\t\tapiFetch( {\n\t\t\t\tmethod: 'POST',\n\t\t\t\tpath: `/wc/v3/shipping/zones/${ zone.id }/methods/${ method.instance_id }`,\n\t\t\t\tdata: {\n\t\t\t\t\tenabled: false,\n\t\t\t\t},\n\t\t\t} );\n\t\t} );\n\t}\n\n\tasync updateShippingZones( values ) {\n\t\tconst { createNotice, shippingZones } = this.props;\n\n\t\tlet restOfTheWorld = false;\n\t\tlet shippingCost = false;\n\t\tshippingZones.forEach( ( zone ) => {\n\t\t\tif ( zone.id === 0 ) {\n\t\t\t\trestOfTheWorld =\n\t\t\t\t\tzone.toggleable && values[ `${ zone.id }_enabled` ];\n\t\t\t} else {\n\t\t\t\tshippingCost =\n\t\t\t\t\tvalues[ `${ zone.id }_rate` ] !== '' &&\n\t\t\t\t\tparseFloat( values[ `${ zone.id }_rate` ] ) !==\n\t\t\t\t\t\tparseFloat( 0 );\n\t\t\t}\n\n\t\t\tconst shippingMethods = this.getShippingMethods( zone );\n\t\t\tconst methodType =\n\t\t\t\tparseFloat( values[ `${ zone.id }_rate` ] ) === parseFloat( 0 )\n\t\t\t\t\t? 'free_shipping'\n\t\t\t\t\t: 'flat_rate';\n\t\t\tconst shippingMethod = this.getShippingMethods( zone, methodType )\n\t\t\t\t.length\n\t\t\t\t? this.getShippingMethods( zone, methodType )[ 0 ]\n\t\t\t\t: null;\n\n\t\t\tif ( zone.toggleable && ! values[ `${ zone.id }_enabled` ] ) {\n\t\t\t\t// Disable any shipping methods that exist if toggled off.\n\t\t\t\tthis.disableShippingMethods( zone, shippingMethods );\n\t\t\t\treturn;\n\t\t\t} else if ( shippingMethod ) {\n\t\t\t\t// Disable all methods except the one being updated.\n\t\t\t\tconst methodsToDisable = shippingMethods.filter(\n\t\t\t\t\t( method ) =>\n\t\t\t\t\t\tmethod.instance_id !== shippingMethod.instance_id\n\t\t\t\t);\n\t\t\t\tthis.disableShippingMethods( zone, methodsToDisable );\n\t\t\t}\n\n\t\t\tapiFetch( {\n\t\t\t\tmethod: 'POST',\n\t\t\t\tpath: shippingMethod\n\t\t\t\t\t? // Update the first existing method if one exists, otherwise create a new one.\n\t\t\t\t\t  `/wc/v3/shipping/zones/${ zone.id }/methods/${ shippingMethod.instance_id }`\n\t\t\t\t\t: `/wc/v3/shipping/zones/${ zone.id }/methods`,\n\t\t\t\tdata: {\n\t\t\t\t\tmethod_id: methodType,\n\t\t\t\t\tenabled: true,\n\t\t\t\t\tsettings: { cost: values[ `${ zone.id }_rate` ] },\n\t\t\t\t},\n\t\t\t} );\n\t\t} );\n\n\t\trecordEvent( 'tasklist_shipping_set_costs', {\n\t\t\tshipping_cost: shippingCost,\n\t\t\trest_world: restOfTheWorld,\n\t\t} );\n\n\t\t// @todo This is a workaround to force the task to mark as complete.\n\t\t// This should probably be updated to use wc-api so we can fetch shipping methods.\n\t\tsetSetting( 'onboarding', {\n\t\t\t...getSetting( 'onboarding', {} ),\n\t\t\tshippingZonesCount: 1,\n\t\t} );\n\n\t\tcreateNotice(\n\t\t\t'success',\n\t\t\t__( 'Your shipping rates have been updated.', 'woocommerce-admin' )\n\t\t);\n\n\t\tthis.props.onComplete();\n\t}\n\n\trenderInputPrefix() {\n\t\tconst { symbolPosition, symbol } = this.context.getCurrency();\n\t\tif ( symbolPosition.indexOf( 'right' ) === 0 ) {\n\t\t\treturn null;\n\t\t}\n\t\treturn (\n\t\t\t<span className=\"woocommerce-shipping-rate__control-prefix\">\n\t\t\t\t{ symbol }\n\t\t\t</span>\n\t\t);\n\t}\n\n\trenderInputSuffix( rate ) {\n\t\tconst { symbolPosition, symbol } = this.context.getCurrency();\n\t\tif ( symbolPosition.indexOf( 'right' ) === 0 ) {\n\t\t\treturn (\n\t\t\t\t<span className=\"woocommerce-shipping-rate__control-suffix\">\n\t\t\t\t\t{ symbol }\n\t\t\t\t</span>\n\t\t\t);\n\t\t}\n\n\t\treturn parseFloat( rate ) === parseFloat( 0 ) ? (\n\t\t\t<span className=\"woocommerce-shipping-rate__control-suffix\">\n\t\t\t\t{ __( 'Free shipping', 'woocommerce-admin' ) }\n\t\t\t</span>\n\t\t) : null;\n\t}\n\n\tgetFormattedRate( value ) {\n\t\tconst { formatDecimalString } = this.context;\n\t\tconst currencyString = formatDecimalString( value );\n\t\tif ( ! value.length || ! currencyString.length ) {\n\t\t\treturn formatDecimalString( 0 );\n\t\t}\n\n\t\treturn formatDecimalString( value );\n\t}\n\n\tgetInitialValues() {\n\t\tconst { formatDecimalString } = this.context;\n\t\tconst values = {};\n\n\t\tthis.props.shippingZones.forEach( ( zone ) => {\n\t\t\tconst shippingMethods = this.getShippingMethods( zone );\n\t\t\tconst rate =\n\t\t\t\tshippingMethods.length && shippingMethods[ 0 ].settings.cost\n\t\t\t\t\t? this.getFormattedRate(\n\t\t\t\t\t\t\tshippingMethods[ 0 ].settings.cost.value\n\t\t\t\t\t  )\n\t\t\t\t\t: formatDecimalString( 0 );\n\t\t\tvalues[ `${ zone.id }_rate` ] = rate;\n\n\t\t\tif ( shippingMethods.length && shippingMethods[ 0 ].enabled ) {\n\t\t\t\tvalues[ `${ zone.id }_enabled` ] = true;\n\t\t\t} else {\n\t\t\t\tvalues[ `${ zone.id }_enabled` ] = false;\n\t\t\t}\n\t\t} );\n\n\t\treturn values;\n\t}\n\n\tvalidate( values ) {\n\t\tconst errors = {};\n\n\t\tconst rates = Object.keys( values ).filter( ( field ) =>\n\t\t\tfield.endsWith( '_rate' )\n\t\t);\n\n\t\trates.forEach( ( rate ) => {\n\t\t\tif ( values[ rate ] < 0 ) {\n\t\t\t\terrors[ rate ] = __(\n\t\t\t\t\t'Shipping rates can not be negative numbers.',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t);\n\t\t\t}\n\t\t} );\n\n\t\treturn errors;\n\t}\n\n\trender() {\n\t\tconst { buttonText, shippingZones } = this.props;\n\n\t\tif ( ! shippingZones.length ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (\n\t\t\t<Form\n\t\t\t\tinitialValues={ this.getInitialValues() }\n\t\t\t\tonSubmitCallback={ this.updateShippingZones }\n\t\t\t\tvalidate={ this.validate }\n\t\t\t>\n\t\t\t\t{ ( {\n\t\t\t\t\tgetInputProps,\n\t\t\t\t\thandleSubmit,\n\t\t\t\t\tsetTouched,\n\t\t\t\t\tsetValue,\n\t\t\t\t\tvalues,\n\t\t\t\t} ) => {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t<div className=\"woocommerce-shipping-rates\">\n\t\t\t\t\t\t\t\t{ shippingZones.map( ( zone ) => (\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tclassName=\"woocommerce-shipping-rate\"\n\t\t\t\t\t\t\t\t\t\tkey={ zone.id }\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<div className=\"woocommerce-shipping-rate__icon\">\n\t\t\t\t\t\t\t\t\t\t\t{ zone.locations ? (\n\t\t\t\t\t\t\t\t\t\t\t\tzone.locations.map(\n\t\t\t\t\t\t\t\t\t\t\t\t\t( location ) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Flag\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize={ 24 }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcode={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlocation.code\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlocation.code\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t// Icon used for zones without locations or \"Rest of the world\".\n\t\t\t\t\t\t\t\t\t\t\t\t<i className=\"material-icons-outlined\">\n\t\t\t\t\t\t\t\t\t\t\t\t\tpublic\n\t\t\t\t\t\t\t\t\t\t\t\t</i>\n\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div className=\"woocommerce-shipping-rate__main\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"woocommerce-shipping-rate__name\">\n\t\t\t\t\t\t\t\t\t\t\t\t{ zone.name }\n\t\t\t\t\t\t\t\t\t\t\t\t{ zone.toggleable && (\n\t\t\t\t\t\t\t\t\t\t\t\t\t<FormToggle\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ ...getInputProps(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t`${ zone.id }_enabled`\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t{ ( ! zone.toggleable ||\n\t\t\t\t\t\t\t\t\t\t\t\tvalues[\n\t\t\t\t\t\t\t\t\t\t\t\t\t`${ zone.id }_enabled`\n\t\t\t\t\t\t\t\t\t\t\t\t] ) && (\n\t\t\t\t\t\t\t\t\t\t\t\t<TextControlWithAffixes\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={ __(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'Shipping cost',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ ...getInputProps(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t`${ zone.id }_rate`\n\t\t\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\t\t\tonBlur={ () => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetTouched(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t`${ zone.id }_rate`\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetValue(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t`${ zone.id }_rate`,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.getFormattedRate(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalues[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t`${ zone.id }_rate`\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t\t\t\t\t\t\tprefix={ this.renderInputPrefix() }\n\t\t\t\t\t\t\t\t\t\t\t\t\tsuffix={ this.renderInputSuffix(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalues[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t`${ zone.id }_rate`\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"muriel-input-text woocommerce-shipping-rate__control-wrapper\"\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t) ) }\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<Button isPrimary onClick={ handleSubmit }>\n\t\t\t\t\t\t\t\t{ buttonText ||\n\t\t\t\t\t\t\t\t\t__( 'Update', 'woocommerce-admin' ) }\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t);\n\t\t\t\t} }\n\t\t\t</Form>\n\t\t);\n\t}\n}\n\nShippingRates.propTypes = {\n\t/**\n\t * Text displayed on the primary button.\n\t */\n\tbuttonText: PropTypes.string,\n\t/**\n\t * Function used to mark the step complete.\n\t */\n\tonComplete: PropTypes.func.isRequired,\n\t/**\n\t * Function to create a transient notice in the store.\n\t */\n\tcreateNotice: PropTypes.func.isRequired,\n\t/**\n\t * Array of shipping zones returned from the WC REST API with added\n\t * `methods` and `locations` properties appended from separate API calls.\n\t */\n\tshippingZones: PropTypes.array,\n};\n\nShippingRates.defaultProps = {\n\tshippingZones: [],\n};\n\nShippingRates.contextType = CurrencyContext;\n\nexport default ShippingRates;\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Button } from '@wordpress/components';\nimport { Component, Fragment } from '@wordpress/element';\n\n/**\n * WooCommerce dependencies\n */\nimport { Form } from '@woocommerce/components';\n\n/**\n * Internal dependencies\n */\nimport {\n\tStoreAddress,\n\tvalidateStoreAddress,\n} from 'dashboard/components/settings/general/store-address';\n\nexport default class StoreLocation extends Component {\n\tconstructor() {\n\t\tsuper( ...arguments );\n\t\tthis.onSubmit = this.onSubmit.bind( this );\n\t}\n\n\tasync onSubmit( values ) {\n\t\tconst {\n\t\t\tonComplete,\n\t\t\tcreateNotice,\n\t\t\tisSettingsError,\n\t\t\tupdateAndPersistSettingsForGroup,\n\t\t} = this.props;\n\n\t\tawait updateAndPersistSettingsForGroup( 'general', {\n\t\t\tgeneral: {\n\t\t\t\twoocommerce_store_address: values.addressLine1,\n\t\t\t\twoocommerce_store_address_2: values.addressLine2,\n\t\t\t\twoocommerce_default_country: values.countryState,\n\t\t\t\twoocommerce_store_city: values.city,\n\t\t\t\twoocommerce_store_postcode: values.postCode,\n\t\t\t},\n\t\t} );\n\n\t\tif ( ! isSettingsError ) {\n\t\t\tonComplete( values );\n\t\t} else {\n\t\t\tcreateNotice(\n\t\t\t\t'error',\n\t\t\t\t__(\n\t\t\t\t\t'There was a problem saving your store location.',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t}\n\n\tgetInitialValues() {\n\t\tconst { settings } = this.props;\n\n\t\tconst {\n\t\t\twoocommerce_store_address: storeAddress,\n\t\t\twoocommerce_store_address_2: storeAddress2,\n\t\t\twoocommerce_store_city: storeCity,\n\t\t\twoocommerce_default_country: defaultCountry,\n\t\t\twoocommerce_store_postcode: storePostcode,\n\t\t} = settings;\n\n\t\treturn {\n\t\t\taddressLine1: storeAddress || '',\n\t\t\taddressLine2: storeAddress2 || '',\n\t\t\tcity: storeCity || '',\n\t\t\tcountryState: defaultCountry || '',\n\t\t\tpostCode: storePostcode || '',\n\t\t};\n\t}\n\n\trender() {\n\t\tconst { isSettingsRequesting } = this.props;\n\n\t\tif ( isSettingsRequesting ) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (\n\t\t\t<Form\n\t\t\t\tinitialValues={ this.getInitialValues() }\n\t\t\t\tonSubmitCallback={ this.onSubmit }\n\t\t\t\tvalidate={ validateStoreAddress }\n\t\t\t>\n\t\t\t\t{ ( { getInputProps, handleSubmit, setValue } ) => (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<StoreAddress\n\t\t\t\t\t\t\tgetInputProps={ getInputProps }\n\t\t\t\t\t\t\tsetValue={ setValue }\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Button isPrimary onClick={ handleSubmit }>\n\t\t\t\t\t\t\t{ __( 'Continue', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</Fragment>\n\t\t\t\t) }\n\t\t\t</Form>\n\t\t);\n\t}\n}\n","/**\n * External dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { Button } from '@wordpress/components';\nimport { Component, Fragment } from '@wordpress/element';\nimport { compose } from '@wordpress/compose';\nimport { difference, filter, get } from 'lodash';\nimport interpolateComponents from 'interpolate-components';\nimport { withDispatch, withSelect } from '@wordpress/data';\n\n/**\n * WooCommerce dependencies\n */\nimport { Card, H, Link, Stepper, Plugins } from '@woocommerce/components';\nimport { getHistory, getNewPath } from '@woocommerce/navigation';\nimport {\n\tgetAdminLink,\n\tgetSetting,\n\tsetSetting,\n} from '@woocommerce/wc-admin-settings';\nimport { SETTINGS_STORE_NAME, PLUGINS_STORE_NAME } from '@woocommerce/data';\n\n/**\n * Internal dependencies\n */\nimport Connect from 'dashboard/components/connect';\nimport { getCountryCode } from 'dashboard/utils';\nimport StoreLocation from './steps/location';\nimport withWCApiSelect from 'wc-api/with-select';\nimport { recordEvent, queueRecordEvent } from 'lib/tracks';\n\nclass Tax extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.initialState = {\n\t\t\tisPending: false,\n\t\t\tstepIndex: 0,\n\t\t\tautomatedTaxEnabled: true,\n\t\t\t// Cache the value of pluginsToActivate so that we can show/hide tasks based on it, but not have them update mid task.\n\t\t\tpluginsToActivate: props.pluginsToActivate,\n\t\t};\n\n\t\tthis.state = this.initialState;\n\n\t\tthis.completeStep = this.completeStep.bind( this );\n\t\tthis.configureTaxRates = this.configureTaxRates.bind( this );\n\t\tthis.updateAutomatedTax = this.updateAutomatedTax.bind( this );\n\t\tthis.setIsPending = this.setIsPending.bind( this );\n\t\tthis.shouldShowSuccessScreen = this.shouldShowSuccessScreen.bind(\n\t\t\tthis\n\t\t);\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.reset();\n\t}\n\n\treset() {\n\t\tthis.setState( this.initialState );\n\t}\n\n\tshouldShowSuccessScreen() {\n\t\tconst { stepIndex } = this.state;\n\t\tconst {\n\t\t\tisJetpackConnected,\n\t\t\tpluginsToActivate,\n\t\t\tgeneralSettings,\n\t\t} = this.props;\n\t\tconst {\n\t\t\twoocommerce_store_address: storeAddress,\n\t\t\twoocommerce_default_country: defaultCountry,\n\t\t\twoocommerce_store_postcode: storePostCode,\n\t\t} = generalSettings;\n\t\tconst isCompleteAddress = Boolean(\n\t\t\tstoreAddress && defaultCountry && storePostCode\n\t\t);\n\t\treturn (\n\t\t\tstepIndex !== null &&\n\t\t\tisCompleteAddress &&\n\t\t\t! pluginsToActivate.length &&\n\t\t\tisJetpackConnected &&\n\t\t\tthis.isTaxJarSupported()\n\t\t);\n\t}\n\n\tcomponentDidUpdate( prevProps ) {\n\t\tconst {\n\t\t\tgeneralSettings,\n\t\t\tisJetpackConnected,\n\t\t\ttaxSettings,\n\t\t\tisGeneralSettingsRequesting,\n\t\t} = this.props;\n\t\tconst { woocommerce_calc_taxes: calcTaxes } = generalSettings;\n\t\tconst { stepIndex } = this.state;\n\t\tconst currentStep = this.getSteps()[ stepIndex ];\n\t\tconst currentStepKey = currentStep && currentStep.key;\n\n\t\t// If general settings have stopped requesting, check if we should show success screen.\n\t\tif (\n\t\t\tprevProps.isGeneralSettingsRequesting &&\n\t\t\t! isGeneralSettingsRequesting\n\t\t) {\n\t\t\tif ( this.shouldShowSuccessScreen() ) {\n\t\t\t\t/* eslint-disable react/no-did-update-set-state */\n\t\t\t\tthis.setState( { stepIndex: null } );\n\t\t\t\t/* eslint-enable react/no-did-update-set-state */\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (\n\t\t\ttaxSettings.wc_connect_taxes_enabled &&\n\t\t\ttaxSettings.wc_connect_taxes_enabled !==\n\t\t\t\tprevProps.taxSettings.wc_connect_taxes_enabled\n\t\t) {\n\t\t\t/* eslint-disable react/no-did-update-set-state */\n\t\t\tthis.setState( {\n\t\t\t\tautomatedTaxEnabled:\n\t\t\t\t\ttaxSettings.wc_connect_taxes_enabled === 'yes'\n\t\t\t\t\t\t? true\n\t\t\t\t\t\t: false,\n\t\t\t} );\n\t\t\t/* eslint-enable react/no-did-update-set-state */\n\t\t}\n\n\t\tif ( currentStepKey === 'connect' && isJetpackConnected ) {\n\t\t\tthis.completeStep();\n\t\t}\n\n\t\tconst {\n\t\t\twoocommerce_calc_taxes: prevCalcTaxes,\n\t\t} = prevProps.generalSettings;\n\t\tif ( prevCalcTaxes === 'no' && calcTaxes === 'yes' ) {\n\t\t\twindow.location = getAdminLink(\n\t\t\t\t'admin.php?page=wc-settings&tab=tax&section=standard'\n\t\t\t);\n\t\t}\n\t}\n\n\tisTaxJarSupported() {\n\t\tconst { countryCode, tosAccepted } = this.props;\n\t\tconst {\n\t\t\tautomatedTaxSupportedCountries = [],\n\t\t\ttaxJarActivated,\n\t\t} = getSetting( 'onboarding', {} );\n\n\t\treturn (\n\t\t\t! taxJarActivated && // WCS integration doesn't work with the official TaxJar plugin.\n\t\t\ttosAccepted &&\n\t\t\tautomatedTaxSupportedCountries.includes( countryCode )\n\t\t);\n\t}\n\n\tcompleteStep() {\n\t\tconst { stepIndex } = this.state;\n\t\tconst steps = this.getSteps();\n\t\tconst nextStep = steps[ stepIndex + 1 ];\n\n\t\tif ( nextStep ) {\n\t\t\tthis.setState( { stepIndex: stepIndex + 1 } );\n\t\t} else {\n\t\t\tgetHistory().push( getNewPath( {}, '/', {} ) );\n\t\t}\n\t}\n\n\tasync configureTaxRates() {\n\t\tconst {\n\t\t\tgeneralSettings,\n\t\t\tupdateAndPersistSettingsForGroup,\n\t\t} = this.props;\n\n\t\tif ( generalSettings.woocommerce_calc_taxes !== 'yes' ) {\n\t\t\tthis.setState( { isPending: true } );\n\t\t\tawait updateAndPersistSettingsForGroup( 'general', {\n\t\t\t\tgeneral: {\n\t\t\t\t\twoocommerce_calc_taxes: 'yes',\n\t\t\t\t},\n\t\t\t} );\n\t\t}\n\n\t\twindow.location = getAdminLink(\n\t\t\t'admin.php?page=wc-settings&tab=tax&section=standard&wc_onboarding_active_task=tax'\n\t\t);\n\t}\n\n\tasync updateAutomatedTax() {\n\t\tconst { createNotice, updateAndPersistSettingsForGroup } = this.props;\n\t\tconst { automatedTaxEnabled } = this.state;\n\n\t\tawait updateAndPersistSettingsForGroup( 'tax', {\n\t\t\ttax: {\n\t\t\t\twc_connect_taxes_enabled: automatedTaxEnabled ? 'yes' : 'no',\n\t\t\t},\n\t\t} );\n\n\t\tawait updateAndPersistSettingsForGroup( 'general', {\n\t\t\tgeneral: {\n\t\t\t\twoocommerce_calc_taxes: 'yes',\n\t\t\t},\n\t\t} );\n\n\t\tif (\n\t\t\t! this.props.isTaxSettingsError &&\n\t\t\t! this.props.isGeneralSettingsError\n\t\t) {\n\t\t\t// @todo This is a workaround to force the task to mark as complete.\n\t\t\t// This should probably be updated to use wc-api so we can fetch tax rates.\n\t\t\tsetSetting( 'onboarding', {\n\t\t\t\t...getSetting( 'onboarding', {} ),\n\t\t\t\tisTaxComplete: true,\n\t\t\t} );\n\t\t\tcreateNotice(\n\t\t\t\t'success',\n\t\t\t\t__(\n\t\t\t\t\t\"You're awesome! One less item on your to-do list \",\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t)\n\t\t\t);\n\t\t\tif ( automatedTaxEnabled ) {\n\t\t\t\tgetHistory().push( getNewPath( {}, '/', {} ) );\n\t\t\t} else {\n\t\t\t\tthis.configureTaxRates();\n\t\t\t}\n\t\t} else {\n\t\t\tcreateNotice(\n\t\t\t\t'error',\n\t\t\t\t__(\n\t\t\t\t\t'There was a problem updating your tax settings.',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t}\n\n\tsetIsPending( value ) {\n\t\tthis.setState( { isPending: value } );\n\t}\n\n\tgetSteps() {\n\t\tconst {\n\t\t\tgeneralSettings,\n\t\t\tisGeneralSettingsRequesting,\n\t\t\tisJetpackConnected,\n\t\t} = this.props;\n\t\tconst { isPending, pluginsToActivate } = this.state;\n\n\t\tconst steps = [\n\t\t\t{\n\t\t\t\tkey: 'store_location',\n\t\t\t\tlabel: __( 'Set store location', 'woocommerce-admin' ),\n\t\t\t\tdescription: __(\n\t\t\t\t\t'The address from which your business operates',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tcontent: (\n\t\t\t\t\t<StoreLocation\n\t\t\t\t\t\t{ ...this.props }\n\t\t\t\t\t\tonComplete={ ( values ) => {\n\t\t\t\t\t\t\tconst country = getCountryCode(\n\t\t\t\t\t\t\t\tvalues.countryState\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\trecordEvent( 'tasklist_tax_set_location', {\n\t\t\t\t\t\t\t\tcountry,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\tif ( this.shouldShowSuccessScreen() ) {\n\t\t\t\t\t\t\t\tthis.setState( { stepIndex: null } );\n\t\t\t\t\t\t\t\t// Only complete step if another update hasn't already shown succes screen.\n\t\t\t\t\t\t\t} else if ( this.state.stepIndex !== null ) {\n\t\t\t\t\t\t\t\tthis.completeStep();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tisSettingsRequesting={ isGeneralSettingsRequesting }\n\t\t\t\t\t\tsettings={ generalSettings }\n\t\t\t\t\t/>\n\t\t\t\t),\n\t\t\t\tvisible: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'plugins',\n\t\t\t\tlabel: __(\n\t\t\t\t\t'Install Jetpack and WooCommerce Services',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tdescription: __(\n\t\t\t\t\t'Jetpack and WooCommerce Services allow you to automate sales tax calculations',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tcontent: (\n\t\t\t\t\t<Plugins\n\t\t\t\t\t\tonComplete={ () => {\n\t\t\t\t\t\t\trecordEvent( 'tasklist_tax_install_extensions', {\n\t\t\t\t\t\t\t\tinstall_extensions: true,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\tthis.completeStep();\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tonSkip={ () => {\n\t\t\t\t\t\t\tqueueRecordEvent(\n\t\t\t\t\t\t\t\t'tasklist_tax_install_extensions',\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tinstall_extensions: false,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\twindow.location.href = getAdminLink(\n\t\t\t\t\t\t\t\t'admin.php?page=wc-settings&tab=tax&section=standard'\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tskipText={ __(\n\t\t\t\t\t\t\t'Set up tax rates manually',\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t) }\n\t\t\t\t\t/>\n\t\t\t\t),\n\t\t\t\tvisible: pluginsToActivate.length && this.isTaxJarSupported(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'connect',\n\t\t\t\tlabel: __( 'Connect your store', 'woocommerce-admin' ),\n\t\t\t\tdescription: __(\n\t\t\t\t\t'Connect your store to WordPress.com to enable automated sales tax calculations',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tcontent: (\n\t\t\t\t\t<Connect\n\t\t\t\t\t\t{ ...this.props }\n\t\t\t\t\t\tsetIsPending={ this.setIsPending }\n\t\t\t\t\t\tonConnect={ () => {\n\t\t\t\t\t\t\trecordEvent( 'tasklist_tax_connect_store', {\n\t\t\t\t\t\t\t\tconnect: true,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tonSkip={ () => {\n\t\t\t\t\t\t\tqueueRecordEvent( 'tasklist_tax_connect_store', {\n\t\t\t\t\t\t\t\tconnect: false,\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t\twindow.location.href = getAdminLink(\n\t\t\t\t\t\t\t\t'admin.php?page=wc-settings&tab=tax&section=standard'\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tskipText={ __(\n\t\t\t\t\t\t\t'Set up tax rates manually',\n\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t) }\n\t\t\t\t\t/>\n\t\t\t\t),\n\t\t\t\tvisible: ! isJetpackConnected && this.isTaxJarSupported(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tkey: 'manual_configuration',\n\t\t\t\tlabel: __( 'Configure tax rates', 'woocommerce-admin' ),\n\t\t\t\tdescription: __(\n\t\t\t\t\t'Head over to the tax rate settings screen to configure your tax rates',\n\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t),\n\t\t\t\tcontent: (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\t\tisBusy={ isPending }\n\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\trecordEvent( 'tasklist_tax_config_rates' );\n\t\t\t\t\t\t\t\tthis.configureTaxRates();\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ __( 'Configure', 'woocommerce-admin' ) }\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t{ generalSettings.woocommerce_calc_taxes !==\n\t\t\t\t\t\t\t\t'yes' &&\n\t\t\t\t\t\t\t\tinterpolateComponents( {\n\t\t\t\t\t\t\t\t\tmixedString: __(\n\t\t\t\t\t\t\t\t\t\t/*eslint-disable max-len*/\n\t\t\t\t\t\t\t\t\t\t'By clicking \"Configure\" you\\'re enabling tax rates and calculations. More info {{link}}here{{/link}}.',\n\t\t\t\t\t\t\t\t\t\t/*eslint-enable max-len*/\n\t\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tcomponents: {\n\t\t\t\t\t\t\t\t\t\tlink: (\n\t\t\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\t\t\thref=\"https://docs.woocommerce.com/document/setting-up-taxes-in-woocommerce/#section-1\"\n\t\t\t\t\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"external\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t} ) }\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</Fragment>\n\t\t\t\t),\n\t\t\t\tvisible: ! this.isTaxJarSupported(),\n\t\t\t},\n\t\t];\n\n\t\treturn filter( steps, ( step ) => step.visible );\n\t}\n\n\trender() {\n\t\tconst { isPending, stepIndex } = this.state;\n\t\tconst {\n\t\t\tisGeneralSettingsRequesting,\n\t\t\tisTaxSettingsRequesting,\n\t\t\ttaxSettings,\n\t\t} = this.props;\n\t\tconst step = this.getSteps()[ stepIndex ];\n\n\t\treturn (\n\t\t\t<div className=\"woocommerce-task-tax\">\n\t\t\t\t<Card className=\"is-narrow\">\n\t\t\t\t\t{ step ? (\n\t\t\t\t\t\t<Stepper\n\t\t\t\t\t\t\tisPending={\n\t\t\t\t\t\t\t\tisPending ||\n\t\t\t\t\t\t\t\tisGeneralSettingsRequesting ||\n\t\t\t\t\t\t\t\tisTaxSettingsRequesting\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tisVertical={ true }\n\t\t\t\t\t\t\tcurrentStep={ step.key }\n\t\t\t\t\t\t\tsteps={ this.getSteps() }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<div className=\"woocommerce-task-tax__success\">\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tclassName=\"woocommerce-task-tax__success-icon\"\n\t\t\t\t\t\t\t\trole=\"img\"\n\t\t\t\t\t\t\t\taria-labelledby=\"woocommerce-task-tax__success-message\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<H id=\"woocommerce-task-tax__success-message\">\n\t\t\t\t\t\t\t\t{ __( 'Good news!', 'woocommerce-admin' ) }\n\t\t\t\t\t\t\t</H>\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t{ interpolateComponents( {\n\t\t\t\t\t\t\t\t\tmixedString: __(\n\t\t\t\t\t\t\t\t\t\t'{{strong}}Jetpack{{/strong}} and {{strong}}WooCommerce Services{{/strong}} ' +\n\t\t\t\t\t\t\t\t\t\t\t'can automate your sales tax calculations for you.',\n\t\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\tcomponents: {\n\t\t\t\t\t\t\t\t\t\tstrong: <strong />,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t} ) }\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tisPrimary\n\t\t\t\t\t\t\t\tisBusy={\n\t\t\t\t\t\t\t\t\tObject.keys( taxSettings ).length &&\n\t\t\t\t\t\t\t\t\tisTaxSettingsRequesting\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t\t\t\t\t'tasklist_tax_setup_automated_proceed',\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tsetup_automatically: true,\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tthis.setState(\n\t\t\t\t\t\t\t\t\t\t{ automatedTaxEnabled: true },\n\t\t\t\t\t\t\t\t\t\tthis.updateAutomatedTax\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ __( 'Yes please', 'woocommerce-admin' ) }\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\t\t\t\trecordEvent(\n\t\t\t\t\t\t\t\t\t\t'tasklist_tax_setup_automated_proceed',\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tsetup_automatically: false,\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tthis.setState(\n\t\t\t\t\t\t\t\t\t\t{ automatedTaxEnabled: false },\n\t\t\t\t\t\t\t\t\t\tthis.updateAutomatedTax\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{ __(\n\t\t\t\t\t\t\t\t\t\"No thanks, I'll configure taxes manually\",\n\t\t\t\t\t\t\t\t\t'woocommerce-admin'\n\t\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) }\n\t\t\t\t</Card>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default compose(\n\twithWCApiSelect( ( select ) => {\n\t\tconst { getOptions } = select( 'wc-api' );\n\n\t\tconst { getActivePlugins, isJetpackConnected } = select(\n\t\t\tPLUGINS_STORE_NAME\n\t\t);\n\t\tconst activePlugins = getActivePlugins();\n\t\tconst pluginsToActivate = difference(\n\t\t\t[ 'jetpack', 'woocommerce-services' ],\n\t\t\tactivePlugins\n\t\t);\n\t\tconst options = getOptions( [\n\t\t\t'wc_connect_options',\n\t\t\t'woocommerce_setup_jetpack_opted_in',\n\t\t] );\n\t\tconst connectOptions = get( options, 'wc_connect_options', {} );\n\t\tconst tosAccepted =\n\t\t\tconnectOptions.tos_accepted ||\n\t\t\toptions.woocommerce_setup_jetpack_opted_in;\n\n\t\treturn {\n\t\t\tisJetpackConnected: isJetpackConnected(),\n\t\t\tpluginsToActivate,\n\t\t\ttosAccepted,\n\t\t};\n\t} ),\n\twithSelect( ( select ) => {\n\t\tconst {\n\t\t\tgetSettings,\n\t\t\tgetSettingsError,\n\t\t\tisGetSettingsRequesting,\n\t\t} = select( SETTINGS_STORE_NAME );\n\n\t\tconst { general: generalSettings = {} } = getSettings( 'general' );\n\t\tconst isGeneralSettingsError = Boolean( getSettingsError( 'general' ) );\n\t\tconst isGeneralSettingsRequesting = isGetSettingsRequesting(\n\t\t\t'general'\n\t\t);\n\t\tconst countryCode = getCountryCode(\n\t\t\tgeneralSettings.woocommerce_default_country\n\t\t);\n\n\t\tconst { tax: taxSettings = {} } = getSettings( 'tax' );\n\t\tconst isTaxSettingsError = Boolean( getSettingsError( 'tax' ) );\n\t\tconst isTaxSettingsRequesting = isGetSettingsRequesting( 'tax' );\n\n\t\treturn {\n\t\t\tisGeneralSettingsError,\n\t\t\tisGeneralSettingsRequesting,\n\t\t\tgeneralSettings,\n\t\t\tcountryCode,\n\t\t\ttaxSettings,\n\t\t\tisTaxSettingsError,\n\t\t\tisTaxSettingsRequesting,\n\t\t};\n\t} ),\n\twithDispatch( ( dispatch ) => {\n\t\tconst { createNotice } = dispatch( 'core/notices' );\n\t\tconst { updateAndPersistSettingsForGroup } = dispatch(\n\t\t\tSETTINGS_STORE_NAME\n\t\t);\n\n\t\treturn {\n\t\t\tcreateNotice,\n\t\t\tupdateAndPersistSettingsForGroup,\n\t\t};\n\t} )\n)( Tax );\n","/**\n * External dependencies\n */\nimport { sanitize } from 'dompurify';\n\nexport const ALLOWED_TAGS = [ 'a', 'b', 'em', 'i', 'strong', 'p' ];\nexport const ALLOWED_ATTR = [ 'target', 'href', 'rel', 'name', 'download' ];\n\nexport default ( html ) => {\n\treturn {\n\t\t__html: sanitize( html, { ALLOWED_TAGS, ALLOWED_ATTR } ),\n\t};\n};\n"],"sourceRoot":""}